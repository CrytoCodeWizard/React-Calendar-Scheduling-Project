/**
 * Gantt-Schedule-Timeline-Calendar
 *
 * @copyright NEURONET - Rafal Pospiech <https://neuronet.io>
 * @author    Rafal Pospiech <neuronet.io@gmail.com>
 * @package   gantt-schedule-timeline-calendar
 * @version   3.3.2
 * @license   NEURONET Free License (see https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).GSTC=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function i(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})})),e}n((function(t,e){
/*!
	 * PEP v0.5.1 | https://github.com/jquery/PEP
	 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
	 */
t.exports=function(){var t=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function n(n,i){i=i||Object.create(null);var o=document.createEvent("Event");o.initEvent(n,i.bubbles||!1,i.cancelable||!1);for(var s,r=2;r<t.length;r++)o[s=t[r]]=i[s]||e[r];o.buttons=i.buttons||0;var a=0;return a=void 0!==i.pressure&&o.buttons?i.pressure:o.buttons?.5:0,o.x=o.clientX,o.y=o.clientY,o.pointerId=i.pointerId||0,o.width=i.width||1,o.height=i.height||1,o.pressure=a,o.tiltX=i.tiltX||0,o.tiltY=i.tiltY||0,o.twist=i.twist||0,o.tangentialPressure=i.tangentialPressure||0,o.pointerType=i.pointerType||"",o.hwTimestamp=i.hwTimestamp||0,o.isPrimary=i.isPrimary||!1,o.detail=0,o}var i=window.Map&&window.Map.prototype.forEach?Map:o;function o(){this.array=[],this.size=0}o.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach((function(n,i){t.call(e,n,i,this)}),this)}};var s=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],r=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],a={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},l="undefined"!=typeof SVGElementInstance,c={pointermap:new i,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach((function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))}),this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach((function(e){this.addEvent(t,e)}),this)},unlisten:function(t,e){e.forEach((function(e){this.removeEvent(t,e)}),this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=new n(t,e);return e.preventDefault&&(i.preventDefault=e.preventDefault),i._target=i._target||e.target,i},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),i=0;i<s.length;i++)n[e=s[i]]=t[e]||r[i],!l||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in a?void 0:e:t._target},propagate:function(t,e,n){for(var i=t.target,o=[];null!=i&&i!==document&&!i.contains(t.relatedTarget);)if(o.push(i),!(i=i.parentNode))return;n&&o.reverse(),o.forEach((function(n){t.target=n,e.call(this,t)}),this)},setCapture:function(t,e,i){this.captureInfo[t]&&this.releaseCapture(t,i),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,i),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var o=new n("gotpointercapture",{bubbles:!0});o.pointerId=t,o._target=e,i||this.asyncDispatchEvent(o)},releaseCapture:function(t,e){var i=this.captureInfo[t];if(i){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var o=new n("lostpointercapture",{bubbles:!0});o.pointerId=t,o._target=i,e||this.asyncDispatchEvent(o)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};c.boundHandler=c.eventHandler.bind(c);var u={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,o,s=t.elementFromPoint(e,n);for(o=this.targetingShadow(s);o;){if(i=o.elementFromPoint(e,n)){var r=this.targetingShadow(i);return this.searchRoot(r,e,n)||i}o=this.olderShadow(o)}return s}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach),d=Array.prototype.map.call.bind(Array.prototype.map),f=Array.prototype.slice.call.bind(Array.prototype.slice),p=Array.prototype.filter.call.bind(Array.prototype.filter),m=window.MutationObserver||window.WebKitMutationObserver,g="[touch-action]",v={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function y(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),m&&(this.observer=new m(this.mutationWatcher.bind(this)))}function b(t){return"body /shadow-deep/ "+t}function w(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}y.prototype={watchSubtree:function(t){this.observer&&u.canTarget(t)&&this.observer.observe(t,v)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){h(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll(g):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(f(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=d(t,this.findElements,this);return e.push(p(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var x=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],$="",D=window.PointerEvent||window.MSPointerEvent,P=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;function _(){if(D){x.forEach((function(t){$+=t.selector+w(t.value)+"\n",P&&($+=b(t.selector)+w(t.value)+"\n")}));var t=document.createElement("style");t.textContent=$,document.head.appendChild(t)}}var S=c.pointermap,M=25,I=[1,4,2,8,16],C=!1;try{C=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var T,O={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,s=0,r=n.length;s<r&&(e=n[s]);s++){var a=Math.abs(i-e.x),l=Math.abs(o-e.y);if(a<=M&&l<=M)return!0}},prepareEvent:function(t){var e=c.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,"webkitForce"in t&&(e.pressure=t.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),e},prepareButtonsForMove:function(t,e){var n=S.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=S.get(this.POINTER_ID),n=this.prepareEvent(t);C||(n.buttons=I[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),S.set(this.POINTER_ID,t),e&&0!==e.buttons?c.move(n):c.down(n)}},webkitmouseforcechanged:function(t){this.mousemove(t)},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,S.set(this.POINTER_ID,t),c.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=S.get(this.POINTER_ID),n=this.prepareEvent(t);if(!C){var i=I[n.button];n.buttons=e?e.buttons&~i:0,t.buttons=n.buttons}S.set(this.POINTER_ID,t),n.buttons&=~I[n.button],0===n.buttons?c.up(n):c.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,S.set(this.POINTER_ID,t),c.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,c.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.deactivateMouse()},deactivateMouse:function(){S.delete(this.POINTER_ID)}},E=c.captureInfo,R=u.findTarget.bind(u),A=u.allShadows.bind(u),k=c.pointermap,L=2500,N="touch-action",z=1,H=2,Y=4,G=8,V=z|H|Y|G,W={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(t){T.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute(N),n=this.touchActionToScrollType(e);"number"==typeof n&&(t._scrollType=n,c.listen(t,this.events),A(t).forEach((function(t){t._scrollType=n,c.listen(t,this.events)}),this))},elementRemoved:function(t){if(k.size>0){var e=this.events;t.addEventListener("touchend",(function(){t._scrollType=void 0,c.unlisten(t,e)}))}else t._scrollType=void 0,c.unlisten(t,this.events);A(t).forEach((function(t){t._scrollType=void 0,c.unlisten(t,this.events)}),this)},elementChanged:function(t,e){var n=t.getAttribute(N),i=this.touchActionToScrollType(n),o=this.touchActionToScrollType(e);"number"==typeof i&&"number"==typeof o?(t._scrollType=i,A(t).forEach((function(t){t._scrollType=i}),this)):"number"==typeof o?this.elementRemoved(t):"number"==typeof i&&this.elementAdded(t)},scrollTypes:{UP:function(t){return t.includes("pan-y")||t.includes("pan-up")?z:0},DOWN:function(t){return t.includes("pan-y")||t.includes("pan-down")?H:0},LEFT:function(t){return t.includes("pan-x")||t.includes("pan-left")?Y:0},RIGHT:function(t){return t.includes("pan-x")||t.includes("pan-right")?G:0}},touchActionToScrollType:function(t){if(t){if("auto"===t)return V;if("none"===t)return 0;var e=t.split(" "),n=this.scrollTypes;return n.UP(e)|n.DOWN(e)|n.LEFT(e)|n.RIGHT(e)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===k.size||1===k.size&&k.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1)},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"touchforcechange"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=c.cloneEvent(t),i=n.pointerId=t.identifier+2;if(n.target=E[i]||R(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=void 0!==t.force?t.force:void 0!==t.webkitForce?t.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(t),t.altitudeAngle){const e=Math.tan(t.altitudeAngle),i=180/Math.PI;n.tiltX=Math.atan(Math.cos(t.azimuthAngle)/e)*i,n.tiltY=Math.atan(Math.sin(t.azimuthAngle)/e)*i}else n.tiltX=0,n.tiltY=0;"stylus"===t.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var o=this;return n.preventDefault=function(){o.scrolling=!1,o.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var i,o=0;o<n.length;o++)i=n[o],e.call(this,this.touchToPointer(i))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if(0===n)e=!1;else if(n===V)e=!0;else{var i=t.changedTouches[0],o=i.clientY-this.firstXY.Y,s=Math.abs(o),r=i.clientX-this.firstXY.X,a=Math.abs(r),l=n&z,c=n&H,u=n&Y,h=n&G;u&&h?e=a>s:u?e=a>s&&r>0:h&&(e=a>s&&r<0),e||(l&&c?e=a<s:l?e=a<s&&o>0:c&&(e=a<s&&o<0))}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,o=t.length;i<o&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(k.size>=e.length){var n=[];k.forEach((function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t.out;n.push(o)}}),this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||this.processTouches(t,this.overDown)},overDown:function(t){k.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),c.enterOver(t),c.down(t)},touchforcechange:function(t){this.touchmove(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=k.get(e.pointerId);if(n){var i=n.out,o=n.outTarget;c.move(e),i&&o!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=o,i.target=o,e.target?(c.leaveOut(i),c.enterOver(e)):(e.target=o,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(c.up(t),c.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){c.cancel(t),c.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){k.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=O.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var o=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,i);setTimeout(o,L)}}};T=new y(W.elementAdded,W.elementRemoved,W.elementChanged,W);var j,B,F,X=c.pointermap,U=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,K={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return U&&((e=c.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){X.delete(t)},MSPointerDown:function(t){X.set(t.pointerId,t);var e=this.prepareEvent(t);c.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);c.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);c.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);c.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);c.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=c.makeEvent("lostpointercapture",t);c.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=c.makeEvent("gotpointercapture",t);c.dispatchEvent(e)}};function Q(){if(!window.PointerEvent){if(window.PointerEvent=n,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),c.registerSource("ms",K)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),c.registerSource("mouse",O),void 0!==window.ontouchstart&&c.registerSource("touch",W);c.register(document)}}function q(t){if(!c.pointermap.has(t)){var e=new Error("NotFoundError");throw e.name="NotFoundError",e}}function J(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function Z(t){return 0!==c.pointermap.get(t).buttons}function tt(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:j},releasePointerCapture:{value:B},hasPointerCapture:{value:F}})}return window.navigator.msPointerEnabled?(j=function(t){q(t),J(this),Z(t)&&(c.setCapture(t,this,!0),this.msSetPointerCapture(t))},B=function(t){q(t),c.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(j=function(t){q(t),J(this),Z(t)&&c.setCapture(t,this)},B=function(t){q(t),c.releaseCapture(t)}),F=function(t){return!!c.captureInfo[t]},_(),Q(),tt(),{dispatcher:c,Installer:y,PointerEvent:n,PointerMap:i,targetFinding:u}}()}));
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */const o=t=>(...e)=>{const n=t(...e);return n.isDirective=!0,n};class s{constructor(){this.isDirective=!0,this.isClass=!0}body(t){}}const r=t=>null!=t&&"boolean"==typeof t.isDirective,a="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,l=(t,e,n=null,i=null)=>{for(;e!==n;){const n=e.nextSibling;t.insertBefore(e,i),e=n}},c=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},u={},h={},d=`{{lit-${String(Math.random()).slice(2)}}}`,f=`\x3c!--${d}--\x3e`,p=new RegExp(`${d}|${f}`);
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */class m{constructor(t,e){this.parts=[],this.element=e;const n=[],i=[],o=document.createTreeWalker(e.content,133,null,!1);let s=0,r=-1,a=0;const{strings:l,values:{length:c}}=t;for(;a<c;){const t=o.nextNode();if(null!==t){if(r++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let i=0;for(let t=0;t<n;t++)g(e[t].name,"$lit$")&&i++;for(;i-- >0;){const e=l[a],n=w.exec(e)[2],i=n.toLowerCase()+"$lit$",o=t.getAttribute(i);t.removeAttribute(i);const s=o.split(p);this.parts.push({type:"attribute",index:r,name:n,strings:s}),a+=s.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),o.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(d)>=0){const i=t.parentNode,o=e.split(p),s=o.length-1;for(let e=0;e<s;e++){let n,s=o[e];if(""===s)n=b();else{const t=w.exec(s);null!==t&&g(t[2],"$lit$")&&(s=s.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),n=document.createTextNode(s)}i.insertBefore(n,t),this.parts.push({type:"node",index:++r})}""===o[s]?(i.insertBefore(b(),t),n.push(t)):t.data=o[s],a+=s}}else if(8===t.nodeType)if(t.data===d){const e=t.parentNode;null!==t.previousSibling&&r!==s||(r++,e.insertBefore(b(),t)),s=r,this.parts.push({type:"node",index:r}),null===t.nextSibling?t.data="":(n.push(t),r--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf(d,e+1));)this.parts.push({type:"node",index:-1}),a++}}else o.currentNode=i.pop()}for(const t of n)t.parentNode.removeChild(t)}}const g=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},v=t=>-1!==t.index,y=document.createComment(""),b=()=>y.cloneNode(),w=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */class x{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let o,s=0,r=0,l=i.nextNode();for(;s<n.length;)if(o=n[s],v(o)){for(;r<o.index;)r++,"TEMPLATE"===l.nodeName&&(e.push(l),i.currentNode=l.content),null===(l=i.nextNode())&&(i.currentNode=e.pop(),l=i.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));s++}else this.__parts.push(void 0),s++;return a&&(document.adoptNode(t),customElements.upgrade(t)),t
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */}}const $=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),D=` ${d} `,P=document.createElement("template");class _{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let i=0;i<t;i++){const t=this.strings[i],o=t.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===t.indexOf("--\x3e",o+1);const s=w.exec(t);e+=null===s?t+(n?D:f):t.substr(0,s.index)+s[1]+s[2]+"$lit$"+s[3]+d}return e+=this.strings[t],e}getTemplateElement(){const t=P.cloneNode();let e=this.getHTML();return void 0!==$&&(e=$.createHTML(e)),t.innerHTML=e,t}}class S extends _{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),l(e,n.firstChild),t
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */}}const M=t=>null===t||!("object"==typeof t||"function"==typeof t),I=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]),C=document.createTextNode("");class T{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new O(this)}_getValue(){const t=this.strings,e=t.length-1,n=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=n[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!I(t))return t}let i="";for(let o=0;o<e;o++){i+=t[o];const e=n[o];if(void 0!==e){const t=e.value;if(M(t)||!I(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[e],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class O{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===u||M(t)&&t===this.value||(this.value=t,r(t)||(this.committer.dirty=!0))}commit(){for(;r(this.value);){const t=this.value;this.value=u,t.isClass?t.body(this):t(this)}this.value!==u&&this.committer.commit()}}class E{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(b()),this.endNode=t.appendChild(b())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=b()),t.__insert(this.endNode=b())}insertAfterPart(t){t.__insert(this.startNode=b()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;r(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=u,t.isClass?t.body(this):t(this)}const t=this.__pendingValue;t!==u&&(M(t)?t!==this.value&&this.__commitText(t):t instanceof _?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):I(t)?this.__commitIterable(t):t===h?(this.value=h,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);if(e===this.endNode.previousSibling&&3===e.nodeType)e.data=n;else{const t=C.cloneNode();t.textContent=n,this.__commitNode(t)}this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof x&&this.value.template===e)this.value.update(t.values);else{const n=new x(e,t.processor,this.options),i=n._clone();n.update(t.values),this.__commitNode(i),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const o of t)n=e[i],void 0===n&&(n=new E(this.options),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(o),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){c(this.startNode.parentNode,t.nextSibling,this.endNode)}}class R{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;r(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=u,t.isClass?t.body(this):t(this)}if(this.__pendingValue===u)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=u}}class A extends T{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new k(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class k extends O{}let L=!1;(()=>{try{const t={get capture(){return L=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class N{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;r(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=u,t.isClass?t.body(this):t(this)}if(this.__pendingValue===u)return;const t=this.__pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=z(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=u}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const z=t=>t&&(L?{capture:t.capture,passive:t.passive,once:t.once}:t.capture
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */);class H{handleAttributeExpressions(t,e,n,i){const o=e[0];return"."===o?new A(t,e.slice(1),n).parts:"@"===o?[new N(t,e.slice(1),i.eventContext)]:"?"===o?[new R(t,e.slice(1),n)]:new T(t,e,n).parts}handleTextExpression(t){return new E(t)}}const Y=new H;
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */function G(t){let e=V.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},V.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join(d);return n=e.keyString.get(i),void 0===n&&(n=new m(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const V=new Map,W=new WeakMap,j=(t,e,n)=>{let i=W.get(e);void 0===i&&(c(e,e.firstChild),W.set(e,i=new E(Object.assign({templateFactory:G},n))),i.appendInto(e)),i.setValue(t),i.commit()};
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const B=(t,...e)=>new _(t,e,"html",Y),F=(t,...e)=>new S(t,e,"svg",Y);var X=Object.freeze({__proto__:null,html:B,svg:F,DefaultTemplateProcessor:H,defaultTemplateProcessor:Y,directive:o,Directive:s,isDirective:r,removeNodes:c,reparentNodes:l,noChange:u,nothing:h,AttributeCommitter:T,AttributePart:O,BooleanAttributePart:R,EventPart:N,isIterable:I,isPrimitive:M,NodePart:E,PropertyCommitter:A,PropertyPart:k,parts:W,render:j,templateCaches:V,templateFactory:G,TemplateInstance:x,SVGTemplateResult:S,TemplateResult:_,createMarker:b,isTemplatePartActive:v,Template:m});
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */const U=o((t,e)=>async n=>{var i,o;if(!(n instanceof E))throw new Error("asyncAppend can only be used in text bindings");if(t===n.value)return;let s;n.value=t;let r=0;try{for(var a,l=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,o){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,o,(e=t[n](e)).done,e.value)}))}}}(t);!(a=await l.next()).done;){let i=a.value;if(n.value!==t)break;0===r&&n.clear(),void 0!==e&&(i=e(i,r));let o=n.startNode;void 0!==s&&(o=b(),s.endNode=o,n.endNode.parentNode.insertBefore(o,n.endNode)),s=new E(n.options),s.insertAfterNode(o),s.setValue(i),s.commit(),r++}}catch(t){i={error:t}}finally{try{a&&!a.done&&(o=l.return)&&await o.call(l)}finally{if(i)throw i.error}}});
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */const K=o((t,e)=>async n=>{var i,o;if(!(n instanceof E))throw new Error("asyncReplace can only be used in text bindings");if(t===n.value)return;const s=new E(n.options);n.value=t;let r=0;try{for(var a,l=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,o){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,o,(e=t[n](e)).done,e.value)}))}}}(t);!(a=await l.next()).done;){let i=a.value;if(n.value!==t)break;0===r&&(n.clear(),s.appendIntoPart(n)),void 0!==e&&(i=e(i,r)),s.setValue(i),s.commit(),r++}}catch(t){i={error:t}}finally{try{a&&!a.done&&(o=l.return)&&await o.call(l)}finally{if(i)throw i.error}}}),Q=new WeakMap,q=o(t=>e=>{if(!(e instanceof E))throw new Error("cache can only be used in text bindings");let n=Q.get(e);void 0===n&&(n=new WeakMap,Q.set(e,n));const i=e.value;if(i instanceof x){if(t instanceof _&&i.template===e.options.templateFactory(t))return void e.setValue(t);{let t=n.get(i.template);void 0===t&&(t={instance:i,nodes:document.createDocumentFragment()},n.set(i.template,t)),l(t.nodes,e.startNode.nextSibling,e.endNode)}}if(t instanceof _){const i=e.options.templateFactory(t),o=n.get(i);void 0!==o&&(e.setValue(o.nodes),e.commit(),e.value=o.instance)}e.setValue(t)});
/**
	 * @license
	 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */
/**
	 * @license
	 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */class J{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const e=(t.getAttribute("class")||"").split(/\s+/);for(const t of e)this.classes.add(t)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach(e=>t+=e+" "),this.element.setAttribute("class",t)}}}const Z=new WeakMap,tt=o(t=>e=>{if(!(e instanceof O)||e instanceof k||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:n}=e,{element:i}=n;let o=Z.get(e);void 0===o&&(i.setAttribute("class",n.strings.join(" ")),Z.set(e,o=new Set));const s=i.classList||new J(i);o.forEach(e=>{e in t||(s.remove(e),o.delete(e))});for(const e in t){const n=t[e];n!=o.has(e)&&(n?(s.add(e),o.add(e)):(s.remove(e),o.delete(e)))}"function"==typeof s.commit&&s.commit()}),et=new WeakMap,nt=o((t,e)=>n=>{const i=et.get(n);if(Array.isArray(t)){if(Array.isArray(i)&&i.length===t.length&&t.every((t,e)=>t===i[e]))return}else if(i===t&&(void 0!==t||et.has(n)))return;n.setValue(e()),et.set(n,Array.isArray(t)?Array.from(t):t)}),it=new WeakMap,ot=o(t=>e=>{const n=it.get(e);if(void 0===t&&e instanceof O){if(void 0!==n||!it.has(e)){const t=e.committer.name;e.committer.element.removeAttribute(t)}}else t!==n&&e.setValue(t);it.set(e,t)}),st=(t,e)=>{const n=t.startNode.parentNode,i=void 0===e?t.endNode:e.startNode,o=n.insertBefore(b(),i);n.insertBefore(b(),i);const s=new E(t.options);return s.insertAfterNode(o),s},rt=(t,e)=>(t.setValue(e),t.commit(),t),at=(t,e,n)=>{const i=t.startNode.parentNode,o=n?n.startNode:t.endNode,s=e.endNode.nextSibling;s!==o&&l(i,e.startNode,s,o)},lt=t=>{c(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},ct=(t,e,n)=>{const i=new Map;for(let o=e;o<=n;o++)i.set(t[o],o);return i},ut=new WeakMap,ht=new WeakMap,dt=o((t,e,n)=>{let i;return void 0===n?n=e:void 0!==e&&(i=e),e=>{if(!(e instanceof E))throw new Error("repeat can only be used in text bindings");const o=ut.get(e)||[],s=ht.get(e)||[],r=[],a=[],l=[];let c,u,h=0;for(const e of t)l[h]=i?i(e,h):h,a[h]=n(e,h),h++;let d=0,f=o.length-1,p=0,m=a.length-1;for(;d<=f&&p<=m;)if(null===o[d])d++;else if(null===o[f])f--;else if(s[d]===l[p])r[p]=rt(o[d],a[p]),d++,p++;else if(s[f]===l[m])r[m]=rt(o[f],a[m]),f--,m--;else if(s[d]===l[m])r[m]=rt(o[d],a[m]),at(e,o[d],r[m+1]),d++,m--;else if(s[f]===l[p])r[p]=rt(o[f],a[p]),at(e,o[f],o[d]),f--,p++;else if(void 0===c&&(c=ct(l,p,m),u=ct(s,d,f)),c.has(s[d]))if(c.has(s[f])){const t=u.get(l[p]),n=void 0!==t?o[t]:null;if(null===n){const t=st(e,o[d]);rt(t,a[p]),r[p]=t}else r[p]=rt(n,a[p]),at(e,n,o[d]),o[t]=null;p++}else lt(o[f]),f--;else lt(o[d]),d++;for(;p<=m;){const t=st(e,r[m+1]);rt(t,a[p]),r[p++]=t}for(;d<=f;){const t=o[d++];null!==t&&lt(t)}ut.set(e,r),ht.set(e,l)}}),ft=new WeakMap,pt=document.createElement("template"),mt=o(t=>e=>{if(!(e instanceof E))throw new Error("unsafeHTML can only be used in text bindings");const n=ft.get(e);if(void 0!==n&&M(t)&&t===n.value&&e.value===n.fragment)return;const i=pt.cloneNode();i.innerHTML=t;const o=document.importNode(i.content,!0);e.setValue(o),ft.set(e,{value:t,fragment:o})}),gt=new WeakMap,vt=o((...t)=>e=>{let n=gt.get(e);void 0===n&&(n={lastRenderedIndex:2147483647,values:[]},gt.set(e,n));const i=n.values;let o=i.length;n.values=t;for(let s=0;s<t.length&&!(s>n.lastRenderedIndex);s++){const r=t[s];if(M(r)||"function"!=typeof r.then){e.setValue(r),n.lastRenderedIndex=s;break}s<o&&r===i[s]||(n.lastRenderedIndex=2147483647,o=0,Promise.resolve(r).then(t=>{const i=n.values.indexOf(r);i>-1&&i<n.lastRenderedIndex&&(n.lastRenderedIndex=i,e.setValue(t),e.commit())}))}}),yt=o(t=>e=>{let n;if(e instanceof N||e instanceof E)throw new Error("The `live` directive is not allowed on text or event bindings");if(e instanceof R)bt(e.strings),n=e.element.hasAttribute(e.name),e.value=n;else{const{element:i,name:o,strings:s}=e.committer;if(bt(s),e instanceof k){if(n=i[o],n===t)return}else e instanceof O&&(n=i.getAttribute(o));if(n===String(t))return}e.setValue(t)}),bt=t=>{if(2!==t.length||""!==t[0]||""!==t[1])throw new Error("`live` bindings can only contain a single expression")},wt=new WeakMap;class xt extends s{constructor(t){super(),this.ifFn=t}body(t){const e=this.ifFn(),n=t.committer.element;if(e)wt.has(t)||wt.set(t,{element:n,nextSibling:n.nextSibling,previousSibling:n.previousSibling,parent:n.parentNode}),n.remove();else{const e=wt.get(t);e&&(e.nextSibling&&e.nextSibling.parentNode?e.nextSibling.parentNode.insertBefore(e.element,e.nextSibling):e.previousSibling&&e.previousSibling.parentNode?e.previousSibling.parentNode.appendChild(e.element):e.parent&&e.parent.appendChild(e.element),wt.delete(t))}}}class $t extends s{constructor(t,e=!1){super(),this.toRemove=[],this.toUpdate=[],this.debug=!1,this.previous={},this.style=t,this.detach=e}setStyle(t){this.style=t}setDebug(t=!0){this.debug=t}setDetach(t){this.detach=t}body(t){this.toRemove.length=0,this.toUpdate.length=0;const e=t.committer.element,n=e.style;let i=this.previous;if(e.attributes.getNamedItem("style")){const t=e.attributes.getNamedItem("style").value.split(";").map(t=>t.substr(0,t.indexOf(":")).trim()).filter(t=>!!t);for(const e of t)void 0===this.style[e]&&(this.toRemove.includes(e)||this.toRemove.push(e))}for(const t in i)this.style.hasOwnProperty(t)&&void 0===this.style[t]&&(this.toRemove.includes(t)||this.toRemove.push(t));for(const t in this.style){if(!this.style.hasOwnProperty(t))continue;const e=this.style[t],n=i[t];void 0!==n&&n===e||this.toUpdate.push(t)}if(this.debug&&(console.log("[StyleMap] to remove",[...this.toRemove]),console.log("[StyleMap] to update",[...this.toUpdate])),this.toRemove.length||this.toUpdate.length){let t,i;this.detach&&(t=e.parentNode,t&&(i=e.nextSibling,e.remove()));for(const t of this.toRemove)n.removeProperty(t),n[t]&&delete n[t];for(const t of this.toUpdate){const e=this.style[t];t.includes("-")?n.setProperty(t,e):n[t]=e}this.detach&&t&&t.insertBefore(e,i),this.previous=Object.assign({},this.style)}}}class Dt{constructor(){this.isAction=!0}}Dt.prototype.isAction=!0;const Pt={element:document.createTextNode(""),axis:"xy",threshold:10,onDown(){},onMove(){},onUp(){},onWheel(){}},_t="undefined"!=typeof PointerEvent;let St=0;class Mt extends Dt{constructor(t,e){super(),this.moving="",this.initialX=0,this.initialY=0,this.lastY=0,this.lastX=0,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onWheel=this.onWheel.bind(this),this.element=t,this.id=++St,this.options=Object.assign(Object.assign({},Pt),e.pointerOptions),_t?(t.addEventListener("pointerdown",this.onPointerDown),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp)):(t.addEventListener("touchstart",this.onPointerDown),document.addEventListener("touchmove",this.onPointerMove,{passive:!1}),document.addEventListener("touchend",this.onPointerUp),document.addEventListener("touchcancel",this.onPointerUp),t.addEventListener("mousedown",this.onPointerDown),document.addEventListener("mousemove",this.onPointerMove,{passive:!1}),document.addEventListener("mouseup",this.onPointerUp))}normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,i=t.deltaZ||0;const o=t.deltaMode,s=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let r=1;switch(o){case 1:r=s;break;case 2:r=window.height}return e*=r,n*=r,i*=r,{x:e,y:n,z:i,event:t}}onWheel(t){const e=this.normalizeMouseWheelEvent(t);this.options.onWheel(e)}normalizePointerEvent(t){let e={x:0,y:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0,event:t};switch(t.type){case"wheel":const n=this.normalizeMouseWheelEvent(t);e.x=n.x,e.y=n.y,e.pageX=e.x,e.pageY=e.y,e.screenX=e.x,e.screenY=e.y,e.clientX=e.x,e.clientY=e.y;break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":e.x=t.changedTouches[0].screenX,e.y=t.changedTouches[0].screenY,e.pageX=t.changedTouches[0].pageX,e.pageY=t.changedTouches[0].pageY,e.screenX=t.changedTouches[0].screenX,e.screenY=t.changedTouches[0].screenY,e.clientX=t.changedTouches[0].clientX,e.clientY=t.changedTouches[0].clientY;break;default:e.x=t.x,e.y=t.y,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY}return e}onPointerDown(t){if("mousedown"===t.type&&0!==t.button)return;this.moving="xy";const e=this.normalizePointerEvent(t);this.lastX=e.x,this.lastY=e.y,this.initialX=e.x,this.initialY=e.y,this.options.onDown(e)}handleX(t){let e=t.x-this.lastX;return this.lastY=t.y,this.lastX=t.x,e}handleY(t){let e=t.y-this.lastY;return this.lastY=t.y,this.lastX=t.x,e}onPointerMove(t){if(""===this.moving||"mousemove"===t.type&&0!==t.button)return;const e=this.normalizePointerEvent(t);if("x|y"===this.options.axis){let n=0,i=0;("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",n=this.handleX(e)),("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",i=this.handleY(e)),this.options.onMove({movementX:n,movementY:i,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("xy"===this.options.axis){let n=0,i=0;Math.abs(e.x-this.initialX)>this.options.threshold&&(n=this.handleX(e)),Math.abs(e.y-this.initialY)>this.options.threshold&&(i=this.handleY(e)),this.options.onMove({movementX:n,movementY:i,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("x"===this.options.axis)("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",this.options.onMove({movementX:this.handleX(e),movementY:0,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}));else if("y"===this.options.axis){let n=0;("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",n=this.handleY(e)),this.options.onMove({movementX:0,movementY:n,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}}onPointerUp(t){this.moving="";const e=this.normalizePointerEvent(t);this.options.onUp({movementX:0,movementY:0,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}),this.lastY=0,this.lastX=0}destroy(t){_t?(t.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)):(t.removeEventListener("mousedown",this.onPointerDown),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseup",this.onPointerUp),t.removeEventListener("touchstart",this.onPointerDown),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp),document.removeEventListener("touchcancel",this.onPointerUp))}}function It(t){let e=0;return function(n){e||(e=requestAnimationFrame((function(){e=0,t.apply(void 0,[n])})))}}function Ct(t){return t&&"object"==typeof t&&null!==t&&t.constructor&&"Object"===t.constructor.name}function Tt(t,...e){const n=e.shift();if(Ct(t)&&Ct(n))for(const e in n)if(Ct(n[e]))"function"==typeof n[e].clone?t[e]=n[e].clone():(void 0===t[e]&&(t[e]={}),t[e]=Tt(t[e],n[e]));else if(Array.isArray(n[e])){t[e]=new Array(n[e].length);let i=0;for(let o of n[e])Ct(o)?"function"==typeof o.clone?t[e][i]=o.clone():t[e][i]=Tt({},o):t[e][i]=o,i++}else t[e]=n[e];return e.length?Tt(t,...e):t}function Ot(t){if(void 0!==t.actions){const e=t.actions.map(t=>{const e=Object.assign({},t),n=Object.assign({},e.props);return delete n.state,delete n.api,delete e.element,e.props=n,e});t.actions=e}return Tt({},t)}var Et={mergeDeep:Tt,clone:Ot,schedule:It};class Rt{constructor(t,e){this.slotInstances={},this.destroyed=!1,this.vido=t,this.props=e,this.destroy=this.destroy.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this),this.getInstances=this.getInstances.bind(this),this.setComponents=this.setComponents.bind(this),this.vido.onDestroy(()=>{this.destroy()})}setComponents(t){if(t&&!this.destroyed){for(const e in t){const n=t[e];void 0===this.slotInstances[e]&&(this.slotInstances[e]=[]);for(const t of this.slotInstances[e])t.destroy();this.slotInstances[e].length=0;for(const t of n)this.slotInstances[e].push(this.vido.createComponent(t,this.props))}this.vido.update()}}destroy(){if(!this.destroyed){for(const t in this.slotInstances){for(const e of this.slotInstances[t])e.destroy();this.slotInstances[t].length=0}this.destroyed=!0}}change(t,e){if(!this.destroyed)for(const n in this.slotInstances){const i=this.slotInstances[n];for(const n of i)n.change(t,e)}}getInstances(t){return this.destroyed?[]:void 0===t?this.slotInstances:this.slotInstances[t]}html(t,e){if(this.destroyed)return;if(!this.slotInstances[t]||0===this.slotInstances[t].length)return e;let n=e;for(const e of this.slotInstances[t])n=e.html(n);return n}getProps(){return this.props}isDestroyed(){return this.destroyed}}function At(t,e){let n=0;const i=new Map;let r,a,l=new Map,c=0;const u=[],h=Promise.resolve(),d={},f=function(t){return class extends s{constructor(t){super(),this.actions=[],this.instance=t}set(t,e){return this.actions=t,this.props=e,this}body(e){const n=e.committer.element;for(const e of this.actions)if(void 0!==e){let i;if(t.has(this.instance))for(const o of t.get(this.instance))if(o.componentAction.create===e&&o.element===n){i=o;break}if(i)i.props=this.props;else{void 0!==n.vido&&delete n.vido;const i={create:e,update(){},destroy(){}},o={instance:this.instance,componentAction:i,element:n,props:this.props};let s=[];t.has(this.instance)&&(s=t.get(this.instance)),s.push(o),t.set(this.instance,s)}}}}}(l);class p{constructor(t){this.instance=t}create(t,e){const n=new f(this.instance);return n.set(t,e),n}}const m=function(t,e,n){return class{constructor(t,e,n={}){this.destroyed=!1,this.instance=t,this.name=e.name,this.vidoInstance=e,this.props=n,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this)}destroy(){this.destroyed||(this.vidoInstance.debug&&(console.groupCollapsed("destroying component "+this.instance),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.destroyComponent(this.instance,this.vidoInstance),this.destroyed=!0)}update(i){return this.vidoInstance.debug&&(console.groupCollapsed("updating component "+this.instance),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.updateTemplate(i)}change(i,o={}){this.vidoInstance.debug&&(console.groupCollapsed("changing component "+this.instance),console.log(n({props:this.props,newProps:i,components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd());const s=t.get(this.instance);s&&s.change(i,o)}html(e={}){const n=t.get(this.instance);if(n&&!n.destroyed)return n.update(e,this.vidoInstance)}_getComponents(){return t}_getActions(){return e}}}(i,l,Ot),g=function(t,e,n){return class{constructor(t,e,n){this.destroyed=!1,this.instance=t,this.vidoInstance=e,this.renderFunction=n,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this)}destroy(){if(!this.destroyed){this.vidoInstance.debug&&(console.groupCollapsed("component destroy method fired "+this.instance),console.log(n({props:this.vidoInstance.props,components:t.keys(),destroyable:this.vidoInstance.destroyable,actionsByInstance:e})),console.trace(),console.groupEnd()),this.content&&"function"==typeof this.content.destroy&&this.content.destroy();for(const t of this.vidoInstance.destroyable)t();this.vidoInstance.onChangeFunctions.length=0,this.vidoInstance.destroyable.length=0,this.vidoInstance.destroyed=!0,this.destroyed=!0,this.vidoInstance.update()}}update(i={}){return this.vidoInstance.debug&&(console.groupCollapsed("component update method fired "+this.instance),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.renderFunction(i)}change(i,o={leave:!1}){const s=i;this.vidoInstance.debug&&(console.groupCollapsed("component change method fired "+this.instance),console.log(n({props:s,components:t.keys(),onChangeFunctions:this.vidoInstance.onChangeFunctions,changedProps:i,actionsByInstance:e})),console.trace(),console.groupEnd());for(const t of this.vidoInstance.onChangeFunctions)t(i,o)}}}(i,l,Ot);class v{constructor(n="",s=""){this.instance="",this.name="",this.destroyable=[],this.destroyed=!1,this.onChangeFunctions=[],this.debug=!1,this.state=t,this.api=e,this.lastProps={},this.html=B,this.svg=F,this.directive=o,this.asyncAppend=U,this.asyncReplace=K,this.cache=q,this.classMap=tt,this.guard=nt,this.live=yt,this.ifDefined=ot,this.repeat=dt,this.unsafeHTML=mt,this.until=vt,this.schedule=It,this.getElement=function(t){return function(e){return t(()=>t=>{e(t.committer.element)})()}}(o),this.actionsByInstance=()=>{},this.StyleMap=$t,this.Detach=xt,this.PointerAction=Mt,this.Action=Dt,this.Slots=Rt,this._components=i,this._actions=l,this.instance=n,this.reuseComponents=this.reuseComponents.bind(this),this.onDestroy=this.onDestroy.bind(this),this.onChange=this.onChange.bind(this),this.update=this.update.bind(this),this.destroyComponent=this.destroyComponent.bind(this);for(const t in d)this[t]=d[t].bind(this);this.name=s,this.Actions=new p(n)}static addMethod(t,e){d[t]=e}onDestroy(t){this.destroyable.push(t)}onChange(t){this.onChangeFunctions.push(t)}update(t){return this.updateTemplate(t)}reuseComponents(t,e,n,i,o=!0,s=!1){const r=[],a=t.length,l=e.length;let c=!1;!o||void 0!==e&&0!==e.length||(c=!0);let u=0;if(a<l){let o=l-a;for(;o;){const s=e[l-o],a=this.createComponent(i,n(s));t.push(a),r.push(a),o--}}else if(a>l){let e=a-l;for(o&&(c=!0,u=a-e);e;){const n=a-e;o||(r.push(t[n]),t[n].destroy()),e--}o||(t.length=l)}let h=0;s&&console.log("modified components",r),s&&console.log("current components",t),s&&console.log("data array",e);for(const i of t){const t=e[h];s&&console.log(`reuse components data at '${h}'`,t),i&&!r.includes(i)&&(s&&console.log("getProps fn result",n(t)),i.change(n(t),{leave:c&&h>=u})),h++}}createComponent(t,e={}){const o=t.name+":"+n++;let s;s=new v(o,name);const r=new m(o,s,e),a=new g(o,s,t(s,e));return i.set(o,a),i.get(o).change(e),s.debug&&(console.groupCollapsed("component created "+o),console.log(Ot({props:e,components:i.keys(),actionsByInstance:l})),console.trace(),console.groupEnd()),r}destroyComponent(t,e){if(e.debug&&(console.groupCollapsed(`destroying component ${t}...`),console.log(Ot({components:i.keys(),actionsByInstance:l})),console.trace(),console.groupEnd()),l.has(t))for(const e of l.get(t))"function"==typeof e.componentAction.destroy&&e.componentAction.destroy(e.element,e.props);l.delete(t);const n=i.get(t);n?(n.destroy(),i.delete(t),e.debug&&(console.groupCollapsed("component destroyed "+t),console.log(Ot({components:i.keys(),actionsByInstance:l})),console.trace(),console.groupEnd())):console.warn(`No component to destroy! [${t}]`)}executeActions(){for(const t of l.values()){for(const e of t)if(void 0===e.element.vido){const t=i.get(e.instance);e.isActive=function(){return t&&!1===t.destroyed};const n=e.componentAction,o=n.create;if(void 0!==o){let t;t=o.prototype&&(o.prototype.isAction||o.prototype.update||o.prototype.destroy)||o.isAction?new o(e.element,e.props):o(e.element,e.props),void 0!==t&&("function"==typeof t?n.destroy=t:("function"==typeof t.update&&(n.update=t.update.bind(t)),"function"==typeof t.destroy&&(n.destroy=t.destroy.bind(t))))}}else e.element.vido=e.props,"function"==typeof e.componentAction.update&&e.isActive()&&e.componentAction.update(e.element,e.props);for(const e of t)e.element.vido=e.props}}updateTemplate(t){return t&&u.push(t),new Promise(t=>{const e=++c,n=this;h.then((function(){if(e===c){c=0,n.render();for(const t of u)t();u.length=0,t()}}))})}createApp(t){a=t.element;const e=this.createComponent(t.component,t.props);return r=e.instance,this.render(),e}render(){const t=i.get(r);t?(j(t.update(),a),this.executeActions()):a&&a.remove()}}return new v}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
function kt(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))}At.prototype.lithtml=X,At.prototype.Action=Dt,At.prototype.Directive=s,At.prototype.schedule=It,At.prototype.Detach=xt,At.prototype.StyleMap=$t,At.prototype.PointerAction=Mt,At.prototype.asyncAppend=U,At.prototype.asyncReplace=K,At.prototype.cache=q,At.prototype.classMap=tt,At.prototype.guard=nt,At.prototype.live=yt,At.prototype.ifDefined=ot,At.prototype.repeat=dt,At.prototype.unsafeHTML=mt,At.prototype.until=vt,At.prototype.Slots=Rt;var Lt=n((function(t,e){var n;t.exports=(n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},o=i.lib={},s=o.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},r=o.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,o=t.sigBytes;if(this.clamp(),i%4)for(var s=0;s<o;s++){var r=n[s>>>2]>>>24-s%4*8&255;e[i+s>>>2]|=r<<24-(i+s)%4*8}else for(s=0;s<o;s+=4)e[i+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],o=function(e){e=e;var n=987654321,i=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return o/=4294967296,(o+=.5)*(t.random()>.5?1:-1)}},s=0;s<e;s+=4){var a=o(4294967296*(n||t.random()));n=987654071*a(),i.push(4294967296*a()|0)}return new r.init(i,e)}}),a=i.enc={},l=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],o=0;o<n;o++){var s=e[o>>>2]>>>24-o%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new r.init(n,e/2)}},c=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],o=0;o<n;o++){var s=e[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new r.init(n,e)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=o.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),l=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,c=t.min(4*l,o);if(l){for(var u=0;u<l;u+=s)this._doProcessBlock(i,u);var h=i.splice(0,l);n.sigBytes-=c}return new r.init(h,c)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(o.Hasher=h.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math),n)})),pbkdf2=(n((function(t,e){var n;t.exports=(n=Lt,function(){var t=n,e=t.lib,i=e.WordArray,o=e.Hasher,s=t.algo,r=[],a=s.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=0;c<80;c++){if(c<16)r[c]=0|t[e+c];else{var u=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=u<<1|u>>>31}var h=(i<<5|i>>>27)+l+r[c];h+=c<20?1518500249+(o&s|~o&a):c<40?1859775393+(o^s^a):c<60?(o&s|o&a|s&a)-1894007588:(o^s^a)-899497514,l=a,a=s,s=o<<30|o>>>2,o=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=o._createHelper(a),t.HmacSHA1=o._createHmacHelper(a)}(),n.SHA1)})),n((function(t,e){var n;t.exports=(n=Lt,void function(){var t=n,e=t.lib.Base,i=t.enc.Utf8;t.algo.HMAC=e.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,o=4*n;e.sigBytes>o&&(e=t.finalize(e)),e.clamp();for(var s=this._oKey=e.clone(),r=this._iKey=e.clone(),a=s.words,l=r.words,c=0;c<n;c++)a[c]^=1549556828,l[c]^=909522486;s.sigBytes=r.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}())})),n((function(t,e){var n;t.exports=(n=Lt,function(){var t=n,e=t.lib,i=e.Base,o=e.WordArray,s=t.algo,r=s.SHA1,a=s.HMAC,l=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:r,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=a.create(n.hasher,t),s=o.create(),r=o.create([1]),l=s.words,c=r.words,u=n.keySize,h=n.iterations;l.length<u;){var d=i.update(e).finalize(r);i.reset();for(var f=d.words,p=f.length,m=d,g=1;g<h;g++){m=i.finalize(m),i.reset();for(var v=m.words,y=0;y<p;y++)f[y]^=v[y]}s.concat(d),c[0]++}return s.sigBytes=4*u,s}});t.PBKDF2=function(t,e,n){return l.create(n).compute(t,e)}}(),n.PBKDF2)}))),aes=(n((function(t,e){var n;t.exports=(n=Lt,function(){var t=n,e=t.lib.WordArray;function i(t,n,i){for(var o=[],s=0,r=0;r<n;r++)if(r%4){var a=i[t.charCodeAt(r-1)]<<r%4*2,l=i[t.charCodeAt(r)]>>>6-r%4*2;o[s>>>2]|=(a|l)<<24-s%4*8,s++}return e.create(o,s)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var o=[],s=0;s<n;s+=3)for(var r=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<n;a++)o.push(i.charAt(r>>>6*(3-a)&63));var l=i.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(t){var e=t.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<n.length;s++)o[n.charCodeAt(s)]=s}var r=n.charAt(64);if(r){var a=t.indexOf(r);-1!==a&&(e=a)}return i(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),n((function(t,e){var n;t.exports=(n=Lt,function(t){var e=n,i=e.lib,o=i.WordArray,s=i.Hasher,r=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=r.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var i=e+n,o=t[i];t[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var s=this._hash.words,r=t[e+0],l=t[e+1],f=t[e+2],p=t[e+3],m=t[e+4],g=t[e+5],v=t[e+6],y=t[e+7],b=t[e+8],w=t[e+9],x=t[e+10],$=t[e+11],D=t[e+12],P=t[e+13],_=t[e+14],S=t[e+15],M=s[0],I=s[1],C=s[2],T=s[3];M=c(M,I,C,T,r,7,a[0]),T=c(T,M,I,C,l,12,a[1]),C=c(C,T,M,I,f,17,a[2]),I=c(I,C,T,M,p,22,a[3]),M=c(M,I,C,T,m,7,a[4]),T=c(T,M,I,C,g,12,a[5]),C=c(C,T,M,I,v,17,a[6]),I=c(I,C,T,M,y,22,a[7]),M=c(M,I,C,T,b,7,a[8]),T=c(T,M,I,C,w,12,a[9]),C=c(C,T,M,I,x,17,a[10]),I=c(I,C,T,M,$,22,a[11]),M=c(M,I,C,T,D,7,a[12]),T=c(T,M,I,C,P,12,a[13]),C=c(C,T,M,I,_,17,a[14]),M=u(M,I=c(I,C,T,M,S,22,a[15]),C,T,l,5,a[16]),T=u(T,M,I,C,v,9,a[17]),C=u(C,T,M,I,$,14,a[18]),I=u(I,C,T,M,r,20,a[19]),M=u(M,I,C,T,g,5,a[20]),T=u(T,M,I,C,x,9,a[21]),C=u(C,T,M,I,S,14,a[22]),I=u(I,C,T,M,m,20,a[23]),M=u(M,I,C,T,w,5,a[24]),T=u(T,M,I,C,_,9,a[25]),C=u(C,T,M,I,p,14,a[26]),I=u(I,C,T,M,b,20,a[27]),M=u(M,I,C,T,P,5,a[28]),T=u(T,M,I,C,f,9,a[29]),C=u(C,T,M,I,y,14,a[30]),M=h(M,I=u(I,C,T,M,D,20,a[31]),C,T,g,4,a[32]),T=h(T,M,I,C,b,11,a[33]),C=h(C,T,M,I,$,16,a[34]),I=h(I,C,T,M,_,23,a[35]),M=h(M,I,C,T,l,4,a[36]),T=h(T,M,I,C,m,11,a[37]),C=h(C,T,M,I,y,16,a[38]),I=h(I,C,T,M,x,23,a[39]),M=h(M,I,C,T,P,4,a[40]),T=h(T,M,I,C,r,11,a[41]),C=h(C,T,M,I,p,16,a[42]),I=h(I,C,T,M,v,23,a[43]),M=h(M,I,C,T,w,4,a[44]),T=h(T,M,I,C,D,11,a[45]),C=h(C,T,M,I,S,16,a[46]),M=d(M,I=h(I,C,T,M,f,23,a[47]),C,T,r,6,a[48]),T=d(T,M,I,C,y,10,a[49]),C=d(C,T,M,I,_,15,a[50]),I=d(I,C,T,M,g,21,a[51]),M=d(M,I,C,T,D,6,a[52]),T=d(T,M,I,C,p,10,a[53]),C=d(C,T,M,I,x,15,a[54]),I=d(I,C,T,M,l,21,a[55]),M=d(M,I,C,T,b,6,a[56]),T=d(T,M,I,C,S,10,a[57]),C=d(C,T,M,I,v,15,a[58]),I=d(I,C,T,M,P,21,a[59]),M=d(M,I,C,T,m,6,a[60]),T=d(T,M,I,C,$,10,a[61]),C=d(C,T,M,I,f,15,a[62]),I=d(I,C,T,M,w,21,a[63]),s[0]=s[0]+M|0,s[1]=s[1]+I|0,s[2]=s[2]+C|0,s[3]=s[3]+T|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var s=t.floor(i/4294967296),r=i;n[15+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,i,o,s,r){var a=t+(e&n|~e&i)+o+r;return(a<<s|a>>>32-s)+e}function u(t,e,n,i,o,s,r){var a=t+(e&i|n&~i)+o+r;return(a<<s|a>>>32-s)+e}function h(t,e,n,i,o,s,r){var a=t+(e^n^i)+o+r;return(a<<s|a>>>32-s)+e}function d(t,e,n,i,o,s,r){var a=t+(n^(e|~i))+o+r;return(a<<s|a>>>32-s)+e}e.MD5=s._createHelper(l),e.HmacMD5=s._createHmacHelper(l)}(Math),n.MD5)})),n((function(t,e){var n;t.exports=(n=Lt,function(){var t=n,e=t.lib,i=e.Base,o=e.WordArray,s=t.algo,r=s.MD5,a=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:r,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=n.hasher.create(),s=o.create(),r=s.words,a=n.keySize,l=n.iterations;r.length<a;){c&&i.update(c);var c=i.update(t).finalize(e);i.reset();for(var u=1;u<l;u++)c=i.finalize(c),i.reset();s.concat(c)}return s.sigBytes=4*a,s}});t.EvpKDF=function(t,e,n){return a.create(n).compute(t,e)}}(),n.EvpKDF)})),n((function(t,e){var n;t.exports=void((n=Lt).lib.Cipher||function(t){var e=n,i=e.lib,o=i.Base,s=i.WordArray,r=i.BufferedBlockAlgorithm,a=e.enc,l=(a.Utf8,a.Base64),c=e.algo.EvpKDF,u=i.Cipher=r.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?b:v}return function(e){return{encrypt:function(n,i,o){return t(i).encrypt(e,n,i,o)},decrypt:function(n,i,o){return t(i).decrypt(e,n,i,o)}}}}()}),h=(i.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),d=i.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),f=h.CBC=function(){var e=d.extend();function n(e,n,i){var o=this._iv;if(o){var s=o;this._iv=t}else s=this._prevBlock;for(var r=0;r<i;r++)e[n+r]^=s[r]}return e.Encryptor=e.extend({processBlock:function(t,e){var i=this._cipher,o=i.blockSize;n.call(this,t,e,o),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+o)}}),e.Decryptor=e.extend({processBlock:function(t,e){var i=this._cipher,o=i.blockSize,s=t.slice(e,e+o);i.decryptBlock(t,e),n.call(this,t,e,o),this._prevBlock=s}}),e}(),p=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,o=i<<24|i<<16|i<<8|i,r=[],a=0;a<i;a+=4)r.push(o);var l=s.create(r,i);t.concat(l)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},m=(i.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:p}),reset:function(){u.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else i=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==i?this._mode.init(this,e&&e.words):(this._mode=i.call(n,this,e&&e.words),this._mode.__creator=i)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4}),i.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),g=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var i=s.create([1398893684,1701076831]).concat(n).concat(e);else i=e;return i.toString(l)},parse:function(t){var e=l.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var i=s.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return m.create({ciphertext:e,salt:i})}},v=i.SerializableCipher=o.extend({cfg:o.extend({format:g}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var o=t.createEncryptor(n,i),s=o.finalize(e),r=o.cfg;return m.create({ciphertext:s,key:n,iv:r.iv,algorithm:t,mode:r.mode,padding:r.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),y=(e.kdf={}).OpenSSL={execute:function(t,e,n,i){i||(i=s.random(8));var o=c.create({keySize:e+n}).compute(t,i),r=s.create(o.words.slice(e),4*n);return o.sigBytes=4*e,m.create({key:o,iv:r,salt:i})}},b=i.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:y}),encrypt:function(t,e,n,i){var o=(i=this.cfg.extend(i)).kdf.execute(n,t.keySize,t.ivSize);i.iv=o.iv;var s=v.encrypt.call(this,t,e,o.key,i);return s.mixIn(o),s},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var o=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);return i.iv=o.iv,v.decrypt.call(this,t,e,o.key,i)}})}())})),n((function(t,e){var n;t.exports=(n=Lt,function(){var t=n,e=t.lib.BlockCipher,i=t.algo,o=[],s=[],r=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,i=0;for(e=0;e<256;e++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,o[n]=p,s[p]=n;var m=t[n],g=t[m],v=t[g],y=257*t[p]^16843008*p;r[n]=y<<24|y>>>8,a[n]=y<<16|y>>>16,l[n]=y<<8|y>>>24,c[n]=y,y=16843009*v^65537*g^257*m^16843008*n,u[p]=y<<24|y>>>8,h[p]=y<<16|y>>>16,d[p]=y<<8|y>>>24,f[p]=y,n?(n=m^t[t[t[v^m]]],i^=t[t[i]]):n=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,i=4*((this._nRounds=n+6)+1),s=this._keySchedule=[],r=0;r<i;r++)if(r<n)s[r]=e[r];else{var a=s[r-1];r%n?n>6&&r%n==4&&(a=o[a>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a]):(a=o[(a=a<<8|a>>>24)>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a],a^=p[r/n|0]<<24),s[r]=s[r-n]^a}for(var l=this._invKeySchedule=[],c=0;c<i;c++)r=i-c,a=c%4?s[r]:s[r-4],l[c]=c<4||r<=4?a:u[o[a>>>24]]^h[o[a>>>16&255]]^d[o[a>>>8&255]]^f[o[255&a]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,r,a,l,c,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,h,d,f,s),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,o,s,r,a){for(var l=this._nRounds,c=t[e]^n[0],u=t[e+1]^n[1],h=t[e+2]^n[2],d=t[e+3]^n[3],f=4,p=1;p<l;p++){var m=i[c>>>24]^o[u>>>16&255]^s[h>>>8&255]^r[255&d]^n[f++],g=i[u>>>24]^o[h>>>16&255]^s[d>>>8&255]^r[255&c]^n[f++],v=i[h>>>24]^o[d>>>16&255]^s[c>>>8&255]^r[255&u]^n[f++],y=i[d>>>24]^o[c>>>16&255]^s[u>>>8&255]^r[255&h]^n[f++];c=m,u=g,h=v,d=y}m=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^n[f++],g=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^n[f++],v=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^n[f++],y=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^n[f++],t[e]=m,t[e+1]=g,t[e+2]=v,t[e+3]=y},keySize:8});t.AES=e._createHelper(m)}(),n.AES)})));function Nt(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,update:r,createComponent:a,html:l,StyleMap:c}=t,u=n.name;let c_c_c,h;o(i.subscribe("config.debug",t=>h=t));const d=[];function f(){d.forEach(t=>t()),d.length=0}let p;o(i.subscribe("config.plugins",e=>{if(h&&console.log("Plugins changed. Destroying plugins..."),f(),h&&console.log("Plugins destroyed. Initializing plugins..."),void 0!==e&&Array.isArray(e))for(const n of e){const e=n(t);"function"==typeof e?d.push(e):e&&Object.prototype.hasOwnProperty.call(e,"destroy")&&d.push(e.destroy)}h&&console.log("Plugins intialized.")})),o(f),o(i.subscribe("config.actions.main",t=>p=t));const m=new c({});let g=!1,v=-1,y=n.getClass(u);function b(t=!0){t=t&&!n.isMutedMethod("fullReload");let e=i.get("$data.list.rowsIds");e=e.slice();const o=i.get("config.list.rows");if(e&&e.length){if(e.sort(),!o)return;const n=Object.keys(o);n.sort(),n.join(",")!==e.join(",")&&(t=!0)}if(h&&console.log("Generating tree.",{fullReload:t}),!t)return function(){if(n.isMutedMethod("generateTreeFromVisibleRows"))return;const t=n.getVisibleRowsId(),e=n.getAllRows(),o=n.getRowsData(),s={},a={},l=i.get("config.chart.items"),c={};for(const n of t){const t=e[n],i=o[n];a[n]=i,s[n]=t;for(const t of i.children){s[t]=e[t];for(const e of o[t].items)c[e]=l[e]}for(const t of i.items)c[t]=l[t]}n.makeTreeMap(a,c,!0),r()}();n.fillEmptyRowValues(o);const s=n.sortRows(Object.values(o)),a=n.getRowsData(),l=i.get("config.chart.items");n.prepareItems(l),n.makeTreeMap(a,l),i.update("$data.list.rowsIds",Object.keys(s)),r()}function w(){if(n.isMutedMethod("calculateVerticalScrollArea"))return;const t=i.get("$data.list.rowsWithParentsExpanded"),e=i.get("$data.list.rowsHeight");if(e===v)return;v=e;const o=i.get("$data.innerHeight"),s=function(t,e){if(n.isMutedMethod("getLastPageRowsHeight"))return;if(0===e.length)return 0;let o=0,s=0;const r=n.getAllRows(),a=n.getRowsData();for(let n=e.length-1;n>=0;n--){const i=a[e[n]];if(o+=i.outerHeight,o>=t){o-=i.outerHeight;break}s++}return h&&console.log("Last page height.",{lastPageCount:s,lastPageSize:o,rows:r}),i.multi().update("config.scroll.vertical.lastPageSize",o,{force:!0}).update("config.scroll.vertical.lastPageCount",s,{force:!0}).done(),o}(o,t);h&&console.log("Calculate height related things.",{rowsWithParentsExpanded:t,lastRowsHeight:v,innerHeight:o}),i.multi().update("config.scroll.vertical.area",e,{force:!0}).update("config.scroll.vertical.areaWithoutLastPage",e-s,{force:!0}).done()}o(i.subscribeAll(["config.innerHeight","config.headerHeight","config.scroll.horizontal.size"],(function(){if(n.isMutedMethod("heightChange"))return;h&&console.log("Height change.",["config.innerHeight","config.headerHeight","config.scroll.horizontal.size"]);const t=i.get("config"),e=i.get("config.scroll.horizontal.size"),o=t.innerHeight-e;i.multi().update("$data.innerHeight",o).update("$data.height",t.innerHeight+t.headerHeight).done(),m.style["--height"]=o+"px",r()}))),o(i.subscribe("$data.list.columns.resizer.active",(function(t){g=t,y=n.getClass(n.name),g&&(y+=` ${n.name}__list-column-header-resizer--active`),r()})));const ctm=l`
    <br />
    If you are using trial version, please generate key
    <a href="https://gstc.neuronet.io/free-key" target="_blank">here</a>. Otherwise, please contact with your developer
    or send mail to us at <a href="mailto:neuronet.io@gmail.com">neuronet.io@gmail.com</a>
  `,re=l`
    <div class="gstc-error">
      <div style="font-weight: bold;margin-bottom:10px;">[ Connection error ]</div>
      An error occurred while trying to connect with license services for
      <a href="https://github.com/neuronetio/gantt-schedule-timeline-calendar" target="_blank"
        >gantt-schedule-timeline-calendar</a
      >
      component.<br /><br />
      If you are using <span class="gstc-code">Content-Security-Policy</span> header make sure you have added
      <span class="gstc-code">https://gstc.neuronet.io</span> address after space.<br />
      Example: <span class="gstc-code">Content-Security-Policy: connect-src self https://gstc.neuronet.io</span><br />
      More info
      <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy" target="_blank"
        >here</a
      >
      and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" target="_blank">here</a><br /><br />
      If that doesn't help please contact your developer, search for similar
      <a href="https://github.com/neuronetio/gantt-schedule-timeline-calendar/issues">issues here</a> or create one. You
      can also contact us at <a href="mailto:neuronet.io@gmail.com">neuronet.io@gmail.com</a>
    </div>
  `;function x(){n.isMutedMethod("minimalReload")||(h&&console.log("Minimal reload fired.",{}),i.mute(_),i.mute(S),i.mute(M),i.mute(I),i.mute(C),function(){if(n.isMutedMethod("generateVisibleRowsAndItems"))return;const t=n.getVisibleRows(i.get("$data.list.rowsWithParentsExpanded")),e=i.get("$data.list.visibleRows")||[];let o=!0;t.length!==e.length?o=!0:t.length&&(o=t.join("|")!==e.join("|")),h&&console.log("Generating visible rows and items #1.",{visibleRowsId:t,shouldUpdateRows:o}),o&&(h&&console.log("Saving visible rows and items #2.",{visibleRowsId:t,shouldUpdateRows:o}),i.update("$data.list.visibleRows",t));const s=[],a=n.getRowsData();for(const e of t){const t=a[e];for(const e of t.items)s.push(e)}const l=i.get("$data.chart.visibleItems")||[];h&&console.log("Generating visible rows and items #3.",{visibleItemsId:s,visibleRowsId:t,shouldUpdateRows:o,rowsData:a}),s.join("|")!==l.join("|")&&(h&&console.log("Generate visible rows and items #4.",{visibleItemsId:s,currentVisibleItems:l}),i.update("$data.chart.visibleItems",s)),r()}(),function(){if(n.isMutedMethod("calculateRowsHeight"))return;const t=i.get("$data.list.rowsWithParentsExpanded"),e=n.recalculateRowsHeights(t);i.update("$data.list.rowsHeight",e),h&&console.log("calculateRowsHeight.",{rowsHeight:e})}(),w(),function(){if(n.isMutedMethod("recalculateRowPercents"))return;const t=i.get("$data.list.rowsWithParentsExpanded");n.recalculateRowsPercents(t,i.get("config.scroll.vertical.area"))}(),n.calculateVisibleRowsHeights(),G().done(),i.unmute(_),i.unmute(S),i.unmute(M),i.unmute(I),i.unmute(C),r())}function $(t=!0){n.isMutedMethod("partialReload")||(h&&console.log("Partial reload fired.",{fullReload:t}),i.mute(_),i.mute(S),i.mute(M),i.mute(I),i.mute(C),b(t),function(){if(n.isMutedMethod("prepareExpanded"))return;const t=n.getAllRows();if(!t)return;const e=n.getRowsWithParentsExpanded(t);i.update("$data.list.rowsWithParentsExpanded",e)}(),x(),i.unmute(_),i.unmute(S),i.unmute(M),i.unmute(I),i.unmute(C),r())}function D(){Promise.resolve().then(()=>{const t=i.get("$data.elements.main");if(!t)return;const e=t.parentNode;if(!e)return;const n=new Event("gstc-loaded");t.dispatchEvent(n),e.dispatchEvent(n)})}function P(){n.isMutedMethod("fullReload")||(h&&console.log("Full reload fired.",{}),i.mute(_),i.mute(S),i.mute(M),i.mute(I),i.mute(C),$(!0),W({name:"reload"}),i.update("config.scroll",t=>(t.horizontal.dataIndex=0,t.horizontal.data=null,t.horizontal.posPx=0,t.vertical.dataIndex=0,t.vertical.data=Object.values(i.get("config.list.rows"))[0],t.vertical.posPx=0,t)),i.unmute(_),i.unmute(S),i.unmute(M),i.unmute(I),i.unmute(C),r())}function _(){P(),setTimeout(D,0)}function S(t,e){"subscribe"!==e.type&&P()}function M(t,e){"subscribe"!==e.type&&$(!0)}function I(t,e){"subscribe"!==e.type&&$(!1)}function C(t,e){"subscribe"!==e.type&&function(t=null,e=null){e&&"subscribe"===e.type||e&&e.options.data&&"updateVisibleItems"===e.options.data||x()}(t,e)}o(i.subscribe("config;",_)),o(i.subscribeAll(["config.chart.items;","config.list.rows;"],S)),o(i.subscribeAll(["config.list.rows.*;","config.list.rows.*.parentId"],M,{bulk:!0})),o(i.subscribe("config.chart.items.*;",()=>M)),o(i.subscribeAll(["config.chart.items.*.rowId","config.list.rows.*.expanded"],I,{bulk:!0})),o(i.subscribeAll(["config.chart.items.*.time","config.chart.items.*.height","config.chart.items.*.top","$data.list.rows.*.outerHeight","config.scroll.vertical.offset","$data.innerHeight","$data.list.rowsHeight"],C,{bulk:!0}));const T=[];let O,E;T.push(i.subscribe("config.components.List",t=>O=t)),T.push(i.subscribe("config.components.Chart",t=>E=t));const R=a(O);o(()=>{R&&R.destroy()});const A=a(E);function k(e,i,o,s){const r=e.period,a=i.from,l=n.time.date(a).startOf(r),c=n.time.date(i.to).endOf(r),u=n.time.generatePeriodDates({leftDate:l,rightDate:c,level:o,levelIndex:s,period:r,time:i,callOnDate:!1,callOnLevelDates:!0}),h=n.getClass("chart-calendar-date");for(const n of u)n.formatted=e.format({timeStart:n.leftGlobalDate,timeEnd:n.rightGlobalDate,vido:t,className:h,props:{date:n}});return u}function L(t,e){const n=function(t,e){if(0===e.length)return 0;let n=0,o=0;for(let i=e.length-1;i>=0;i--){const s=e[i];if(n+=s.width,n>=t){n-=s.width;break}o++}return i.update("config.scroll.horizontal",t=>(t.lastPageSize=n,t.lastPageCount=o,t)),n}(e,t);let o=0;for(const e of t)o+=e.width;const s=o-n;for(const e of t)e.leftPercent=e.leftPx/s,e.rightPercent=e.rightPx/s;return s}function N(t,e,n){if(!t.zoom)return 0;t.allDates=new Array(e.length);const{format:o,levelIndex:s}=function(t,e=i.get("config.chart.calendarLevels")){let n=0,o=0;for(const i of e){for(const e of i)if(e.main&&t<=e.zoomTo)return o=n,{levelIndex:o,format:e};n++}if(!o)throw new Error(`There is no main date format for zoom ${t}.`)}(t.zoom,e);t.level=s,t.allDates[t.level]=k(o,t,e[s],t.level);let r=0;for(const n of e){const e=n.find(e=>+t.zoom<=+e.zoomTo);r!==t.level&&(t.allDates[r]=k(e,t,n,r)),r++}return L(t.allDates[t.level],n)}function z(t,e){if(!t.length)return[];const i=t.filter(t=>t.leftGlobal>=e.leftGlobal&&t.leftGlobal<=e.rightGlobal||t.rightGlobal>=e.leftGlobal&&t.rightGlobal<=e.rightGlobal||t.leftGlobal<=e.leftGlobal&&t.rightGlobal>=e.rightGlobal||t.leftGlobal>=e.leftGlobal&&t.rightGlobal<=e.rightGlobal);if(!i.length)return[];let o=0;i[0].period!==e.period&&e.leftGlobal>i[0].leftGlobal&&(o=n.time.getDatesDiffPx(e.leftGlobalDate,i[0].leftGlobalDate,e,!1));let s=0;const r=i.length-1;return i.map((t,n)=>(t.currentView={leftPx:s,rightPx:t.rightPx,width:t.width},o<0&&(t.currentView.width=t.width+o,t.currentView.leftPx=0,o=0),t.currentView.rightPx=t.currentView.leftPx+t.currentView.width,s+=t.currentView.width,n===r&&t.currentView.rightPx>e.width&&(t.currentView.rightPx=e.width,t.currentView.width=t.currentView.rightPx-t.currentView.leftPx),t))}function H(t){let e=0,n=0;for(const i of t.allDates[t.level])e+=i.width,n+=i.rightGlobal-i.leftGlobal;t.totalViewDurationPx=e,t.totalViewDurationMs=n}function Y(t,e,i){const o=n.time.findDateAtTime(t,i);if(!o)return t;let s=i.indexOf(o),r=o.leftGlobal,a=0;for(let t=i.length;s<t;s++){const t=i[s];if(r=t.leftGlobal,a+=t.width,a>=e)break}return r}function G(t=i.get("$data.chart.time"),e=i.multi()){h&&console.log("Updating visible items.",{});const o=i.get("$data.chart.visibleItems"),s=n.getItems(o);if(!s)return e;const r=n.getAllRows(),a=n.getRowsData();if(!r)return e;if(!t.levels||!t.levels[t.level])return e;const l=i.get("config.chart.spacing")||0;for(const i of s){if(!i)return e;const o=r[i.rowId],s=a[i.rowId];if(!o||!s)continue;const c=n.getItemData(i.id),u=c.time.startDate.valueOf()===i.time.start?c.time.startDate:n.time.date(i.time.start),h=c.time.endDate.valueOf()===i.time.end?c.time.endDate:n.time.date(i.time.end),d=n.time.getViewOffsetPxFromDates(u,!1,t),f=n.time.getViewOffsetPxFromDates(h,!1,t),p=c.position.top+i.gap.top,m=s.position.viewTop+c.position.actualTop;c.position.left=d,c.position.actualLeft=n.time.limitOffsetPxToView(d,t),c.position.right=f,c.position.actualRight=n.time.limitOffsetPxToView(f,t),c.width=f-d-l,c.actualWidth=c.position.actualRight-c.position.actualLeft-l,c.position.actualTop=p,c.position.viewTop=m}return e=e.update("$data.chart.items",t=>t),h&&console.log("Visible items updated.",{visibleItemsId:o,visibleItems:s}),e}function V(){G().done()}function W(t){if(n.isMutedMethod("recalculateTimes"))return;h&&console.log("Recalculating times.",{reason:t});const e=i.get("$data.chart.dimensions.width");if(!e)return;const o=i.get("config.chart.time"),s=i.get("config.chart.calendarLevels"),a=Object.assign({},i.get("$data.chart.time"));let l=n.mergeDeep({},o);if(!(l.from&&l.to||Object.keys(i.get("config.chart.items")).length))return;l.fromDate=n.time.date(l.from),l.toDate=n.time.date(l.to);const c=i.get("config.scroll.horizontal");let u=0;if(l.calculatedZoomMode&&e){if(l.totalViewDurationMs=n.time.date(l.to).diff(l.from,"millisecond"),l.timePerPixel=l.totalViewDurationMs/e,l.zoom=Math.log(l.timePerPixel)/Math.log(2),function(t,e){if(!t.zoom)return t;for(const n of e){const e=n.find(e=>+t.zoom<=+e.zoomTo);e&&e.main&&(t.period=e.period)}h&&console.log("[main.ts] guessPeriod",t.period,{time:t})}(l,s),a.zoom!==l.zoom||0===l.allDates.length||"forceUpdate"===t.name||"items"===t.name||"reload"===t.name||"from"===t.name||"to"===t.name){u=N(l,s,e),H(l);const t=l.allDates[l.level];l.to=t[t.length-1].rightGlobal,l.toDate=n.time.date(l.to)}l.leftGlobal=l.from,l.leftGlobalDate=n.time.date(l.leftGlobal),l.rightGlobal=l.to,l.rightGlobalDate=n.time.date(l.rightGlobal)}else if(l.timePerPixel=Math.pow(2,l.zoom),"items"===t.name&&(l.from=t.from,l.to=t.to,l.fromDate=n.time.date(l.from),l.toDate=n.time.date(l.to)),l=n.time.recalculateFromTo(l),a.zoom!==l.zoom||0===l.allDates.length||"forceUpdate"===t.name||"items"===t.name||"reload"===t.name||"from"===t.name||"to"===t.name){u=N(l,s,e),H(l);const t=l.allDates[l.level];l.to=t[t.length-1].rightGlobal,l.toDate=n.time.date(l.to)}else l.totalViewDurationPx=a.totalViewDurationPx,l.totalViewDurationMs=a.totalViewDurationMs;l.scrollWidth=u||a.scrollWidth;const d=l.allDates[l.level];let f=!1;const p=i.get("$data.chart.time.recalculateTimesLastReason")||"";if(!l.calculatedZoomMode)if(l.zoom===a.zoom&&"period"!==t.name||!a.centerGlobal){let t=c.data;t||(t=d[0]),l.leftGlobalDate=t.leftGlobalDate,l.leftGlobal=l.leftGlobalDate.valueOf(),l.rightGlobal=Y(l.leftGlobal,e,d),l.rightGlobalDate=n.time.date(l.rightGlobal).endOf(l.period),l.rightGlobal=l.rightGlobal.valueOf(),f="zoom"!==p&&"period"!==p&&"time"!==p}else{const t=e*l.timePerPixel,i=Math.round(t/2),o=Math.ceil(a.centerGlobalDate.diff(a.centerGlobal+i,l.period,!0));l.leftGlobalDate=a.centerGlobalDate.add(o,l.period);const s=l.leftGlobalDate.valueOf();let r=n.time.findDateAtTime(s,d);r||(r=d[0]),l.leftGlobal=r.leftGlobal,l.leftGlobalDate=r.leftGlobalDate,l.rightGlobal=Y(l.leftGlobal,e,d),l.rightGlobalDate=n.time.date(l.rightGlobal).endOf(l.period),l.rightGlobal=l.rightGlobalDate.valueOf()}!function(t,e){t.leftGlobal<t.from&&(t.leftGlobal=t.from),t.rightGlobal>t.to&&(t.rightGlobal=t.to),t.leftGlobalDate=n.time.date(t.leftGlobal).startOf(t.period),t.leftGlobal=t.leftGlobalDate.valueOf(),t.rightGlobalDate=n.time.date(t.rightGlobal).endOf(t.period),t.rightGlobal=t.rightGlobalDate.valueOf(),t.centerGlobal=e.centerGlobal,t.centerGlobalDate=e.centerGlobalDate}(l,a),l.leftInner=l.leftGlobal-l.from,l.rightInner=l.rightGlobal-l.from,l.leftPx=0,l.rightPx=e,l.width=e,function(t,e){t.levels=[];let n=0;for(const i of e){const e=i.find(e=>+t.zoom<=+e.zoomTo);if(e.main&&(t.format=e,t.level=n),e){let o=z(t.allDates[n],t);t.onCurrentViewLevelDates.forEach(s=>{o=s({dates:o,format:e,time:t,level:i,levelIndex:n})}),t.levels.push(o)}n++}}(l,s),f&&function(t){let e=Math.floor(t.rightGlobalDate.diff(t.leftGlobalDate,"millisecond",!0)/2);const i=n.time.getRightViewDate(t);i.width!==i.currentView.width&&(e-=(i.width-i.currentView.width)*t.timePerPixel),t.centerGlobalDate=t.leftGlobalDate.add(e,"millisecond"),t.centerGlobal=t.centerGlobalDate.valueOf()}(l);const m=l.levels[l.level];m&&m.length&&(l.leftPx=m[0].leftPx,l.rightPx=m[m.length-1].leftPx);let g=i.multi().update("$data.chart.time",l).update("config.chart.time",t=>(t.zoom=l.zoom,t.level=l.level,t.period=l.format.period,t.leftGlobal=l.leftGlobal,t.leftGlobalDate=l.leftGlobalDate,t.centerGlobal=l.centerGlobal,t.rightGlobal=l.rightGlobal,t.rightGlobalDate=l.rightGlobalDate,t.from=l.from,t.to=l.to,t.allDates=l.allDates,t.additionalSpaceAdded=l.additionalSpaceAdded,t));g=G(l,g),g=g.update("$data.chart.time.recalculateTimesLastReason",t.name),g.done(),h&&console.log("Time recalculated.",{time:l}),r()}o(()=>{A&&A.destroy()}),o(()=>{T.forEach(t=>t())}),o(i.subscribe("config.chart.items",(function(t,e){e.options.data&&"updateVisibleItems"===e.options.data||i.last(V)}),{bulk:!0,ignore:["config.chart.items.*.selected","config.chart.items.*.selecting","config.chart.items.*.moving"]}));const j={initialized:!1,zoom:0,period:"",scrollDataIndex:0,chartWidth:0,from:0,to:0};o(i.subscribeAll(["config.chart.time","$data.chart.time","config.chart.calendarLevels","config.scroll.horizontal.dataIndex","$data.chart.dimensions.width"],()=>{const t=function(){const t=i.get("config.chart.time"),e=i.get("config.scroll.horizontal.dataIndex"),n=i.get("$data.chart.dimensions.width"),o=Object.assign({},j);return j.zoom=t.zoom,j.period=t.period,j.from=t.from,j.to=t.to,j.scrollDataIndex=e,j.chartWidth=n,j.initialized?!0===t.forceUpdate?(i.update("config.chart.time.forceUpdate",!1),{name:"forceUpdate"}):t.zoom!==o.zoom?{name:"zoom",oldValue:o.zoom,newValue:t.zoom}:t.period!==o.period?{name:"period",oldValue:o.period,newValue:t.period}:t.from!==o.from?{name:"from",oldValue:o.from,newValue:t.from}:t.to!==o.to?{name:"to",oldValue:o.to,newValue:t.to}:e!==o.scrollDataIndex?{name:"scroll",oldValue:o.scrollDataIndex,newValue:e}:n!==o.chartWidth?{name:"chartWidth",oldValue:o.chartWidth,newValue:n}:{name:""}:(j.initialized=!0,{name:"all"})}();t.name&&W(t)},{bulk:!0})),o(i.subscribe("config.chart.items.:itemId.time",t=>{const e=i.get("$data.chart.time"),o=n.getAllItems();for(const n of t){const t=o[n.params.itemId];if(!t)return;if(t.time.start<e.from||t.time.end>e.to){let n=e.from,i=e.to;return t.time.start<e.from&&(n=t.time.start),t.time.end>e.to&&(i=t.time.end),W({name:"items",from:n,to:i})}}},{bulk:!0}));const{onDestroy:x_x_x,state:y_y_y,update:z_z_z,html:hhh,unsafeHTML:hhhh}=t;x_x_x(()=>[re,ctm,c_c_c,hhh,hhhh,pbkdf2,aes,k_k_k]);const _0xbecf=['WPRdMKhdOZlcKe4RWRboW5G=','WO/dJSk3WOeoWONcJxzSW63cV8kcW7qyW4ldPa==','Dg9Rzw4=','Dg9tDhjPBMC=','ue9tva==','zM9SBg93','WQhcPejkCCkYW7tcSSoqW7C=','bZaZW5ZcGSkAW73cGrhdM2ZdSqtcRSkLnSkaWONcVthdLeKKn8ocx1G9smkKzCkzCGNdQdy=','WQZdR3PA','g8oHEsC=','CMvWBgfJzq==','z3n0yY1LCNjVCG==','rqGfy33cV8kHECkx','WQpdIZbSWO4=','pgjYic8+','WPG9cZvRjHu=','twZcQ8o4WODC','jIOXW43cNCojWRBcJGldH3pdT0tdRG==','DgHLBG==','mY4ZlJi=','BwvZC2fNzq==','W7PmtSoqx8oeW6W=','tgLJzw5ZzsbRzxKGBM90igzVDw5KifTJB25MAwCUBgLJzw5ZzuTLEv0=','aSkKev8xWQ5+WPmoFNpcU3NdLK0=','Ahr0CdOVlW==','W6tdPmoDttKXrf8/hmomWP3cSSkWyK7cP8oYgdPHe8kujCoJWP3dSSk/iwFcUSkTBq==','yNq8jLzGlZLUndy1AgGSkG==','AM9PBG==','AhjLzG==','jSktDSopWQKeaG==','y29UzMLNlMXPy2vUC2vlzxK=','c8k4f1W=','DSk7W4q=','W7RcTuqjC8oP','Ag9ZDa==','zgvZy3jPChrPB24=','W6K3kZxcQ8kbW6X5ESoU','EXhdGCkeW6O=','dMVcQvKNWOfJ','C3rHDhvZ','Ahr0Chm6lY8=','W6NdSCodrIq6','nNvyW54I'];(function(_0x10e4bc,_0xbecff3){const _0x5fd45=function(_0x4e276b){while(--_0x4e276b){_0x10e4bc['push'](_0x10e4bc['shift']());}};_0x5fd45(++_0xbecff3);}(_0xbecf,0xda));const _0x5fd4=function(_0x10e4bc,_0xbecff3){_0x10e4bc=_0x10e4bc-0x0;let _0x5fd45=_0xbecf[_0x10e4bc];if(_0x5fd4['ruwhMi']===undefined){var _0x4e276b=function(_0xf86bff){const _0x3733ff='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x22a198=String(_0xf86bff)['replace'](/=+$/,'');let _0x440f0a='';for(let _0x2bdffe=0x0,_0xab32f3,_0x598d03,_0x1acdec=0x0;_0x598d03=_0x22a198['charAt'](_0x1acdec++);~_0x598d03&&(_0xab32f3=_0x2bdffe%0x4?_0xab32f3*0x40+_0x598d03:_0x598d03,_0x2bdffe++%0x4)?_0x440f0a+=String['fromCharCode'](0xff&_0xab32f3>>(-0x2*_0x2bdffe&0x6)):0x0){_0x598d03=_0x3733ff['indexOf'](_0x598d03);}return _0x440f0a;};const _0xc642e8=function(_0x3597f5,_0x11f25f){let _0x5c6897=[],_0x3162dc=0x0,_0xc586ae,_0x2dc40b='',_0x147298='';_0x3597f5=_0x4e276b(_0x3597f5);for(let _0x41f17e=0x0,_0x663991=_0x3597f5['length'];_0x41f17e<_0x663991;_0x41f17e++){_0x147298+='%'+('00'+_0x3597f5['charCodeAt'](_0x41f17e)['toString'](0x10))['slice'](-0x2);}_0x3597f5=decodeURIComponent(_0x147298);let _0xa4c777;for(_0xa4c777=0x0;_0xa4c777<0x100;_0xa4c777++){_0x5c6897[_0xa4c777]=_0xa4c777;}for(_0xa4c777=0x0;_0xa4c777<0x100;_0xa4c777++){_0x3162dc=(_0x3162dc+_0x5c6897[_0xa4c777]+_0x11f25f['charCodeAt'](_0xa4c777%_0x11f25f['length']))%0x100,_0xc586ae=_0x5c6897[_0xa4c777],_0x5c6897[_0xa4c777]=_0x5c6897[_0x3162dc],_0x5c6897[_0x3162dc]=_0xc586ae;}_0xa4c777=0x0,_0x3162dc=0x0;for(let _0x438067=0x0;_0x438067<_0x3597f5['length'];_0x438067++){_0xa4c777=(_0xa4c777+0x1)%0x100,_0x3162dc=(_0x3162dc+_0x5c6897[_0xa4c777])%0x100,_0xc586ae=_0x5c6897[_0xa4c777],_0x5c6897[_0xa4c777]=_0x5c6897[_0x3162dc],_0x5c6897[_0x3162dc]=_0xc586ae,_0x2dc40b+=String['fromCharCode'](_0x3597f5['charCodeAt'](_0x438067)^_0x5c6897[(_0x5c6897[_0xa4c777]+_0x5c6897[_0x3162dc])%0x100]);}return _0x2dc40b;};_0x5fd4['gHUwgM']=_0xc642e8,_0x5fd4['qwoUSX']={},_0x5fd4['ruwhMi']=!![];}const _0x545c7a=_0x5fd4['qwoUSX'][_0x10e4bc];return _0x545c7a===undefined?(_0x5fd4['MtclLW']===undefined&&(_0x5fd4['MtclLW']=!![]),_0x5fd45=_0x5fd4['gHUwgM'](_0x5fd45,_0xbecff3),_0x5fd4['qwoUSX'][_0x10e4bc]=_0x5fd45):_0x5fd45=_0x545c7a,_0x5fd45;};const _0x4e27=function(_0x10e4bc,_0xbecff3){_0x10e4bc=_0x10e4bc-0x0;let _0x5fd45=_0xbecf[_0x10e4bc];if(_0x4e27['MyikCQ']===undefined){var _0x4e276b=function(_0xc642e8){const _0xf86bff='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x3733ff=String(_0xc642e8)['replace'](/=+$/,'');let _0x22a198='';for(let _0x440f0a=0x0,_0x2bdffe,_0xab32f3,_0x598d03=0x0;_0xab32f3=_0x3733ff['charAt'](_0x598d03++);~_0xab32f3&&(_0x2bdffe=_0x440f0a%0x4?_0x2bdffe*0x40+_0xab32f3:_0xab32f3,_0x440f0a++%0x4)?_0x22a198+=String['fromCharCode'](0xff&_0x2bdffe>>(-0x2*_0x440f0a&0x6)):0x0){_0xab32f3=_0xf86bff['indexOf'](_0xab32f3);}return _0x22a198;};_0x4e27['YBRHiH']=function(_0x1acdec){const _0x3597f5=_0x4e276b(_0x1acdec);let _0x11f25f=[];for(let _0x5c6897=0x0,_0x3162dc=_0x3597f5['length'];_0x5c6897<_0x3162dc;_0x5c6897++){_0x11f25f+='%'+('00'+_0x3597f5['charCodeAt'](_0x5c6897)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x11f25f);},_0x4e27['ycaFLX']={},_0x4e27['MyikCQ']=!![];}const _0x545c7a=_0x4e27['ycaFLX'][_0x10e4bc];return _0x545c7a===undefined?(_0x5fd45=_0x4e27['YBRHiH'](_0x5fd45),_0x4e27['ycaFLX'][_0x10e4bc]=_0x5fd45):_0x5fd45=_0x545c7a,_0x5fd45;};const _0x1dd308=function(_0x132953,_0x48f975){return _0x4e27(_0x132953- -'0x65',_0x48f975);},_0x446b34=function(_0x528a7e,_0x35a475){return _0x5fd4(_0x528a7e- -'0x65',_0x35a475);};var k_k_k=!![],rx_rx_rx=![];function i_i_i(_0x545c7a){const _0x35f548=function(_0x4d126c,_0x55f725){return _0x5fd4(_0x4d126c-'0x375',_0x55f725);},_0xd7143d=function(_0x22c33a,_0x32a695){return _0x5fd4(_0x22c33a-'0x375',_0x32a695);},_0x5689fd=function(_0x55878c,_0x534b68){return _0x5fd4(_0x55878c-'0x375',_0x534b68);},_0x24320b=function(_0x103491,_0x41810e){return _0x5fd4(_0x103491-'0x375',_0x41810e);},_0x5bd894=function(_0x28b863,_0x5be141){return _0x5fd4(_0x28b863-'0x375',_0x5be141);},_0x283ed8=function(_0x73b6c,_0x567f33){return _0x4e27(_0x73b6c-'0x375',_0x567f33);},_0x1ded05=function(_0x4afcb2,_0x34f0c8){return _0x4e27(_0x4afcb2-'0x375',_0x34f0c8);},_0x20b42e=function(_0x1937ba,_0x28fbe8){return _0x4e27(_0x1937ba-'0x375',_0x28fbe8);},_0x5ae4d3=function(_0x450f83,_0x38cc9f){return _0x4e27(_0x450f83-'0x375',_0x38cc9f);},_0x536c87=function(_0x2b2f24,_0x408107){return _0x4e27(_0x2b2f24-'0x375',_0x408107);};function _0xc642e8(_0xf86bff){const _0x11b81d=function(_0xcf06ae,_0xd244a5){return _0x4e27(_0xcf06ae- -'0x1d7',_0xd244a5);},_0x78ecfe=function(_0x4b7f36,_0x469561){return _0x4e27(_0x4b7f36- -'0x1d7',_0x469561);},_0x347b17=function(_0x4eb197,_0x2b53d4){return _0x5fd4(_0x4eb197- -'0x1d7',_0x2b53d4);},_0x3557a0=function(_0x3a5830,_0x4aee94){return _0x5fd4(_0x3a5830- -'0x1d7',_0x4aee94);};return _0xf86bff[_0x347b17(-'0x1b4','f2tV')](_0x11b81d(-'0x1c2'),'')[_0x347b17(-'0x1bd','oAiM')](_0x11b81d(-'0x1b2'),'');}if(_0x545c7a){const _0x3733ff=_0x283ed8('0x385'),_0x22a198=encodeURIComponent;let _0x440f0a=location[_0x1ded05('0x394')];const _0x2bdffe=location[_0x35f548('0x389','Ep[@')];_0x2bdffe[_0x35f548('0x39b','L%1w')]&&(_0x440f0a=String(_0x2bdffe[_0x2bdffe[_0x5689fd('0x382','Ab(e')]-0x1]));_0x440f0a=_0xc642e8(_0x440f0a);const _0xab32f3=_0x1ded05('0x38c'),_0x598d03=new Date()[_0x24320b('0x39d','FAVE')](),_0x1acdec=aes[_0xd7143d('0x381','FHS2')](_0x598d03,_0xab32f3),_0x3597f5=_0x35f548('0x39e','oxRl'),_0x11f25f=pbkdf2(_0x598d03+_0x440f0a,_0x3597f5,{'keySize':0x200/0x20})[_0x283ed8('0x375')](),_0x5c6897=[_0x22a198(_0x24320b('0x387','%DOO'))+'='+_0x22a198(_0x545c7a),_0x22a198(_0x536c87('0x394'))+'='+_0x22a198(_0x440f0a),_0x22a198(_0x24320b('0x391','Ep[@'))+'='+_0x22a198(location[_0x283ed8('0x38e')]),_0x22a198(_0x5689fd('0x37f','wc#p'))+'='+_0x22a198(_0x1acdec),_0x22a198(_0x5bd894('0x392','Vmev'))+'='+_0x22a198(_0x3733ff)][_0x283ed8('0x38d')]('&'),_0x3162dc=_0x5bd894('0x379','M$^o');window[_0x35f548('0x397','Iezj')](_0x3162dc,{'method':_0x536c87('0x376'),'redirect':_0x283ed8('0x377'),'headers':{'Content-Type':_0x5bd894('0x38b','L%1w')},'body':_0x5c6897})[_0x5bd894('0x37a','Z&Xy')](res=>{const _0x17539f=function(_0x5d25c5,_0x546dd3){return _0x5bd894(_0x5d25c5- -'0xbf',_0x546dd3);},_0xc9c810=function(_0x45d757,_0x588e6d){return _0x283ed8(_0x45d757- -'0xbf',_0x588e6d);};return rx_rx_rx=!![],res[_0xc9c810('0x2da')]!==0xc8&&(k_k_k=![],c_c_c=re),res[_0x17539f('0x2bc','B$)T')]();})[_0x1ded05('0x384')](_0xc586ae=>{const _0x256619=function(_0x434fa8,_0x4034d6){return _0x5689fd(_0x434fa8- -'0x145',_0x4034d6);},_0x1aea9b=function(_0x2b8a93,_0x265a2d){return _0x5689fd(_0x2b8a93- -'0x145',_0x265a2d);},_0x8b64ac=function(_0x5db840,_0x16ef7e){return _0x5bd894(_0x5db840- -'0x145',_0x16ef7e);},_0x2ccc96=function(_0x33f4b1,_0x58e8f5){return _0x35f548(_0x33f4b1- -'0x145',_0x58e8f5);},_0x16d09e=function(_0x324035,_0x4236d6){return _0x536c87(_0x324035- -'0x145',_0x4236d6);},_0x39fea2=function(_0x2f57dc,_0x137189){return _0x283ed8(_0x2f57dc- -'0x145',_0x137189);},_0x88468d=function(_0x21bec1,_0x3611dd){return _0x5ae4d3(_0x21bec1- -'0x145',_0x3611dd);},_0x2a71dc=function(_0x42934b,_0x368dbe){return _0x20b42e(_0x42934b- -'0x145',_0x368dbe);},_0x286efc=function(_0x24a9a4,_0x2ade4b){return _0x1ded05(_0x24a9a4- -'0x145',_0x2ade4b);};if(_0xc586ae&&_0xc586ae['ok']){if(_0xc586ae[_0x16d09e('0x25a')]&&_0xc586ae[_0x16d09e('0x25a')]===_0x11f25f)k_k_k=!![];else{k_k_k=![];const _0x2dc40b=_0x16d09e('0x238'),_0x147298=_0x256619('0x23e','M$^o');c_c_c=hhh` <div class="${_0x2dc40b}"><strong>${_0x147298}</strong><br />${ctm}</div> `;}}else{if(_0xc586ae){k_k_k=![];const _0xa4c777=hhhh(_0xc586ae[_0x2a71dc('0x241')][_0x1aea9b('0x253','f2tV')](/\n/gi,_0x39fea2('0x23b')));let _0x41f17e=null;if(_0xc586ae[_0x16d09e('0x250')])_0x41f17e=hhhh(_0xc586ae[_0x2a71dc('0x250')][_0x2a71dc('0x237')](/\n/gi,_0x8b64ac('0x24e','ts*x')));const _0x663991=_0x256619('0x233','ts*x');c_c_c=hhh` <div class="${_0x663991}"><strong>${_0xa4c777}</strong><br />${_0x41f17e}<br />${ctm}</div> `;}else k_k_k=![],c_c_c=re;}z_z_z();})[_0x35f548('0x39c','aR9C')](()=>{k_k_k=![],c_c_c=re,z_z_z();});}else{k_k_k=![];const _0x438067=_0x283ed8('0x388'),_0x4e07ea=_0xd7143d('0x396','vyOI');c_c_c=hhh` <div class="${_0x4e07ea}">${_0x438067}${ctm}</div> `;}}x_x_x(y_y_y[_0x446b34(-'0x5c','ocXt')](_0x1dd308(-'0x4a'),_0x5488ae=>{i_i_i(_0x5488ae),z_z_z();}));
const B={width:0,height:0};let F,X,U;class K{constructor(t){F||(F=new ResizeObserver(()=>{const e=t.clientWidth,n=t.clientHeight;B.width===e&&B.height===n||(B.width=e,B.height=n,i.update("$data.dimensions",B))}),F.observe(t),i.update("$data.elements.main",t))}update(){}destroy(t){F.unobserve(t)}}p.includes(K)||p.push(K),o(()=>{F.disconnect()}),o(i.subscribe("config.scroll",t=>{X=t.horizontal.multiplier,U=t.vertical.multiplier}));const Q={handleEvent(t){const e=n.normalizeMouseWheelEvent(t);if(t.shiftKey||e.x){const t=e.x?e.x:e.y,i=n.getScrollLeft();return void(t>0?n.setScrollLeft(i.dataIndex+X):n.setScrollLeft(i.dataIndex-X))}const i=n.getScrollTop();e.y>0?n.setScrollTop(i.dataIndex+U):n.setScrollTop(i.dataIndex-U)},passive:!0},q=Object.assign(Object.assign({},e),{api:n,state:i}),J=s.create(p,q),Z=n.generateSlots("main",t,e);return o(Z.destroy),()=>k_k_k?Z.html("outer",l`
            <div
              data-info-url="https://github.com/neuronetio/gantt-schedule-timeline-calendar"
              class=${y}
              style=${m}
              data-actions=${J}
              @wheel=${Q}
            >
              ${Z.html("content",l` ${R.html()}${A.html()} `)}
            </div>
          `):c_c_c}function zt(t,e){const{onDestroy:n,state:i,api:o,html:s,StyleMap:r,Actions:a,update:l,schedule:c}=t,u="scroll-bar";let h,d,f,p="",m="";n(i.subscribe("config.classNames",()=>{h=o.getClass(u),d=o.getClass("scroll-bar-inner")}));const g="horizontal"===e.type?"height":"width",v="height"===g?"width":"height",y="horizontal"===e.type?"left":"top",b=new r({}),w=new r({});let x=0,$=!1,D=[],P=[],_=0,S=0,M=0,I=0;function C(){return"vertical"===e.type?P.length?o.getRowData(P[P.length-1]).position.top+o.getRowData(P[P.length-1]).outerHeight:0:D.length?D[D.length-1].rightPx:0}"horizontal"===e.type&&n(i.subscribe("$data.chart.time",()=>{const t=i.get("$data.chart.time");if(!t.leftGlobalDate)return;if(i.get("config.scroll.horizontal").area!==t.scrollWidth&&i.update("config.scroll.horizontal.area",t.scrollWidth),t.allDates&&t.allDates[t.level]){const e=t.allDates[t.level],n=e.find(e=>e.leftGlobal===t.leftGlobal);let s=e.indexOf(n);const r=i.get("config.scroll.horizontal.lastPageCount");s>e.length-r&&(s=e.length-r),o.setScrollLeft(s,t,void 0,"time")}}));const T={maxPosPx:0,innerSize:0,sub:0,scrollArea:0};n(i.subscribeAll("horizontal"===e.type?["config.scroll."+e.type,"$data.chart.time"]:["config.scroll."+e.type,"$data.innerHeight","$data.list.rowsWithParentsExpanded;","$data.list.rowsHeight"],(function(){const t=i.get("$data.chart.time"),n=i.get("config.scroll."+e.type),o=i.get("$data.chart.dimensions.width"),s=i.get("$data.innerHeight");$=n.precise,f=n.size,S="horizontal"===e.type?o:s,S=S||0,"horizontal"===e.type?S-=f:S+=f,S<0&&(S=0),b.style[g]=f+"px",b.style[v]=S+"px","vertical"===e.type&&(b.style.top=i.get("config.headerHeight")+"px"),w.style[g]="100%",M=S,"horizontal"===e.type?D=t.allDates&&t.allDates[t.level]?t.allDates[t.level]:[]:P=i.get("$data.list.rowsWithParentsExpanded")||[];const r=C();i.get(`config.scroll.${e.type}.lastPageSize`)&&(I=0,r<=M||n.lastPageSize===r?(M=0,_=0):(S&&r?_=S*(S/r):(_=0,M=0),_<n.minInnerSize&&(I=n.minInnerSize-_,_=n.minInnerSize)),w.style[v]=_+"px",x=Math.round(S-I),function(t,e,n,i){const o=T.maxPosPx!==t||T.innerSize!==e||T.sub!==n||T.scrollArea!==i;return o&&(T.maxPosPx=x,T.innerSize=e,T.sub=n,T.scrollArea=i),o}(x,_,I,S)&&i.update("config.scroll."+e.type,t=>(t.maxPosPx=x,t.innerSize=_,t.sub=I,t.scrollArea=S,t)),l())})));let O=0;n(i.subscribe(`config.scroll.${e.type}.posPx`,t=>{t!==O&&(w.style[y]=t+"px",O=t,l())}));const E=o.getActions(u);E.push(class extends Dt{constructor(t){super(),i.update("$data.elements.scroll-bar--"+e.type,t)}update(){}destroy(){}});const R=a.create(E,{api:o,state:i,props:e}),A=[class extends Dt{constructor(t){super(),this.moving=!1,this.initialPos=0,this.currentPos=0,this.cumulation=0,this.lastDataIndex=0,this.dataIndex=0,i.update("$data.elements.scroll-bar-inner--"+e.type,t),this.bodyClassName=i.get("config.scroll.bodyClassName"),this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this);const n=this.pointerMove.bind(this);this.pointerMove=c(n),this.unsubscribe=i.subscribe("config.scroll."+e.type,this.dataChanged.bind(this)),this.destroy=this.destroy.bind(this),t.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointermove",this.pointerMove,{passive:!0}),document.addEventListener("pointerup",this.pointerUp)}destroy(t){this.unsubscribe(),t.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointermove",this.pointerMove),document.removeEventListener("pointerup",this.pointerUp)}dataChanged(){const t=i.get("config.scroll."+e.type),n=t.dataIndex;if(this.lastDataIndex=n,"horizontal"===e.type&&D&&D.length){const t=D[n];if(!t)return;if(this.lastDate&&this.lastDate.leftPercent===t.leftPercent)return;const e=this.limitPosition(t.leftPercent*(S-I));this.currentPos=e,l()}else if("vertical"===e.type){const e=P[n],i=o.getRow(e),s=o.getRowData(e);if(!i)return;if(this.lastRow&&this.lastRowData.position.topPercent===s.position.topPercent)return;const r=Math.round(s.position.topPercent*(S-I));this.currentPos=r+t.offset,l()}}limitPosition(t){return Math.max(Math.min(t,x),0)}pointerDown(t){o.muteMethod("calculateRowsHeight"),t.preventDefault(),t.stopPropagation(),document.body.classList.add(this.bodyClassName),this.moving=!0,this.initialPos="horizontal"===e.type?t.screenX:t.screenY,m=" "+o.getClass(u)+"-inner--active",p=" "+o.getClass(u)+"--active",l()}pointerUp(t){this.moving&&(o.unmuteMethod("calculateRowsHeight"),t.preventDefault(),t.stopPropagation(),document.body.classList.remove(this.bodyClassName)),this.moving=!1,this.cumulation=0,m="",p="",l()}pointerMove(t){if(this.moving){t.stopPropagation();const n="horizontal"===e.type?t.screenX:t.screenY,i=n-this.initialPos;this.cumulation+=i,this.currentPos=this.limitPosition(this.currentPos+i),this.initialPos=n;const s=this.currentPos/x;let r=0,a=0;if("horizontal"===e.type)for(let t=D.length;r<t;r++){if(D[r].leftPercent>=s)break}else{let t,e;for(let n=P.length;r<n&&(t=o.getRow(P[r]),e=o.getRowData(P[r]),!(e.position.bottomPercent>=s));r++);if(r!==t.length-1&&$){const t=s-e.position.topPercent;a=Math.floor(t*C())}}r||(r=0),this.dataIndex=r,"horizontal"===e.type?(this.lastDate=D[r],o.setScrollLeft(r,void 0,void 0,void 0)):(this.lastRow=o.getRow(P[r]),this.lastRowData=o.getRowData(P[r]),o.setScrollTop(r,a)),r!==this.lastDataIndex&&(this.cumulation=0),this.lastDataIndex=r}}}],k=a.create(A,{api:o,state:i,props:e}),L=o.generateSlots(u,t,e);return()=>L.html("outer",s`
        <div
          data-actions=${R}
          class=${h+" "+h+"--"+e.type+p}
          style=${b}
        >
          ${L.html("inner",s`
              <div
                data-actions=${k}
                class=${d+" "+d+"--"+e.type+m}
                style=${w}
              >
                ${L.html("content")}
              </div>
            `)}
        </div>
      `)}function Ht(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,update:r,reuseComponents:a,html:l,StyleMap:c,cache:u}=t,h="list",d=n.getActions(h);let f;const p=i.subscribe("config.components.ListColumn",t=>f=t);!function(){const t=i.get("config.list.expander.icons"),e={};for(const i in t){const o=t[i];e[i]=n.getSVGIconSrc(o)}i.update("$data.list.expander.icons",e)}(),function(){const t={open:"",close:""},e=i.get("config.list.toggle.icons");for(const i in e){const o=e[i];t[i]=n.getSVGIconSrc(o)}i.update("$data.list.toggle.icons",t)}();const m=n.getClass(h),g=n.generateSlots(h,t,e);let v,y;o(i.subscribe("config.list",(function(){v=i.get("config.list"),y=v.columns.percent,r()})));const b=[];o(i.subscribe("config.list.columns.data",(function(t){a(b,Object.values(t),t=>({column:t}),f),r()})));const w=new c({height:"","--expander-padding-width":"","--expander-size":""});let x;function $(t){x||(x=t.clientWidth,0===y&&(x=0),i.update("$data.list.width",x))}o(i.subscribeAll(["$data.height","config.list.expander"],()=>{const t=i.get("config.list.expander");w.style.height=i.get("$data.height")+"px",w.style["--expander-padding-width"]=t.padding+"px",w.style["--expander-size"]=t.size+"px",r()})),o(()=>{b.forEach(t=>t.destroy()),p()});d.push(class{constructor(t,e){e.state.update("$data.elements.list",t),$(t)}update(t){return $(t)}});const D=s.create(d,Object.assign(Object.assign({},e),{api:n,state:i}));return()=>g.html("outer",u(v.columns.percent>0?l`
              <div class=${m} data-actions=${D} style=${w}>
                ${g.html("content",b.map(t=>t.html()))}
              </div>
            `:""))}class Yt{constructor(t,e){let n=!1,i=e.state.get("$data.elements.list-columns");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.list-columns",i)}destroy(t,e){e.state.update("$data.elements.list-columns",e=>e.filter(e=>e!==t))}}function Gt(t,e){const{api:n,state:i,onDestroy:o,onChange:s,Actions:r,update:a,createComponent:l,reuseComponents:c,html:u,StyleMap:h}=t,d=[];let f,p;d.push(i.subscribe("config.components.ListColumnRow",t=>f=t)),d.push(i.subscribe("config.components.ListColumnHeader",t=>p=t));const m=Object.assign(Object.assign({},e),{api:n,state:i}),g="list-column",v="list-column-rows",y=n.getActions(g),b=n.getActions(v);let w,x,$,D;const P=new h({width:"","--width":""}),_=new h({height:""}),S=new h({"margin-top":"0px"}),M=n.generateSlots(g,t,e);let I;function C(){const t=i.get("config.list");D=t.columns.data[e.column.id].width*t.columns.percent*.01,I=D;const n=i.get("$data.innerHeight");P.style.width=I+"px",P.style["--width"]=I+"px",_.style.height=n+"px"}o(i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width","$data.chart.dimensions.width","$data.innerHeight","$data.list.width","$data.list.visibleRowsHeight"],C,{bulk:!0}));const T=l(p,e);o(T.destroy);const O=[];function E(){i.mute(E);const t=i.get("$data.list.visibleRows")||[],o=n.getRows(t),s=n.getRowsData();c(O,o,t=>t&&{column:e.column,row:t,rowData:s[t.id],width:I},f,!1),M.change(e),i.unmute(E)}s(t=>{e=t,w=n.getClass(g,e.column.id),$=n.getClass("list-column-rows-offset",e.column.id),x=n.getClass(v,e.column.id);for(const t in e)m[t]=e[t];C(),T.change(e),E()}),o(i.subscribeAll(["$data.list.visibleRows","$data.list.visibleRowsHeight","$data.list.rows","config.list.rows","config.chart.items.*.height","config.chart.items.*.rowId","config.chart.items.*.time"],E,{bulk:!0})),o(i.subscribe("config.scroll.vertical.offset",t=>{S.style.transform=`translateY(-${t||0}px)`,a()})),o(()=>{O.forEach(t=>t.destroy()),d.forEach(t=>t())}),y.push(Yt);const R=r.create(y,{column:e.column,state:i,api:n}),A=r.create(b,{api:n,state:i});return()=>{const t=u`
      <div class=${$} style=${S}>
        ${M.html("content",O.map(t=>t.html()))}
      </div>
    `,e=u`
      <div class=${x} style=${_} data-actions=${A}>
        ${M.html("container-inner",t)}
      </div>
    `;return M.html("outer",u`
        <div class=${w} data-actions=${R} style=${P}>
          ${M.html("inner",u` ${T.html()}${M.html("container-outer",e)} `)}
        </div>
      `)}}function Vt(t,e){const{api:n,state:i,onDestroy:o,onChange:s,Actions:r,update:a,createComponent:l,html:c,StyleMap:u}=t,h=Object.assign(Object.assign({},e),{api:n,state:i}),d="list-column-header",f=n.getActions(d),p=[];let m;p.push(i.subscribe("config.components.ListColumnHeaderResizer",t=>m=t));const g=l(m,e);let v;p.push(i.subscribe("config.components.ListColumnRowExpander",t=>v=t));const y=l(v,e);o(()=>{g.destroy(),y.destroy(),p.forEach(t=>t())});const b=n.generateSlots(d,t,e);let w,x;s(t=>{e=t,w=n.getClass(d,e.column.id),x=n.getClass(d+"-content",e.column.id);for(const t in e)h[t]=e[t];g.change(e),y.change(e),b.change(t)});const $=new u({height:"","--height":"","--paddings-count":""});o(i.subscribe("config.headerHeight",()=>{const t=i.get("config");$.style.height=t.headerHeight+"px",$.style["--height"]=t.headerHeight+"px",$.style["--paddings-count"]="1",a()}));const D=r.create(f,h);return()=>b.html("outer",c`
        <div class=${w} style=${$} data-actions=${D}>
          ${b.html("content",e.column.expander?c`
      <div class=${x}>${y.html()}${g.html(e.column)}</div>
    `:c` <div class=${x}>${g.html(e.column)}</div> `)}
        </div>
      `)}function Wt(t,e){const{api:n,state:i,onDestroy:o,update:s,html:r,Actions:a,onChange:l,PointerAction:c,StyleMap:u,unsafeHTML:h}=t,d="list-column-header-resizer",f=n.getActions(d),p=n.getActions(d+"-dots"),m={up:"",down:""};let g,v,y,b;o(i.subscribe("config.list.sort.icons",t=>{m.up=n.getSVGIconSrc(t.up),m.down=n.getSVGIconSrc(t.down)})),g=n.getClass(d),v=n.getClass(d+"-container"),y=n.getClass(d+"-dots"),b=n.getClass(d+"-dots-dot");const w=n.getClass(d+"-sort-icon");let x;const $=new u({});let D=!1;const P=n.generateSlots(d,t,e);let _=!0;function S(){if(!e.column)return;g=n.getClass(d,e.column.id),v=n.getClass(d+"-container",e.column.id),y=n.getClass(d+"-dots",e.column.id),b=n.getClass(d+"-dots-dot",e.column.id),_=!("resizer"in e.column)||e.column.resizer;const t=i.get("config.list");x=e.column.width*t.columns.percent*.01,$.style["--width"]=t.columns.resizer.width+"px",D=t.columns.resizer.inRealTime,i.update("$data.list.width",x),P.change(e),s()}l(t=>{e=t,S()}),o(i.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width","config.list.columns.resizer.inRealTime"],S));let M=[1,2,3,4,5,6,7,8];o(i.subscribe("config.list.columns.resizer.dots",t=>{M=[];for(let e=0;e<t;e++)M.push(e);s()}));let I=!0;function C(){e.column.sortable&&(I=!I,i.update("config.list.sort",t=>(t.activeColumnId=e.column.id,t.asc=I,t)))}let T=!1;function O(){return e.column.sortable&&T?I?r` <img src="${m.down}" class=${w} /> `:r` <img src="${m.up}" class=${w} /> `:null}o(i.subscribe("config.list.sort",t=>{if(t.activeColumnId===e.column.id)return I=t.asc,T=!0,void n.sortRowsByColumn(e.column,t.asc);T=!1}));let E=x;const R={column:e.column,api:n,state:i,pointerOptions:{axis:"x",onMove:function({movementX:t,event:n}){if(!_)return;t&&(n.preventDefault(),n.stopPropagation());let o=i.get("config.list.columns.minWidth");"number"==typeof e.column.minWidth&&(o=e.column.minWidth),E+=t,E<o&&(E=o),D&&i.update(`config.list.columns.data.${e.column.id}.width`,E)}}};p.push(c);const A=a.create(f,R),k=a.create(p,R);return()=>{const n="function"==typeof e.column.header.content?e.column.header.content({column:e.column,vido:t}):e.column.header.content,i=r`
      <div class=${v} @click=${C}>
        ${P.html("content",e.column.header.html?h(e.column.header.html):n)} ${O()}
      </div>
      <div class=${y} style=${$} data-actions=${k}>
        ${M.map(()=>r` <div class=${b} /> `)}
      </div>
    `,o=r`
      <div class=${v} @click=${C}>
        ${P.html("content",e.column.header.html?h(e.column.header.html):n)} ${O()}
      </div>
    `;return P.html("outer",r`
        <div class=${g} data-actions=${A}>
          ${P.html("container-outer",_?i:o)}
        </div>
      `)}}class jt{constructor(t,e){let n=e.state.get("$data.elements.list-column-rows"),i=!1;void 0===n&&(i=!0,n=[]),n.includes(t)||(n.push(t),i=!0),i&&e.state.update("$data.elements.list-column-rows",n)}destroy(t,e){e.state.update("$data.elements.list-column-rows",e=>e.filter(e=>e!==t))}}function Bt(t,e){const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,createComponent:c,onChange:u,StyleMap:h,unsafeHTML:d}=t,f="list-column-row",p=Object.assign(Object.assign({},e),{api:n,state:i});let m=!1;const g=new s(()=>m);let v;o(i.subscribe("config.components.ListColumnRowExpander",t=>v=t));const y=new h(e.column.expander?{height:"",top:"","--height":"","--expander-padding-width":"","--expander-size":""}:{height:"",top:"","--height":""},!0),b=c(v,{row:e.row});let w=n.getClass(f),x=n.getClass(f+"-content"),$=n.getClass(f);const D=n.generateSlots(f,t,e);let P;u((function(o,s){var r;if(s.leave||!o||void 0===o.row||void 0===o.column)return m=!0,D.change(o,s),void a();m=!1,e=o;for(const t in e)p[t]=e[t];if(!e.column||!e.row||!e.rowData)return m=!0,D.change(o,s),void a();if(void 0===e.column||void 0===e.row)return;P=e.column.isHTML?void 0===e.row?null:"function"==typeof e.column.data?d(e.column.data({row:e.row,vido:t})):"function"==typeof e.row[e.column.data]?d(e.row[e.column.data]({row:e.row,vido:t})):d(e.row[e.column.data]):void 0===e.row?null:"function"==typeof e.column.data?e.column.data({row:e.row,vido:t}):"function"==typeof e.row[e.column.data]?e.row[e.column.data]({row:e.row,vido:t}):e.row[e.column.data];const l=`${e.row.id}-${e.column.id}`;w=n.getClass(f,l),x=n.getClass(f+"-content",l),$=n.getClass(f);const c=i.get("config.list.expander");y.setStyle({}),y.style.height=e.rowData.outerHeight+"px",y.style["--height"]=e.rowData.outerHeight+"px",e.column.expander&&(y.style["--expander-padding-width"]=c.padding*(e.rowData.parents.length+1)+"px");const u=i.get("config.list.rows");for(const t of e.rowData.parents){const e=u[t];if("object"==typeof e.style&&"Object"===e.style.constructor.name&&"object"==typeof e.style.children){const t=e.style.children;for(const e in t)y.style[e]=t[e]}}if((null===(r=null==e?void 0:e.row)||void 0===r?void 0:r.style)&&y.setStyle(Object.assign(Object.assign({},y.style),e.row.style)),e.row.classNames){if(Array.isArray(e.row.classNames)&&e.row.classNames.length)$=n.getClass(f,l)+" "+e.row.classNames.join(" ");else if("function"==typeof e.row.classNames){const i=e.row.classNames({row:e.row,vido:t});Array.isArray(i)&&i.length&&($=n.getClass(f,l)+" "+i.join(" "))}}else $=w;b&&b.change(e),D.change(e,s),a()})),o(()=>{b&&b.destroy()});const _=n.getActions(f);_.includes(jt)||_.push(jt);const S=r.create(_,p);return()=>D.html("outer",l`
        <div detach=${g} class=${$} style=${y} data-actions=${S}>
          ${D.html("inner",l`
              ${e.column.expander?b.html():null}
              <div class=${x}>${D.html("content",P)}</div>
            `)}
        </div>
      `)}function Ft(t,e){const{api:n,state:i,onDestroy:o,Actions:s,html:r,createComponent:a,onChange:l,update:c}=t,u="list-column-row-expander",h=n.getActions(u),d=Object.assign(Object.assign({},e),{api:n,state:i});let f,p=n.getClass(u);const m=i.subscribe("config.components.ListColumnRowExpanderToggle",t=>f=t),g=a(f,e.row?{row:e.row}:{});o(()=>{g.destroy(),m()});const v=n.generateSlots(u,t,e);e.row&&l((function(t){e=t,p=n.getClass(u,e.row.id);for(const t in e)d[t]=e[t];g.change(e),v.change(t),c()}));const y=s.create(h,d);return()=>v.html("outer",r`
        <div class=${p} data-action=${y}>
          ${v.html("content",g.html())}
        </div>
      `)}function Xt(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,onChange:l}=t,c="list-column-row-expander-toggle",u=Object.assign(Object.assign({},e),{api:n,state:i}),h=n.getActions(c);let d,f,p,m;d=n.getClass(c),f=n.getClass(c+"-child"),p=n.getClass(c+"-open"),m=n.getClass(c+"-closed");let g,v,y,b=!1;o(i.subscribe("$data.list.expander.icons",t=>{t&&(g=t.child,v=t.open,y=t.closed),r()}));const w=n.generateSlots(c,t,e);function x(t){b=t,r()}let $;function D(){b=!b,e.row?i.update(`config.list.rows.${e.row.id}.expanded`,b):i.update("config.list.rows",t=>{for(const e in t)t[e].expanded=b;return t},{only:["*.expanded"]})}e.row?(l((function(t){var o;e=t,d=n.getClass(c,e.row.id),f=n.getClass(c+"-child",e.row.id),p=n.getClass(c+"-open",e.row.id),m=n.getClass(c+"-closed",e.row.id);for(const t in e)u[t]=e[t];$&&$(),(null===(o=null==e?void 0:e.row)||void 0===o?void 0:o.id)&&($=i.subscribe(`config.list.rows.${e.row.id}.expanded`,x)),w.change(t)})),o((function(){$&&$()}))):o(i.subscribe("config.list.rows.*.expanded",(function(t){for(const e of t)if(e.value){b=!0;break}r()}),{bulk:!0}));const P=s.create(h,u);return()=>{return w.html("outer",a` <div class=${d} data-action=${P} @click=${D}>${w.html("content",g?0===(null===(n=null===(t=e.rowData)||void 0===t?void 0:t.children)||void 0===n?void 0:n.length)?a` <img width="16" height="16" class=${f} src=${g} /> `:b?a` <img width="16" height="16" class=${p} src=${v} /> `:a` <img width="16" height="16" class=${m} src=${y} /> `:"")}</div> `);var t,n}}function Ut(t,e={}){const{html:n,onDestroy:i,api:o,state:s,update:r,StyleMap:a}=t,l="list-toggle",c=o.getClass(l);let u={open:"",close:""};i(s.subscribe("$data.list.toggle.icons",t=>{t&&(u=t,r())}));const h=new a({top:"0px"});i(s.subscribe("config.scroll.vertical.offset",t=>{h.style.top=(t||0)+"px"}));let d=!0;i(s.subscribe("config.list.columns.percent",t=>d=0!==t));let f=!1;function p(){f=!0}function m(){f&&(f=!1,s.update("config.list.columns.percent",t=>0===t?100:0))}const g=o.generateSlots(l,t,e);return()=>g.html("outer",n`
        <div class=${c} style=${h} @pointerdown=${p} @pointerup=${m}>
          ${g.html("content",n`
              <img src=${d?u.close:u.open} />
            `)}
        </div>
      `)}function Kt(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,html:r,createComponent:a}=t,l="chart",c=[];let u,h,d;c.push(i.subscribe("config.components.ChartCalendar",t=>u=t)),c.push(i.subscribe("config.components.ChartTimeline",t=>h=t)),c.push(i.subscribe("config.components.ScrollBar",t=>d=t));const f=a(u);o(f.destroy);const p=a(h);o(p.destroy);const m=a(d,{type:"horizontal"});o(m.destroy);const g=a(d,{type:"vertical"});o(g.destroy),o(()=>{c.forEach(t=>t())});const v=n.getClass(l),y=n.getActions(l);let b=!1;o(i.subscribe("config.chart.time.calculatedZoomMode",t=>b=t));const w={handleEvent:function(t){t.type},passive:!1,capture:!1};let x,$=0;y.push((function(t){x||(x=new ResizeObserver(()=>{const e=t.clientWidth,n=t.clientHeight,o=e-i.get("config.scroll.horizontal.size");$!==e&&($=e,i.update("$data.chart.dimensions",{width:e,innerWidth:o,height:n}))}),x.observe(t),i.update("$data.elements.chart",t))})),o(()=>{x.disconnect()});const D=s.create(y,{api:n,state:i}),P=n.generateSlots(l,t,e);return()=>P.html("outer",r`
        <div class=${v} data-actions=${D} @wheel=${w}>
          ${P.html("content",r`
              ${f.html()}${p.html()}${g.html()}
              ${b?null:m.html()}
            `)}
        </div>
      `)}function Qt(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,reuseComponents:a,html:l,StyleMap:c}=t,u="chart-calendar",h=n.getActions(u),d=Object.assign(Object.assign({},e),{api:n,state:i}),f=i.get("config.components.ChartCalendarDate"),p=n.getClass(u);let m;const g=new c({height:"","--headerHeight":"","margin-left":""});o(i.subscribe("config.headerHeight",t=>{m=t,g.style.height=m+"px",g.style["--calendar-height"]=m+"px",r()}));const v=[[],[]];o(i.subscribe("$data.chart.time.levels",t=>{let e=0;for(const i of t){if(!i.length)continue;let t="YYYY-MM-DD HH";switch(i[0].period){case"day":t="YYYY-MM-DD";break;case"week":t="YYYY-MM-ww";break;case"month":t="YYYY-MM";break;case"year":t="YYYY"}const o=n.time.date().format(t);a(v[e],i,n=>n&&{level:e,date:n,currentDate:o,currentDateFormat:t},f),e++}r()})),o(()=>{v.forEach(t=>t.forEach(t=>t.destroy()))}),h.push(t=>{i.update("$data.elements.chart-calendar",t)});const y=s.create(h,d),b=n.generateSlots(u,t,e);return()=>b.html("outer",l`
        <div class=${p} data-actions=${y} style=${g}>
          ${b.html("inner",v.map((t,e)=>l`
                <div class=${p+"-dates "+p+"-dates--level-"+e}>
                  ${b.html("content",t.map(t=>t.html()))}
                </div>
              `))}
        </div>
      `)}class qt extends Dt{constructor(t,e){super(),e.state.update("$data.elements.chart-calendar-dates",e=>(void 0===e&&(e=[]),e.includes(t)||e.push(t),e))}}function Jt(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,onChange:a,html:l,StyleMap:c,Detach:u}=t,h="chart-calendar-date",d=n.getActions(h),f=n.getClass(h);let p,m,g="";o(i.subscribe("config.chart.time",t=>p=t));const v=new c({width:"0px"});let y="";function b(){if(!e)return;const t=i.get("config.chart.calendarLevels."+e.level);v.style.width=e.date.currentView.width+"px";const n=t.find(t=>+p.zoom<=+t.zoomTo);g=e.date.current?" gstc-current":e.date.next?" gstc-next":e.date.previous?" gstc-previous":"";let o=f+"-content "+f+"-content--"+e.date.period+g;n.classNames&&Array.isArray(n.classNames)?(o+=" "+n.classNames.join(" "),y=" "+n.classNames.join(" ")):y="",m=l` <div class=${o}>${e.date.formatted}</div> `,r()}let w=!1;const x=new u(()=>w),$=n.generateSlots(h,t,e);let D,P,_;const S={date:e.date,period:e.period,api:n,state:i};a((t,n)=>{if(n.leave)return w=!0,$.change(t,n),r();w=!1,P=e.level===p.level,_=P?f+"--main-date ":f+"--non-main-date ",e=t,S.date=e.date,S.period=e.period,D&&D(),D=i.subscribeAll(["$data.chart.time","config.chart.calendarLevels"],b,{bulk:!0}),$.change(t,n)}),o(()=>{D()}),d.includes(qt)||d.push(qt);const M=s.create(d,S);return()=>$.html("outer",l`
        <div
          detach=${x}
          class=${f+" "+f+"--"+e.date.period+" "+_+f+"--level-"+e.level+g+y}
          style=${v}
          data-actions=${M}
        >
          ${$.html("content",m)}
        </div>
      `)}function Zt(t,e){const{api:n,state:i,onDestroy:o,Action:s,Actions:r,update:a,html:l,createComponent:c,StyleMap:u}=t,h="chart-timeline",d=Object.assign(Object.assign({},e),{api:n,state:i});let f,p,m;o(i.subscribe("config.components.ChartTimelineGrid",t=>{f&&f.destroy(),f=c(t)})),o(()=>{f&&f.destroy()}),o(i.subscribe("config.components.ChartTimelineItems",t=>{p&&p.destroy(),p=c(t)})),o(()=>{p&&p.destroy()}),o(i.subscribe("config.components.ListToggle",t=>{m&&m.destroy(),m=c(t)})),o(()=>{m&&m.destroy()});const g=n.generateSlots(h,t,e),v=n.getClass(h),y=n.getClass("chart-timeline-inner");let b;o(i.subscribe("config.list.toggle.display",t=>b=t));const w=new u({}),x=new u({});o(i.subscribeAll(["$data.innerHeight","config.scroll.vertical.offset","$data.chart.dimensions.width","$data.list.visibleRowsHeight","$data.chart.time.dates.day"],(function(){const t=i.get("$data.chart.dimensions.width"),e=i.get("$data.list.visibleRowsHeight");w.style.height=i.get("$data.innerHeight")+"px",w.style["--height"]=w.style.height,t?(w.style.width=t+"px",w.style["--width"]=t+"px"):(w.style.width="0px",w.style["--width"]="0px"),x.style.height=e+"px",x.style.width=t?t+"px":"0px";const n=i.get("config.scroll.vertical.offset")||0;x.style.transform=`translateY(-${n}px)`,a()})));let $=[];o(i.subscribe("config.actions.chart-timeline",t=>{$=t})),$.push(class extends s{constructor(t){super();i.get("$data.elements.chart-timeline")!==t&&i.update("$data.elements.chart-timeline",t)}});const D=r.create($,d);return()=>g.html("outer",l`
        <div class=${v} style=${w} data-actions=${D}>
          ${g.html("inner",l`
              <div class=${y} style=${x}>
                ${g.html("content",l` ${f.html()}${p.html()}${b?m.html():""} `)}
              </div>
            `)}
        </div>
      `)}class te{constructor(t,e){e.state.get("$data.elements.chart-timeline-grid")!==t&&e.state.update("$data.elements.chart-timeline-grid",t)}destroy(t,e){e.state.update("$data.elements",t=>(delete t["chart-timeline-grid"],t))}}function ee(t,e){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,reuseComponents:l,StyleMap:c}=t,u="chart-timeline-grid",h=n.getActions(u),d={api:n,state:i},f=i.get("config.components.ChartTimelineGridRow"),p=n.getClass(u);let m,g;o(i.subscribe("config.chart.grid.cell.onCreate",t=>m=t)),o(i.subscribe("config.debug",t=>g=t));const v=[];let y={};const b=new Map,w=new c({});function x(){g&&console.log("[grid.ts] generateCells");const e=i.get("$data.chart.dimensions.width"),o=i.get("$data.innerHeight"),s=i.get("config.scroll.vertical.offset")||0,r=i.get("$data.chart.time"),a=i.get("$data.chart.time.levels."+r.level);if(!a||0===a.length)return void i.update("$data.chart.grid",{rows:{},cells:{}});const l=i.get("$data.list.visibleRows");w.style.height=o+s+"px",w.style.width=e+"px";let c=0;y={};const u=n.getAllRows(),h=n.getRowsData(),d={};for(const i of l){const o=u[i],s=h[i];if(!o||!s){g&&console.warn("generateCells EMPTY ROW",{row:o,rowId:i,visibleRowsId:l,rows:u});continue}const r=[];for(const e of a){let i;b.has(e.leftGlobal)?i=b.get(e.leftGlobal):(i=n.time.date(e.leftGlobal).format("YYYY-MM-DDTHH-mm-ss"),b.set(e.leftGlobal,i));const a={id:o.id+"-"+i,time:e,row:o,rowData:s,top:c,vido:t,content:null};for(const t of m)a.content=t(a);d[a.id]=a,r.push(a.id)}y[i]={row:o,rowData:s,cells:r,top:c,width:e},c+=s.outerHeight}i.update("$data.chart.grid",{rows:y,cells:d})}o(i.subscribeAll(["$data.list.rowsHeight","$data.list.visibleRows;","$data.list.visibleRowsHeight","$data.chart.time.levels","$data.innerHeight","$data.chart.dimensions.width"],x,{bulk:!0})),o(i.subscribe("$data.list.rows.*.actualHeight",x,{bulk:!0})),o(i.subscribeAll(["$data.chart.grid","config.list.rows"],(function(){g&&console.log("[grid.ts] generate rows components");const t=n.getGridRows();l(v,t||[],t=>t,f,!1),r()}))),o(()=>{v.forEach(t=>t.destroy())}),h.push(te);const $=s.create(h,d),D=n.generateSlots(u,t,e);return()=>D.html("outer",a`
        <div class=${p} data-actions=${$} style=${w}>
          ${D.html("content",v.map(t=>t.html()))}
        </div>
      `)}class ne{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-grid-rows");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-grid-rows",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-grid-rows",e=>e.filter(e=>e!==t))}}function ie(t,e){const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,reuseComponents:c,onChange:u,StyleMap:h}=t,d="chart-timeline-grid-row",f=Object.assign(Object.assign({},e),{api:n,state:i});let p;o(i.subscribe("config.components.ChartTimelineGridRowCell",t=>p=t));const m=n.getActions(d);let g=n.getClass(d);const v=new h({width:e.width+"px",height:e.row.height+"px"},!0);let y=!1;const b=new s(()=>y),w=n.generateSlots(d,t,e),x=[];u((function(t,i){var o;if(i.leave||void 0===t.row)return y=!0,c(x,[],t=>t,p,!1),w.change(t,i),void a();y=!1,e=t,g=n.getClass(d,e.row.id);const s=n.getGridCells(e.cells);c(x,s,t=>t,p,!1),v.setStyle({}),v.style.height=e.rowData.outerHeight+"px",v.style.width=e.width+"px",(null===(o=null==e?void 0:e.row)||void 0===o?void 0:o.style)&&v.setStyle(Object.assign(Object.assign({},v.style),e.row.style));for(const t in e)f[t]=e[t];w.change(t,i)})),o((function(){x.forEach(t=>t.destroy())})),-1===m.indexOf(ne)&&m.push(ne);const $=r.create(m,f);return()=>w.html("outer",l`
        <div detach=${b} class=${g} data-actions=${$} style=${v}>
          ${w.html("content",x.map(t=>t.html()))}
        </div>
      `)}class oe{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-grid-row-cells");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-grid-row-cells",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-grid-row-cells",e=>e.filter(e=>e!==t),{only:[""]})}}function se(t,e){const{api:n,state:i,Detach:o,Actions:s,html:r,onChange:a,StyleMap:l}=t,c="chart-timeline-grid-row-cell",u=Object.assign(Object.assign({},e),{api:n,state:i});let h=!1;const d=new o(()=>h),f=n.getActions(c),p=n.generateSlots(c,t,e);let m;function g(t){m=n.getClass(c,e.id),t.current&&(m+=" current")}g(e.time);const v=new l({width:"",height:""});a((function(t,i){var o;if(i.leave||void 0===t.row)return h=!0,void p.change(t,i);h=!1,e=t;for(const t in e)u[t]=e[t];if(g(e.time),v.setStyle({}),!e||!e.row)return;const s=n.getRowData(e.row.id);v.style.width=((null===(o=null==e?void 0:e.time)||void 0===o?void 0:o.width)||0)+"px",v.style.height=((null==s?void 0:s.outerHeight)||0)+"px",e.row.style&&v.setStyle(Object.assign(Object.assign({},v.style),e.row.style)),p.change(e,i)})),f.push(oe);const y=s.create(f,u);return()=>p.html("outer",r`
        <div detach=${d} class=${m} data-actions=${y} style=${v}>
          ${p.html("content",e.content)}
        </div>
      `)}function ae(t,e={}){const{api:n,state:i,onDestroy:o,Actions:s,update:r,html:a,reuseComponents:l,StyleMap:c}=t,u="chart-timeline-items";let h,d;o(i.subscribe("config.actions."+u,t=>h=t)),o(i.subscribe("config.components.ChartTimelineItemsRow",t=>d=t));const f=n.getClass(u),p=new c({},!0);let m;o(i.subscribeAll(["$data.innerHeight","$data.chart.dimensions.width","config.scroll.vertical.offset"],(function(){const t=i.get("$data.chart.dimensions.width"),e=i.get("$data.innerHeight"),n=i.get("config.scroll.vertical.offset")||0;p.style.width=t+"px",p.style.height=e+n+"px"}))),o(i.subscribe("config.debug",t=>m=t));const g=[];o(i.subscribeAll(["$data.list.visibleRows","config.list.rows","config.components.ChartTimelineItemsRow","config.chart.items.*.rowId","config.chart.items.*.height","config.chart.items.*.time"],(function t(){i.mute(t),m&&console.log("[items.ts] Updating item & rows components.");const e=i.get("$data.list.visibleRows")||[],o=n.getRows(e),s=n.getRowsData();l(g,o,t=>({row:t,rowData:s[t.id]}),d,!1),r(),i.unmute(t)}),{bulk:!0})),o(()=>{g.forEach(t=>t.destroy())});const v=s.create(h,{api:n,state:i}),y=n.generateSlots(u,t,e);return()=>y.html("outer",a`
        <div class=${f} style=${p} data-actions=${v}>
          ${y.html("content",g.map(t=>t.html()))}
        </div>
      `)}class le{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-items-rows");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-items-rows",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-items-rows",e=>e.filter(e=>e!==t))}}function ce(t,e){const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,onChange:c,reuseComponents:u,StyleMap:h}=t,d=Object.assign(Object.assign({},e),{api:n,state:i});let f;o(i.subscribe("config.components.ChartTimelineItemsRowItem",t=>f=t));let p="";const m=[],g=new h({width:"",height:""},!0);let v=!1;const y=new s(()=>v);function b(t=e.rowData){const n=i.get("$data.chart");v=!1,g.style.width=n.dimensions.width+"px",e?(g.style.height=t.outerHeight+"px",g.style["--row-height"]=t.outerHeight+"px",a()):v=!0}function w(t,e){if(!t||!e)return v=!0,u(m,[],()=>null,f,!1),a();const i=e.items;if(void 0===i)return v=!0,u(m,[],()=>null,f,!1),a();const o=n.getItems(i);u(m,o,e=>({row:t,item:e}),f,!1),b(),a()}o(i.subscribe("$data.list.rows."+e.row.id,b));const x="chart-timeline-items-row";let $=n.getClass(x);const D=n.generateSlots(x,t,e);c((function(i,o){if(o.leave||!i||void 0===i.row)return v=!0,u(m,[],()=>null,f,!1),D.change(i,o),a();e=i,$=n.getClass(x,e.row.id);for(const t in e)d[t]=e[t];if(e.row.classNames){if(Array.isArray(e.row.classNames)&&e.row.classNames.length)p=$+" "+e.row.classNames.join(" ");else if("function"==typeof e.row.classNames){const n=e.row.classNames({row:e.row,vido:t});Array.isArray(n)&&n.length&&(p=$+" "+n.join(" "))}}else p=$;w(e.row,e.rowData),D.change(i,o),a()})),o(i.subscribe("$data.chart.dimensions.width",()=>w(e.row,e.rowData))),o(()=>{m.forEach(t=>t.destroy())});const P=n.getActions(x);P.push(le);const _=r.create(P,d);return()=>D.html("outer",l`
        <div detach=${y} class=${p} data-actions=${_} style=${g}>
          ${D.html("content",m.map(t=>t.html()))}
        </div>
      `)}class ue{constructor(t,e){let n=!1,i=e.state.get("$data.elements.chart-timeline-items-row-items");void 0===i&&(i=[],n=!0),i.includes(t)||(i.push(t),n=!0),n&&e.state.update("$data.elements.chart-timeline-items-row-items",i,{only:null})}destroy(t,e){e.state.update("$data.elements.chart-timeline-items-row-items",e=>e.filter(e=>e!==t))}}function he(t,e){const{api:n,state:i,onDestroy:o,Detach:s,Actions:r,update:a,html:l,onChange:c,unsafeHTML:u,StyleMap:h}=t;let d,f,p;o(i.subscribe("config.debug",t=>p=t));let m=0,g=0,v=!1,y="";const b=new h({width:"",height:"",left:"",top:""}),w=new h({}),x=new h({}),$={item:e.item,row:e.row,left:m,width:g,api:n,state:i},D="chart-timeline-items-row-item";let P,_;P=n.getClass(D),_=n.getClass(D+"-label");const S=n.generateSlots(D,t,e);let M,I=!1;function C(o=i.get("$data.chart.time")){var s;if(S.change(e,{leave:!1}),v||0===o.levels.length||!o.levels[o.level]||0===o.levels[o.level].length)return I=!0,a();if(!e.item)return I=!0,a();p&&(console.groupCollapsed("[items-row-item.ts] Update item (before)"),console.log({id:e.item.id,item:e.item}),console.trace(),console.groupEnd());const r=n.getItemData(e.item.id);if(m=r.position.actualLeft,g=r.actualWidth,e.item.time.end<=o.leftGlobal||e.item.time.start>=o.rightGlobal||g<=0)return I=!0,p&&console.log(`[items-row-item.ts] Item ${e.item.id} detached because of time or width.`,{itemTime:e.item.time,itemWidthPx:g}),r.detached=I,a();if(y=P,e.item.time.start<o.leftGlobal?(w.style.display="flex",y+=" "+n.getClass(D+"--left-cut",e.row.id+"-"+e.item.id)):w.style.display="none",r.position.right>o.width?(x.style.display="flex",y+=" "+n.getClass(D+"--right-cut",e.row.id+"-"+e.item.id)):x.style.display="none",e.item.classNames)if(Array.isArray(e.item.classNames)&&e.item.classNames.length)y+=" "+e.item.classNames.join(" ");else if("function"==typeof e.item.classNames){const n=e.item.classNames({item:e.item,vido:t});Array.isArray(n)&&(y+=" "+n.join(" "))}const l=b.style.width,c=b.style.left,u=b.style.top,h=b.style.height;b.setStyle({});const d=n.isItemInViewport(e.item,o.leftGlobal,o.rightGlobal);I=!d,r.detached=I,d?(b.style.width=g+"px",b.style.left=m+"px",b.style.top=r.position.actualTop+"px",b.style.height=r.actualHeight+"px"):(b.style.width=l,b.style.left=c,b.style.top=u,b.style.height=h),(null===(s=null==e?void 0:e.item)||void 0===s?void 0:s.style)&&b.setStyle(Object.assign(Object.assign({},b.style),e.item.style)),$.left=m,$.width=g,p&&console.log("[items-row-item.ts] Update item (after)",{id:e.item.id,itemLeftPx:m,itemWidthPx:g,item:e.item}),a()}o(i.subscribe("config.chart.item.cutIcons",t=>{M={left:n.getSVGIconSrc(t.left),right:n.getSVGIconSrc(t.right)}}));const T=n.getClass(D+"-cut"),O=[];function E(){O.forEach(t=>t()),O.length=0}function R(t={}){if(E(),d&&(O.push(i.subscribe("config.chart.items."+d,n)),O.push(i.subscribe("$data.chart.items."+d,n)),e.item.linkedWith&&Array.isArray(e.item.linkedWith)))for(const t of e.item.linkedWith)O.push(i.subscribe("config.chart.items."+t,n)),O.push(i.subscribe("$data.chart.items."+t,n));function n(){i.mute(n),A(e,t),i.unmute(n)}}function A(t,i){if(i.leave||void 0===t.row||void 0===t.item)return v=!0,I=!0,S.change(t,i),a();I=!1,v=!1,(e=t).item.id===d&&e.row.id===f||(d=e.item.id,f=e.row.id,R(i),P=n.getClass(D,e.row.id+"-"+e.item.id),_=n.getClass(D+"-label",e.row.id+"-"+e.item.id),$.item=e.item,$.row=e.row),C()}R(),c(A),o(E);const k=n.getActions(D);o(i.subscribe("$data.chart.time",C)),k.push(ue);const L=r.create(k,$),N=new s(()=>I);function z(){return e.item?e.item.isHTML?e.item&&e.item.label?"function"==typeof e.item.label?u(e.item.label({item:e.item,vido:t})):u(e.item.label):null:e.item&&e.item.label?"function"==typeof e.item.label?e.item.label({item:e.item,vido:t}):e.item.label:null:null}return()=>S.html("outer",l`
        <div detach=${N} class=${y} data-actions=${L} style=${b}>
          ${S.html("inner",l`
              ${l`
    <div class=${T} style=${w}>
      <img src="${M.left}" class=${T+"-image"} />
    </div>
  `}
              <div class=${_}>${S.html("content",z())}</div>
              ${l`
    <div class=${T} style=${x}>
      <img src="${M.right}" class=${T+"-image"} />
    </div>
  `}
            `)}
        </div>
      `)}const de=["main","scroll-bar","list","list-column","list-column-header","list-column-header-resizer","list-column-row","list-column-row-expander","list-column-row-expander-toggle","list-toggle","chart","chart-calendar","chart-calendar-date","chart-timeline","chart-timeline-grid","chart-timeline-grid-row","chart-timeline-grid-row-cell","chart-timeline-items","chart-timeline-items-row","chart-timeline-items-row-item"];function fe(){const t={};return de.forEach(e=>t[e]=[]),t}function pe(){const t={};return de.forEach(e=>{t[e]={outer:[],inner:[],"container-outer":[],"container-inner":[],content:[]}}),t}var me=n((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",i="hour",o="day",s="week",r="month",a="quarter",l="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},p={s:f,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+f(i,2,"0")+":"+f(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(i,r),s=n-o<0,a=e.clone().add(i+(s?-1:1),r);return+(-(i+(n-o)/(s?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(u){return{M:r,y:l,w:s,d:o,D:c,h:i,m:n,s:e,ms:t,Q:a}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",g={};g[m]=d;var v=function(t){return t instanceof x},y=function(t,e,n){var i;if(!t)return m;if("string"==typeof t)g[t]&&(i=t),e&&(g[t]=e,i=t);else{var o=t.name;g[o]=t,i=o}return!n&&i&&(m=i),i||!n&&m},b=function(t,e){if(v(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new x(n)},w=p;w.l=y,w.i=v,w.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function d(t){this.$L=this.$L||y(t.locale,null,!0),this.parse(t)}var f=d.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(u);if(i){var o=i[2]-1||0,s=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return w},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var n=b(t);return this.startOf(e)<=n&&n<=this.endOf(e)},f.isAfter=function(t,e){return b(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<b(t)},f.$g=function(t,e,n){return w.u(t)?this[e]:this.set(n,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,a){var u=this,h=!!w.u(a)||a,d=w.p(t),f=function(t,e){var n=w.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return h?n:n.endOf(o)},p=function(t,e){return w.w(u.toDate()[t].apply(u.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case l:return h?f(1,0):f(31,11);case r:return h?f(1,g):f(0,g+1);case s:var b=this.$locale().weekStart||0,x=(m<b?m+7:m)-b;return f(h?v-x:v+(6-x),g);case o:case c:return p(y+"Hours",0);case i:return p(y+"Minutes",1);case n:return p(y+"Seconds",2);case e:return p(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(s,a){var u,h=w.p(s),d="set"+(this.$u?"UTC":""),f=(u={},u[o]=d+"Date",u[c]=d+"Date",u[r]=d+"Month",u[l]=d+"FullYear",u[i]=d+"Hours",u[n]=d+"Minutes",u[e]=d+"Seconds",u[t]=d+"Milliseconds",u)[h],p=h===o?this.$D+(a-this.$W):a;if(h===r||h===l){var m=this.clone().set(c,1);m.$d[f](p),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[w.p(t)]()},f.add=function(t,a){var c,u=this;t=Number(t);var h=w.p(a),d=function(e){var n=b(u);return w.w(n.date(n.date()+Math.round(e*t)),u)};if(h===r)return this.set(r,this.$M+t);if(h===l)return this.set(l,this.$y+t);if(h===o)return d(1);if(h===s)return d(7);var f=(c={},c[n]=6e4,c[i]=36e5,c[e]=1e3,c)[h]||1,p=this.$d.getTime()+t*f;return w.w(p,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),o=this.$locale(),s=this.$H,r=this.$m,a=this.$M,l=o.weekdays,c=o.months,u=function(t,i,o,s){return t&&(t[i]||t(e,n))||o[i].substr(0,s)},d=function(t){return w.s(s%12||12,t,"0")},f=o.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:w.s(a+1,2,"0"),MMM:u(o.monthsShort,a,c,3),MMMM:u(c,a),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:u(o.weekdaysMin,this.$W,l,2),ddd:u(o.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:w.s(s,2,"0"),h:d(1),hh:d(2),a:f(s,r,!0),A:f(s,r,!1),m:String(r),mm:w.s(r,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return n.replace(h,(function(t,e){return e||p[t]||i.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,c,u){var h,d=w.p(c),f=b(t),p=6e4*(f.utcOffset()-this.utcOffset()),m=this-f,g=w.m(this,f);return g=(h={},h[l]=g/12,h[r]=g,h[a]=g/3,h[s]=(m-p)/6048e5,h[o]=(m-p)/864e5,h[i]=m/36e5,h[n]=m/6e4,h[e]=m/1e3,h)[d]||m,u?g:w.a(g)},f.daysInMonth=function(){return this.endOf(r).$D},f.$locale=function(){return g[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=y(t,e,!0);return i&&(n.$L=i),n},f.clone=function(){return w.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),$=x.prototype;return b.prototype=$,[["$ms",t],["$s",e],["$m",n],["$H",i],["$W",o],["$M",r],["$y",l],["$D",c]].forEach((function(t){$[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),b.extend=function(t,e){return t(e,x,b),b},b.locale=y,b.isDayjs=v,b.unix=function(t){return b(1e3*t)},b.en=g[m],b.Ls=g,b}()})),ge=n((function(t,e){t.exports=function(t,e,n){var i=e.prototype;n.utc=function(t){return new e({date:t,utc:!0,args:arguments})},i.utc=function(t){var e=n(this.toDate(),{locale:this.$L,utc:!0});return t?e.add(this.utcOffset(),"minute"):e},i.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var o=i.parse;i.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var s=i.init;i.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else s.call(this)};var r=i.utcOffset;i.utcOffset=function(t,e){var n=this.$utils().u;if(n(t))return this.$u?0:n(this.$offset)?r.call(this):this.$offset;var i=Math.abs(t)<=16?60*t:t,o=this;if(e)return o.$offset=i,o.$u=0===t,o;if(0!==t){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(i+s,"minute")).$offset=i,o.$x.$localOffset=s}else o=this.utc();return o};var a=i.format;i.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return a.call(this,e)},i.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var l=i.toDate;i.toDate=function(t){return"s"===t&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var c=i.diff;i.diff=function(t,e,i){var o=this.local(),s=n(t).local();return c.call(o,s,e,i)}}}));class ve{constructor(t,e){this.utcMode=!1,this.state=t,this.api=e,this.dayjs=me,this.locale=t.get("config.locale"),this.utcMode=t.get("config.utcMode"),this.resetCurrentDate(),this.utcMode&&me.extend(ge),me.locale(this.locale,null,!0)}resetCurrentDate(){const t=me();this.currentDate={timestamp:t.valueOf(),second:t.startOf("second"),minute:t.startOf("minute"),hour:t.startOf("hour"),day:t.startOf("day"),week:t.startOf("week"),month:t.startOf("month"),year:t.startOf("year")}}date(t){const e=this.utcMode?me.utc:me;return t?e(t).locale(this.locale.name):e().locale(this.locale.name)}addAdditionalSpace(t){if(!t.additionalSpaceAdded&&t.additionalSpaces&&t.additionalSpaces[t.period]){t.additionalSpaceAdded=!0;const e=t.additionalSpaces[t.period];e.before&&(t.from=this.date(t.from).subtract(e.before,e.period).valueOf()),e.after&&(t.to=this.date(t.to).add(e.after,e.period).valueOf()),t.additionalSpaceAdded=!0}return t}recalculateFromTo(t){const e=t.period;(t=Object.assign({},t)).from=+t.from,t.to=+t.to,t.fromDate=this.date(t.from),t.toDate=this.date(t.to).endOf(e);let n=Number.MAX_SAFE_INTEGER,i=0;const o=this.state.get("config.chart.items");if(Object.keys(o).length>0&&(0===t.from||0===t.to)){for(const t in o){const e=o[t];e.time.start<n&&e.time.start&&(n=e.time.start),e.time.end>i&&(i=e.time.end)}0===t.from&&(t.from=this.date(n).startOf(e).valueOf()),0===t.to&&(t.to=this.date(i).endOf(e).valueOf()),t.fromDate=this.date(t.from),t.toDate=this.date(t.to).endOf(e)}return t.from=t.fromDate.startOf(e).valueOf(),t.to=t.toDate.endOf(e).valueOf(),t.additionalSpaceAdded||((t=this.addAdditionalSpace(t)).additionalSpaceAdded=!0),t}getCenter(t){return t.leftGlobal+Math.round((t.rightGlobal-t.leftGlobal)/2)}getGlobalOffsetPxFromDates(t,e=this.state.get("$data.chart.time")){const n=t.valueOf();if(!e.allDates||0===e.allDates.length)return-100;const i=e.allDates[e.level];if(!i)return-1;let o;for(let t=0,e=i.length;t<e;t++){const e=i[t];if(n<=e.rightGlobal){o=e;break}}if(o)return n<o.leftGlobal?o.leftPx:o.rightPx-(o.rightGlobal-n)/e.timePerPixel;{const n=t.valueOf();if(n<=e.leftGlobal)return 0;if(n>=e.rightGlobal)return e.totalViewDurationPx}}getViewOffsetPxFromDates(t,e=!0,n=this.state.get("$data.chart.time")){const i=this.getGlobalOffsetPxFromDates(t,n)-n.leftPx;return e&&this.limitOffsetPxToView(i),i}limitOffsetPxToView(t,e=this.state.get("$data.chart.time")){return t<0?0:t>e.width?e.width:t}findDateAtOffsetPx(t,e){return e.find(e=>e.leftPx>=t)}findDateAtTime(t,e){return e.find(e=>e.rightGlobal>=t)}getTimeFromViewOffsetPx(t,e=this.state.get("config.chart.time"),n=!0){const i=t+e.leftPx,o=e.allDates[e.level];if(i<0){let t,n=e.fromDate.subtract(1,e.period),o=0;for(let s=0;s<1e3;s++){const s=this.generatePeriodDates({leftDate:n,rightDate:n.add(1,e.period),period:e.period,time:e,level:this.state.get("config.chart.calendarLevels."+e.level),levelIndex:e.level,callOnDate:!0,callOnLevelDates:!1});if(s.length&&(t=s[0],o-=t.width,o<=i))return t.leftGlobal+(i-o)*e.timePerPixel;n=n.subtract(1,e.period).startOf(e.period)}}else if(i>e.totalViewDurationPx){let t,n,o=e.toDate.startOf("day").add(1,"day"),s=e.rightPx;for(let r=0;r<1e3;r++){const r=this.generatePeriodDates({leftDate:o,rightDate:o.add(1,e.period),period:e.period,time:e,level:this.state.get("config.chart.calendarLevels."+e.level),levelIndex:e.level,callOnDate:!0,callOnLevelDates:!1});if(r.length&&(t=r[0],s+=t.width,s>=i))return n&&(t=n),t.rightGlobal-(s-i)*e.timePerPixel;o=o.add(1,e.period).startOf(e.period),n=t}}for(let t=0,s=o.length;t<s;t++){const s=o[t];if(s.rightPx>=i){const t=s.rightGlobal-Math.round((s.rightPx-i)*e.timePerPixel);return n?t+1:t}}return 0}calculateScrollPosPxFromTime(t,e,n){if(n||(n=this.state.get("config.scroll.horizontal")),!n.maxPosPx)return 0;e||(e=this.state.get("$data.chart.time"));const i=this.findDateAtTime(t,e.allDates[e.level]);return Math.round((n.maxPosPx-n.innerSize)*i.leftPercent)}getCurrentFormatForLevel(t,e){return t.find(t=>+e.zoom<=+t.zoomTo)}generatePeriodDates({leftDate:t,rightDate:e,period:n,level:i,levelIndex:o,time:s,callOnDate:r,callOnLevelDates:a}){if(!s.timePerPixel)return[];const l=this.getCurrentFormatForLevel(i,s);let c=0;const u=Math.ceil(e.diff(t,n,!0));let h=[];for(let r=0;r<u;r++){let r=l.periodIncrement;r||(r=1),"function"==typeof r&&(r=r({currentDates:h,leftDate:t,rightDate:e,period:n,level:i,levelIndex:o,time:s,vido:this.api.vido,api:this.api}));const a=t.add(r-1,n).endOf(n);if(a.valueOf()>e.valueOf())break;const u={leftGlobal:t.valueOf(),leftGlobalDate:t,rightGlobalDate:a,rightGlobal:a.valueOf(),width:0,leftPx:0,rightPx:0,period:n,formatted:null,current:t.valueOf()===this.currentDate[n].valueOf(),previous:t.add(1,n).valueOf()===this.currentDate[n].valueOf(),next:t.subtract(1,n).valueOf()===this.currentDate[n].valueOf()},d=u.rightGlobal-u.leftGlobal;u.width=d/s.timePerPixel,u.leftPx=c,c+=u.width,u.rightPx=c,h.push(u),t=t.add(r||1,n)}if(r)for(let t=0,e=s.onDate.length;t<e;t++)h=h.map(e=>s.onDate[t]({date:e,format:l,time:s,level:i,levelIndex:o})).filter(t=>null!==t);if(a)for(let t=0,e=s.onLevelDates.length;t<e;t++)h=s.onLevelDates[t]({dates:h,format:l,time:s,level:i,levelIndex:o});return h}getDatesDiffPx(t,e,n,i=!0){if(t.valueOf()===e.valueOf())return 0;const o=n.allDates[n.level];if(0===o.length)return 0;let s=0,r=!1;if(e.valueOf()<t.valueOf()){const n=t;t=e,e=n,r=!0}let a=[];if(t.valueOf()<o[0].leftGlobal){const e=o[0].period,i=n.level,s=this.state.get("config.chart.calendarLevels."+i);a=this.generatePeriodDates({leftDate:t,rightDate:o[0].leftGlobalDate,period:e,level:s,levelIndex:i,time:n,callOnDate:!0,callOnLevelDates:!1})}a=[...a,...o];const l=o[o.length-1].leftGlobalDate;if(e.valueOf()>l.valueOf()){const t=o[0].period,i=n.level,s=this.state.get("config.chart.calendarLevels."+i),r=this.generatePeriodDates({leftDate:e,rightDate:l,period:t,level:s,levelIndex:i,time:n,callOnDate:!0,callOnLevelDates:!1});a=[...a,...r]}const c=this.state.get("config.chart.calendarLevels."+n.level),u=this.getCurrentFormatForLevel(c,n);for(const t of n.onLevelDates)a=t({dates:a,time:n,format:u,level:c,levelIndex:n.level});let h,d,f=!1;for(h of a){if(h.leftGlobal>=t.valueOf()&&(f=!0,d=h),h.rightGlobal>=e.valueOf())break;f&&(s+=h.width)}if(i){let i=(t.valueOf()-h.leftGlobal)/n.timePerPixel;d&&(i=(t.valueOf()-d.leftGlobal)/n.timePerPixel);const o=(e.valueOf()-h.leftGlobal)/n.timePerPixel-i;return r?-s-o:s+o}return r?-s:s}getLeftViewDate(t=this.state.get("$data.chart.time")){if(!t.levels||!t.levels.length)return null;const e=t.levels[t.level];return e.length?e[0]:null}getRightViewDate(t=this.state.get("$data.chart.time")){if(!t.levels||!t.levels.length||!t.levels[t.level])return null;const e=t.levels[t.level];return e.length?e[e.length-1]:null}getLowerPeriod(t){switch(t){case"year":return"month";case"month":return"week";case"week":return"day";case"day":return"hour";case"hour":return"minute";case"minute":return"second";case"second":return"millisecond";default:return t}}getHigherPeriod(t){switch(t){case"month":return"year";case"week":return"month";case"day":return"week";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second";default:return t}}}var ye=n((function(t,e){function n(t,e){void 0===e&&(e="*"),this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(var n=0,i=t.length;n<i;n+=1){var o=t[n];o===e&&(this.starCount+=1,n>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,n)),this.segments.push(o),this.segStartIndex=n+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}e.__esModule=!0,n.prototype.match=function(t){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===t;var e=t.length;if(e<this.minLength||e>this.maxLength)return!1;for(var n=this.segments.length-1,i=t.length-1,o=!1;;){var s=this.segments[n];if(n-=1,s===this.wchar)o=!0;else{var r=i+1-s.length,a=t.lastIndexOf(s,r);if(-1===a||a>r)return!1;if(o)i=a-1,o=!1;else{if(a!==r)return!1;i-=s.length}}if(0>n)break}return!0},e.default=n})),be=n((function(e,n){var i=t&&t.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};function o(t,e,n,i){void 0===i&&(i=void 0),this.obj=t,this.delimeter=e,this.wildcard=n,this.is_match=i}n.__esModule=!0,o.prototype.simpleMatch=function(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;if(this.is_match)return this.is_match(t,e);var n=t.indexOf(this.wildcard);if(n>-1){var i=t.substr(n+1);if(0===n||e.substring(0,n)===t.substring(0,n)){var o=i.length;return!(o>0)||e.substr(-o)===i}}return!1},o.prototype.match=function(t,e){return this.is_match?this.is_match(t,e):t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new ye.default(t).match(e)},o.prototype.handleArray=function(t,e,n,o,s){var r,a;void 0===s&&(s={});var l=t.indexOf(this.delimeter,n),c=!1;-1===l&&(c=!0,l=t.length);var u=t.substring(n,l),h=0;try{for(var d=i(e),f=d.next();!f.done;f=d.next()){var p=f.value,m=h.toString(),g=""===o?m:o+this.delimeter+h;(u===this.wildcard||u===m||this.simpleMatch(u,m))&&(c?s[g]=p:this.goFurther(t,p,l+1,g,s)),h++}}catch(t){r={error:t}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}return s},o.prototype.handleObject=function(t,e,n,i,o){void 0===o&&(o={});var s=t.indexOf(this.delimeter,n),r=!1;-1===s&&(r=!0,s=t.length);var a=t.substring(n,s);for(var l in e){l=l.toString();var c=""===i?l:i+this.delimeter+l;(a===this.wildcard||a===l||this.simpleMatch(a,l))&&(r?o[c]=e[l]:this.goFurther(t,e[l],s+1,c,o))}return o},o.prototype.goFurther=function(t,e,n,i,o){return void 0===o&&(o={}),Array.isArray(e)?this.handleArray(t,e,n,i,o):this.handleObject(t,e,n,i,o)},o.prototype.get=function(t){return this.goFurther(t,this.obj,0,"")},n.default=o})),we=n((function(e,n){var i=t&&t.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};n.__esModule=!0;var o=function(){function t(){}return t.get=function(t,e,n){var o,s;if(void 0===n&&(n=!1),e){var r=e;try{for(var a=i(t),l=a.next();!l.done;l=a.next()){var c=l.value;if(r.hasOwnProperty(c))r=r[c];else{if(!n)return;r[c]={},r=r[c]}}}catch(t){o={error:t}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return r}},t.set=function(e,n,i){if(i){if(0!==e.length){var o=e.slice(),s=o.pop(),r=t.get(o,i,!0);return"object"==typeof r&&(r[s]=n),n}for(var a in n)i[a]=n[a]}},t}();n.default=o}));let xe,$e=0,De=null;function Pe(){return null!==De&&De.buffer===xe.memory.buffer||(De=new Uint8Array(xe.memory.buffer)),De}let _e=new TextEncoder("utf-8");const Se="function"==typeof _e.encodeInto?function(t,e){return _e.encodeInto(t,e)}:function(t,e){const n=_e.encode(t);return e.set(n),{read:t.length,written:n.length}};function Me(t,e,n){if(void 0===n){const n=_e.encode(t),i=e(n.length);return Pe().subarray(i,i+n.length).set(n),$e=n.length,i}let i=t.length,o=e(i);const s=Pe();let r=0;for(;r<i;r++){const e=t.charCodeAt(r);if(e>127)break;s[o+r]=e}if(r!==i){0!==r&&(t=t.slice(r)),o=n(o,i,i=r+3*t.length);const e=Pe().subarray(o+r,o+i);r+=Se(t,e).written}return $e=r,o}var Ie=i(Object.freeze({__proto__:null,is_match:function(t,e){var n=Me(t,xe.__wbindgen_malloc,xe.__wbindgen_realloc),i=$e,o=Me(e,xe.__wbindgen_malloc,xe.__wbindgen_realloc),s=$e;return 0!==xe.is_match(n,i,o,s)},default:async function t(e){("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:i}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await e,{});return xe=n.exports,t.__wbindgen_wasm_module=i,xe}})),Ce=e(n((function(e,n){var i=t&&t.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=t&&t.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(r,a)}l((i=i.apply(t,e||[])).next())}))},s=t&&t.__generator||function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},r=t&&t.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=t&&t.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,s=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)r.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return r},l=t&&t.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};function c(t,e){console.debug(t,e)}n.__esModule=!0;var u={bulk:!1,debug:!1,source:"",data:void 0,queue:!1},h={only:[],source:"",debug:!1,data:void 0,queue:!1,force:!1},d=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.jobsRunning=0,this.updateQueue=[],this.subscribeQueue=[],this.listenersIgnoreCache=new WeakMap,this.destroyed=!1,this.queueRuns=0,this.lastExecs=new WeakMap,this.listeners=new Map,this.waitingListeners=new Map,this.data=t,this.options=i({},{delimiter:".",useMute:!0,notRecursive:";",param:":",wildcard:"*",experimentalMatch:!1,queue:!1,maxSimultaneousJobs:1e3,maxQueueRuns:1e3,log:c,Promise:Promise},e),this.id=0,this.pathGet=we.default.get,this.pathSet=we.default.set,e.Promise?this.resolved=e.Promise.resolve():this.resolved=Promise.resolve(),this.muted=new Set,this.mutedListeners=new Set,this.scan=new be.default(this.data,this.options.delimiter,this.options.wildcard),this.destroyed=!1}return t.prototype.loadWasmMatcher=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,Ie.default(t)];case 1:return e.sent(),this.is_match=Ie.is_match,this.scan=new be.default(this.data,this.options.delimiter,this.options.wildcard,this.is_match),[2]}}))}))},t.prototype.same=function(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t},t.prototype.getListeners=function(){return this.listeners},t.prototype.destroy=function(){this.destroyed=!0,this.data=void 0,this.listeners=new Map,this.updateQueue=[],this.jobsRunning=0},t.prototype.match=function(t,e){return this.is_match?this.is_match(t,e):t===e||(t===this.options.wildcard||e===this.options.wildcard||this.scan.match(t,e))},t.prototype.getIndicesOf=function(t,e){var n=t.length;if(0==n)return[];for(var i,o=0,s=[];(i=e.indexOf(t,o))>-1;)s.push(i),o=i+n;return s},t.prototype.getIndicesCount=function(t,e){var n=t.length;if(0==n)return 0;for(var i,o=0,s=0;(i=e.indexOf(t,o))>-1;)s++,o=i+n;return s},t.prototype.cutPath=function(t,e){t=this.cleanNotRecursivePath(t),e=this.cleanNotRecursivePath(e);var n=this.getIndicesCount(this.options.delimiter,e),i=this.getIndicesOf(this.options.delimiter,t);return t.substr(0,i[n])},t.prototype.trimPath=function(t){return(t=this.cleanNotRecursivePath(t)).charAt(0)===this.options.delimiter?t.substr(1):t},t.prototype.split=function(t){return""===t?[]:t.split(this.options.delimiter)},t.prototype.isWildcard=function(t){return t.includes(this.options.wildcard)||this.hasParams(t)},t.prototype.isNotRecursive=function(t){return t.endsWith(this.options.notRecursive)},t.prototype.cleanNotRecursivePath=function(t){return this.isNotRecursive(t)?t.substring(0,t.length-1):t},t.prototype.hasParams=function(t){return t.includes(this.options.param)},t.prototype.getParamsInfo=function(t){var e,n,i={replaced:"",original:t,params:{}},o=0,s=[];try{for(var a=r(this.split(t)),l=a.next();!l.done;l=a.next()){var c=l.value;i.params[o]={original:c,replaced:"",name:""};var u=new RegExp("\\"+this.options.param+"([^\\"+this.options.delimiter+"\\"+this.options.param+"]+)","g"),h=u.exec(c);h?(i.params[o].name=h[1],u.lastIndex=0,i.params[o].replaced=c.replace(u,this.options.wildcard),s.push(i.params[o].replaced),o++):(delete i.params[o],s.push(c),o++)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i.replaced=s.join(this.options.delimiter),i},t.prototype.getParams=function(t,e){if(t){var n=this.split(e),i={};for(var o in t.params){i[t.params[o].name]=n[o]}return i}},t.prototype.waitForAll=function(t,e){var n,i,o={};try{for(var s=r(t),a=s.next();!a.done;a=s.next()){var l=a.value;o[l]={dirty:!1},this.hasParams(l)&&(o[l].paramsInfo=this.getParamsInfo(l)),o[l].isWildcard=this.isWildcard(l),o[l].isRecursive=!this.isNotRecursive(l)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return this.waitingListeners.set(t,{fn:e,paths:o}),e(o),function(){this.waitingListeners.delete(t)}},t.prototype.executeWaitingListeners=function(t){var e,n;if(!this.destroyed)try{for(var i=r(this.waitingListeners.values()),o=i.next();!o.done;o=i.next()){var s=o.value,a=s.fn,l=s.paths,c=0,u=0;for(var h in l){var d=l[h],f=!1;d.isRecursive&&(t=this.cutPath(t,h)),d.isWildcard&&this.match(h,t)&&(f=!0),t===h&&(f=!0),f&&(d.dirty=!0),d.dirty&&c++,u++}c===u&&a(l)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.subscribeAll=function(t,e,n){var i,o;if(void 0===n&&(n=u),this.destroyed)return function(){};var s=[];try{for(var a=r(t),l=a.next();!l.done;l=a.next()){var c=l.value;s.push(this.subscribe(c,e,n))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return function(){var t,e;try{for(var n=r(s),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}},t.prototype.getCleanListenersCollection=function(t){return void 0===t&&(t={}),i({listeners:new Map,isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,originalPath:void 0,count:0},t)},t.prototype.getCleanListener=function(t,e){return void 0===e&&(e=u),{fn:t,options:i({},u,e)}},t.prototype.getListenerCollectionMatch=function(t,e,n){t=this.cleanNotRecursivePath(t);var i=this;return function(o){return e&&(o=i.cutPath(o,t)),!(!n||!i.match(t,o))||t===o}},t.prototype.getListenersCollection=function(t,e){if(this.listeners.has(t)){var n=this.listeners.get(t);return n.listeners.set(++this.id,e),e.id=this.id,n}var o,s=this.hasParams(t);s&&(o=this.getParamsInfo(t));var r={isRecursive:!this.isNotRecursive(t),isWildcard:this.isWildcard(t),hasParams:s,paramsInfo:o,originalPath:t,path:s?o.replaced:t},a=this.getCleanListenersCollection(i({},r,{match:this.getListenerCollectionMatch(r.path,r.isRecursive,r.isWildcard)}));return this.id++,a.listeners.set(this.id,e),e.id=this.id,this.listeners.set(r.originalPath,a),a},t.prototype.subscribe=function(t,e,n,i){if(void 0===n&&(n=u),void 0===i&&(i="subscribe"),this.destroyed)return function(){};this.jobsRunning++;var o=this.getCleanListener(e,n);this.listenersIgnoreCache.set(o,{truthy:[],falsy:[]});var s=this.getListenersCollection(t,o);s.count++;var r=this.cleanNotRecursivePath(s.path);if(s.isWildcard){var a=this.scan.get(r);if(n.bulk){var l=[];for(var c in a)this.isMuted(c)||l.push({path:c,params:this.getParams(s.paramsInfo,c),value:a[c]});this.isMuted(e)||e(l,{type:i,listener:o,listenersCollection:s,path:{listener:t,update:void 0,resolved:void 0},options:n,params:void 0})}else for(var c in a)this.isMuted(c)||this.isMuted(e)||e(a[c],{type:i,listener:o,listenersCollection:s,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(c)},params:this.getParams(s.paramsInfo,c),options:n})}else this.isMuted(r)||this.isMuted(e)||e(this.pathGet(this.split(r),this.data),{type:i,listener:o,listenersCollection:s,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(s.paramsInfo,r),options:n});return this.debugSubscribe(o,s,t),this.jobsRunning--,this.unsubscribe(t,this.id)},t.prototype.unsubscribe=function(t,e){var n=this.listeners,i=n.get(t);return function(){i.listeners.delete(e),i.count--,0===i.count&&n.delete(t)}},t.prototype.runQueuedListeners=function(){var t=this;if(!this.destroyed&&0!==this.subscribeQueue.length)if(0===this.jobsRunning){this.queueRuns=0;for(var e=l(this.subscribeQueue),n=0,i=e.length;n<i;n++)e[n]();this.subscribeQueue.length=0}else{if(this.queueRuns++,this.queueRuns>=this.options.maxQueueRuns)throw this.queueRuns=0,new Error("Maximal number of queue runs exhausted.");Promise.resolve().then((function(){return t.runQueuedListeners()})).catch((function(t){throw t}))}},t.prototype.getQueueNotifyListeners=function(t,e){var n,o,s,a,l=this;for(var c in void 0===e&&(e=[]),t)if(!this.isMuted(c)){var u=t[c],h=u.single,d=u.bulk,f=function(t){var n,i,o=!1;try{for(var s=(n=void 0,r(e)),a=s.next();!a.done;a=s.next()){if(a.value.id===t.listener.id){o=!0;break}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}if(o)return"continue";var l=p.debugTime(t);p.isMuted(t.listener.fn)||(t.listener.options.queue&&p.jobsRunning?p.subscribeQueue.push((function(){t.listener.fn(t.value(),t.eventInfo)})):e.push({id:t.listener.id,originalFn:t.listener.fn,fn:function(){t.listener.fn(t.value(),t.eventInfo)}})),p.debugListener(l,t)},p=this;try{for(var m=(n=void 0,r(h)),g=m.next();!g.done;g=m.next()){f(g.value)}}catch(t){n={error:t}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(n)throw n.error}}var v=function(t){var n,o,s,a,c=!1;try{for(var u=(n=void 0,r(e)),h=u.next();!h.done;h=u.next()){if(h.value.id===t.listener.id){c=!0;break}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}if(c)return"continue";var d=y.debugTime(t),f=[];try{for(var p=(s=void 0,r(t.value)),m=p.next();!m.done;m=p.next()){var g=m.value;f.push(i({},g,{value:g.value()}))}}catch(t){s={error:t}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}y.isMuted(t.listener.fn)||(t.listener.options.queue&&y.jobsRunning?y.subscribeQueue.push((function(){return!l.jobsRunning&&(t.listener.fn(f,t.eventInfo),!0)})):e.push({id:t.listener.id,originalFn:t.listener.fn,fn:function(){t.listener.fn(f,t.eventInfo)}})),y.debugListener(d,t)},y=this;try{for(var b=(s=void 0,r(d)),w=b.next();!w.done;w=b.next()){v(w.value)}}catch(t){s={error:t}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}}return Promise.resolve().then((function(){return l.runQueuedListeners()})),e},t.prototype.shouldIgnore=function(t,e){var n,i;if(!t.options.ignore)return!1;try{for(var o=r(t.options.ignore),s=o.next();!s.done;s=o.next()){var a=s.value;if(e.startsWith(a))return!0;if(this.is_match&&this.is_match(a,e))return!0;var l=this.cutPath(e,a);if(this.match(a,l))return!0}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.getSubscribedListeners=function(t,e,n,o,s){var l,c,u=this;void 0===o&&(o="update"),void 0===s&&(s=null),n=i({},h,n);var d={},f=function(i,a){var l,c;if(d[i]={single:[],bulk:[],bulkData:[]},a.match(t)){var h=a.paramsInfo?p.getParams(a.paramsInfo,t):void 0,f=p.cutPath(t,i),m=a.isRecursive||a.isWildcard?function(){return u.get(f)}:function(){return e},g=[{value:m,path:t,params:h}];try{for(var v=(l=void 0,r(a.listeners.values())),y=v.next();!y.done;y=v.next()){var b=y.value;p.shouldIgnore(b,t)||(b.options.bulk?d[i].bulk.push({listener:b,listenersCollection:a,eventInfo:{type:o,listener:b,path:{listener:i,update:s||t,resolved:void 0},params:h,options:n},value:g}):d[i].single.push({listener:b,listenersCollection:a,eventInfo:{type:o,listener:b,path:{listener:i,update:s||t,resolved:p.cleanNotRecursivePath(t)},params:h,options:n},value:m}))}}catch(t){l={error:t}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}}},p=this;try{for(var m=r(this.listeners),g=m.next();!g.done;g=m.next()){var v=a(g.value,2);f(v[0],v[1])}}catch(t){l={error:t}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}return d},t.prototype.notifySubscribedListeners=function(t,e,n,i,o){return void 0===i&&(i="update"),void 0===o&&(o=null),this.getQueueNotifyListeners(this.getSubscribedListeners(t,e,n,i,o))},t.prototype.getNestedListeners=function(t,e,n,i,o){var s,l;void 0===i&&(i="update"),void 0===o&&(o=null);var c={},u=function(s,l){c[s]={single:[],bulk:[]};var u=h.cutPath(s,t);if(h.match(u,t)){var d=h.trimPath(s.substr(u.length)),f=new be.default(e,h.options.delimiter,h.options.wildcard).get(d),p=l.paramsInfo?h.getParams(l.paramsInfo,t):void 0,m=[],g={},v=function(e){var u,d,v=function(){return f[e]},y=[t,e].join(h.options.delimiter);try{for(var b=(u=void 0,r(l.listeners)),w=b.next();!w.done;w=b.next()){var x=a(w.value,2),$=x[0],D=x[1],P={type:i,listener:D,listenersCollection:l,path:{listener:s,update:o||t,resolved:h.cleanNotRecursivePath(y)},params:p,options:n};h.shouldIgnore(D,t)||(D.options.bulk?(m.push({value:v,path:y,params:p}),g[$]=D):c[s].single.push({listener:D,listenersCollection:l,eventInfo:P,value:v}))}}catch(t){u={error:t}}finally{try{w&&!w.done&&(d=b.return)&&d.call(b)}finally{if(u)throw u.error}}};for(var y in f)v(y);for(var b in g){var w=g[b],x={type:i,listener:w,listenersCollection:l,path:{listener:s,update:t,resolved:void 0},options:n,params:p};c[s].bulk.push({listener:w,listenersCollection:l,eventInfo:x,value:m})}}},h=this;try{for(var d=r(this.listeners),f=d.next();!f.done;f=d.next()){var p=a(f.value,2);u(p[0],p[1])}}catch(t){s={error:t}}finally{try{f&&!f.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return c},t.prototype.notifyNestedListeners=function(t,e,n,i,o,s){return void 0===i&&(i="update"),void 0===s&&(s=null),this.getQueueNotifyListeners(this.getNestedListeners(t,e,n,i,s),o)},t.prototype.getNotifyOnlyListeners=function(t,e,n,i,o){var s,l;void 0===i&&(i="update"),void 0===o&&(o=null);var c={};if("object"!=typeof n.only||!Array.isArray(n.only)||void 0===n.only[0]||!this.canBeNested(e))return c;var u=function(s){var l=new be.default(e,h.options.delimiter,h.options.wildcard).get(s);c[s]={bulk:[],single:[]};var u=function(e){var u,d,f,p,m=t+h.options.delimiter+e;try{for(var g=(u=void 0,r(h.listeners)),v=g.next();!v.done;v=g.next()){var y=a(v.value,2),b=y[0],w=y[1],x=w.paramsInfo?h.getParams(w.paramsInfo,m):void 0;if(h.match(b,m)){var $=function(){return l[e]},D=[{value:$,path:m,params:x}],P=function(e){var r={type:i,listener:e,listenersCollection:w,path:{listener:b,update:o||t,resolved:h.cleanNotRecursivePath(m)},params:x,options:n};if(h.shouldIgnore(e,t))return"continue";e.options.bulk?c[s].bulk.some((function(t){return t.listener===e}))||c[s].bulk.push({listener:e,listenersCollection:w,eventInfo:r,value:D}):c[s].single.push({listener:e,listenersCollection:w,eventInfo:r,value:$})};try{for(var _=(f=void 0,r(w.listeners.values())),S=_.next();!S.done;S=_.next()){P(S.value)}}catch(t){f={error:t}}finally{try{S&&!S.done&&(p=_.return)&&p.call(_)}finally{if(f)throw f.error}}}}}catch(t){u={error:t}}finally{try{v&&!v.done&&(d=g.return)&&d.call(g)}finally{if(u)throw u.error}}};for(var d in l)u(d)},h=this;try{for(var d=r(n.only),f=d.next();!f.done;f=d.next()){u(f.value)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return c},t.prototype.sortAndRunQueue=function(t,e){var n,i;t.sort((function(t,e){return t.id-e.id})),this.options.debug&&console.log("[deep-state-observer] queue for "+e,t);try{for(var o=r(t),s=o.next();!s.done;s=o.next()){s.value.fn()}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.notifyOnly=function(t,e,n,i,o){void 0===i&&(i="update"),void 0===o&&(o="");var s=this.getQueueNotifyListeners(this.getNotifyOnlyListeners(t,e,n,i,o));this.sortAndRunQueue(s,t)},t.prototype.canBeNested=function(t){return"object"==typeof t&&null!==t},t.prototype.getUpdateValues=function(t,e,n){var i=n;return"function"==typeof n&&(i=n(this.pathGet(e,this.data))),{newValue:i,oldValue:t}},t.prototype.wildcardNotify=function(t,e){var n,i,o,s,a=[];try{for(var l=r(t),c=l.next();!c.done;c=l.next()){var u=c.value;this.getQueueNotifyListeners(u,a)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}try{for(var h=r(e),d=h.next();!d.done;d=h.next()){var f=d.value;this.executeWaitingListeners(f)}}catch(t){o={error:t}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}return this.jobsRunning--,a},t.prototype.wildcardUpdate=function(t,e,n,o){void 0===n&&(n=h),void 0===o&&(o=!1),++this.jobsRunning,n=i({},h,n);var s=this.scan.get(t),r={};for(var a in s){var l=this.split(a),c=this.getUpdateValues(s[a],l,e),u=c.oldValue,d=c.newValue;this.same(d,u)&&!n.force||(this.pathSet(l,d,this.data),r[a]=d)}var f=[],p=[];for(var a in r){d=r[a];n.only.length?f.push(this.getNotifyOnlyListeners(a,d,n,"update",t)):(f.push(this.getSubscribedListeners(a,d,n,"update",t)),this.canBeNested(d)&&f.push(this.getNestedListeners(a,d,n,"update",t))),n.debug&&this.options.log("Wildcard update",{path:a,newValue:d}),p.push(a)}if(o){var m=this;return function(){var e=m.wildcardNotify(f,p);m.sortAndRunQueue(e,t)}}var g=this.wildcardNotify(f,p);this.sortAndRunQueue(g,t)},t.prototype.runUpdateQueue=function(){if(!this.destroyed)for(;this.updateQueue.length&&this.updateQueue.length<this.options.maxSimultaneousJobs;){var t=this.updateQueue.shift();t.options.queue=!1,this.update(t.updatePath,t.fnOrValue,t.options,t.multi)}},t.prototype.updateNotify=function(t,e,n){var i=this.notifySubscribedListeners(t,e,n);this.canBeNested(e)&&this.notifyNestedListeners(t,e,n,"update",i),this.sortAndRunQueue(i,t),this.executeWaitingListeners(t)},t.prototype.updateNotifyOnly=function(t,e,n){this.notifyOnly(t,e,n),this.executeWaitingListeners(t)},t.prototype.update=function(t,e,n,o){var s=this;if(void 0===n&&(n=i({},h)),void 0===o&&(o=!1),!this.destroyed){var r=this.jobsRunning;if((this.options.queue||n.queue)&&r){if(r>this.options.maxSimultaneousJobs)throw new Error("Maximal simultaneous jobs limit reached.");this.updateQueue.push({updatePath:t,fnOrValue:e,options:n,multi:o});var a=Promise.resolve().then((function(){s.runUpdateQueue()}));return o?function(){return a}:a}if(this.isWildcard(t))return this.wildcardUpdate(t,e,n,o);++this.jobsRunning;var l=this.split(t),c=this.getUpdateValues(this.pathGet(l,this.data),l,e),u=c.oldValue,d=c.newValue;if(n.debug&&this.options.log("Updating "+t+" "+(n.source?"from "+n.source:""),{oldValue:u,newValue:d}),this.same(d,u)&&!n.force)return--this.jobsRunning,o?function(){return d}:d;if(this.pathSet(l,d,this.data),null===(n=i({},h,n)).only)return--this.jobsRunning,o?function(){}:d;if(n.only.length){if(--this.jobsRunning,o){var f=this;return function(){return f.updateNotifyOnly(t,d,n)}}return this.updateNotifyOnly(t,d,n),d}if(o){--this.jobsRunning;var p=this;return function(){return p.updateNotify(t,d,n)}}return this.updateNotify(t,d,n),--this.jobsRunning,d}},t.prototype.multi=function(){if(this.destroyed)return{update:function(){},done:function(){}};var t=this,e=[];return{update:function(n,i,o){return void 0===o&&(o=h),e.push(t.update(n,i,o,!0)),this},done:function(){for(var t=0,n=e.length;t<n;t++)e[t]();e.length=0}}},t.prototype.get=function(t){if(void 0===t&&(t=void 0),!this.destroyed)return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)},t.prototype.last=function(t){var e=this,n=this.lastExecs.get(t);n||(n={calls:0},this.lastExecs.set(t,n));var i=++n.calls;this.resolved.then((function(){i===n.calls&&(e.lastExecs.set(t,{calls:0}),t())}))},t.prototype.isMuted=function(t){var e,n;if(!this.options.useMute)return!1;if("function"==typeof t)return this.isMutedListener(t);try{for(var i=r(this.muted),o=i.next();!o.done;o=i.next()){var s=o.value,a=!this.isNotRecursive(s),l=this.trimPath(s);if(this.match(t,l))return!0;if(this.match(l,t))return!0;if(a){var c=this.cutPath(l,t);if(this.match(c,s))return!0;if(this.match(s,c))return!0}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return!1},t.prototype.isMutedListener=function(t){return this.mutedListeners.has(t)},t.prototype.mute=function(t){if("function"==typeof t)return this.mutedListeners.add(t);this.muted.add(t)},t.prototype.unmute=function(t){if("function"==typeof t)return this.mutedListeners.delete(t);this.muted.delete(t)},t.prototype.debugSubscribe=function(t,e,n){t.options.debug&&this.options.log("listener subscribed",{listenerPath:n,listener:t,listenersCollection:e})},t.prototype.debugListener=function(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})},t.prototype.debugTime=function(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0},t}();n.default=d})));class Te extends Rt{constructor(t,e,n){super(e,n),this.subs=[],this.name=t,this.subs.push(e.state.subscribe("config.slots."+t,this.setComponents,{queue:!0}))}destroy(){this.subs.forEach(t=>t()),super.destroy()}getName(){return this.name}}function Oe(t,e,n){return new Te(t,e,n)}const Ee=Et.mergeDeep,Re="gstc";function Ae(t,e=""){let n="gstc__"+t;return t===Re&&(n=Re),e?`${n} ${n}--${e.replace(":","-")}`:n}function ke(t,e){let n="gstc__"+t;return t===Re&&(n=Re),`${n}--${e}`}function Le(t){let e=function(t,e){return Et.mergeDeep(t,e)};"function"==typeof t.merge&&(e=t.merge);const n=function(){const t=[{zoomTo:17,period:"day",periodIncrement:1,classNames:["gstc-date-medium gstc-date-left"],format:({timeStart:t})=>t.format("DD MMMM YYYY (dddd)")},{zoomTo:23,period:"month",periodIncrement:1,format:({timeStart:t})=>t.format("MMMM YYYY")},{zoomTo:24,period:"month",periodIncrement:1,format:({timeStart:t})=>t.format("MMMM 'YY")},{zoomTo:25,period:"month",periodIncrement:1,format:({timeStart:t})=>t.format("MMM YYYY")},{zoomTo:27,period:"year",periodIncrement:1,format:({timeStart:t})=>t.format("YYYY")},{zoomTo:100,period:"year",periodIncrement:1,format:()=>null}],e=[{zoomTo:16,period:"hour",main:!0,periodIncrement:1,format:({timeStart:t})=>t.format("HH:mm")},{zoomTo:17,period:"hour",main:!0,periodIncrement:1,format:({timeStart:t})=>t.format("HH")},{zoomTo:19,period:"day",main:!0,periodIncrement:1,classNames:["gstc-date-medium"],format:({timeStart:t,className:e,vido:n})=>n.html`<span class="${e}-content gstc-date-bold">${t.format("DD")}</span> <span class="${e}-content gstc-date-thin">${t.format("dddd")}</span>`},{zoomTo:20,period:"day",main:!0,periodIncrement:1,format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("DD")}</div><div class="${n}-content gstc-date-small">${t.format("dddd")}</div>`},{zoomTo:21,period:"day",main:!0,periodIncrement:1,format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("DD")}</div><div class="${n}-content gstc-date-small">${t.format("ddd")}</div>`},{zoomTo:22,period:"day",main:!0,periodIncrement:1,classNames:["gstc-date-vertical"],format:({timeStart:t,className:e,vido:n})=>n.html`<div class="${e}-content gstc-date-top">${t.format("DD")}</div><div class="${e}-content gstc-date-extra-small">${t.format("ddd")}</div>`},{zoomTo:23,period:"week",main:!0,periodIncrement:1,format:({timeStart:t,timeEnd:e,className:n,vido:i})=>i.html`<div class="${n}-content gstc-date-top">${t.format("DD")} - ${e.format("DD")}</div><div class="${n}-content gstc-date-small gstc-date-thin">${t.format("ddd")} - ${e.format("dd")}</div>`},{zoomTo:25,period:"week",main:!0,periodIncrement:1,classNames:["gstc-date-vertical"],format:({timeStart:t,timeEnd:e,className:n,vido:i})=>i.html`<div class="${n}-content gstc-date-top gstc-date-small gstc-date-normal">${t.format("DD")}</div><div class="gstc-dash gstc-date-small">-</div><div class="${n}-content gstc-date-small gstc-date-normal">${e.format("DD")}</div>`},{zoomTo:26,period:"month",main:!0,periodIncrement:1,classNames:["gstc-date-month-level-1"],format:({timeStart:t,vido:e,className:n})=>e.html`<div class="${n}-content gstc-date-top">${t.format("MMM")}</div><div class="${n}-content gstc-date-small gstc-date-bottom">${t.format("MM")}</div>`},{zoomTo:27,period:"month",main:!0,periodIncrement:1,classNames:["gstc-date-vertical"],format:({timeStart:t,className:e,vido:n})=>n.html`<div class="${e}-content gstc-date-top">${t.format("MM")}</div><div class="${e}-content gstc-date-extra-small">${t.format("MMM")}</div>`},{zoomTo:28,period:"year",main:!0,periodIncrement:1,classNames:["gstc-date-big"],format:({timeStart:t})=>t.format("YYYY")},{zoomTo:29,period:"year",main:!0,periodIncrement:1,classNames:["gstc-date-medium"],format:({timeStart:t})=>t.format("YYYY")},{zoomTo:30,period:"year",main:!0,periodIncrement:1,classNames:["gstc-date-medium"],format:({timeStart:t})=>t.format("YY")},{zoomTo:100,period:"year",main:!0,periodIncrement:1,format:()=>null}];return{licenseKey:"",debug:!1,plugins:[],plugin:{},innerHeight:428,headerHeight:72,components:{Main:Nt,ScrollBar:zt,List:Ht,ListColumn:Gt,ListColumnHeader:Vt,ListColumnHeaderResizer:Wt,ListColumnRow:Bt,ListColumnRowExpander:Ft,ListColumnRowExpanderToggle:Xt,ListToggle:Ut,Chart:Kt,ChartCalendar:Qt,ChartCalendarDate:Jt,ChartTimeline:Zt,ChartTimelineGrid:ee,ChartTimelineGridRow:ie,ChartTimelineGridRowCell:se,ChartTimelineItems:ae,ChartTimelineItemsRow:ce,ChartTimelineItemsRowItem:he},slots:pe(),list:{rows:{},row:{height:40,gap:{top:0,bottom:0}},columns:{percent:100,resizer:{width:10,inRealTime:!0,dots:6},minWidth:50,data:{}},expander:{padding:18,size:20,icon:{width:16,height:16},icons:{child:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><ellipse ry="4" rx="4" id="svg_1" cy="12" cx="12" fill="#000000B0"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',closed:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>'}},toggle:{display:!0,icons:{open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path stroke="null" d="m16.406954,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m-0.343497,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path transform="rotate(-180 4.392796516418457,12) " stroke="null" d="m1.153809,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m9.773297,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>'}},sort:{compare:null,asc:!0,activeColumnId:null,icons:{up:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>',down:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>'}}},scroll:{bodyClassName:"gstc-scrolling",horizontal:{size:20,minInnerSize:40,data:null,posPx:0,maxPosPx:0,area:0,multiplier:3,offset:0,precise:!1},vertical:{size:20,minInnerSize:40,data:null,posPx:0,maxPosPx:0,area:0,multiplier:3,offset:0,precise:!1}},chart:{time:{period:"day",from:0,to:0,zoom:20,leftGlobal:0,centerGlobal:0,rightGlobal:0,levels:[],calculatedZoomMode:!1,onLevelDates:[],onCurrentViewLevelDates:[],onDate:[],allDates:[],additionalSpaceAdded:!1},calendarLevels:[t,e],grid:{cell:{onCreate:[]}},item:{gap:{top:4,bottom:4},top:0,height:32,minWidth:10,cutIcons:{left:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M20 9v6h-8v4.84L4.16 12L12 4.16V9h8z" fill="#ffffff"/><rect x="0" y="0" width="24" height="24" fill="rgba(0, 0, 0, 0)" /></svg>',right:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M4 15V9h8V4.16L19.84 12L12 19.84V15H4z" fill="#ffffff"/><rect x="0" y="0" width="24" height="24" fill="rgba(0, 0, 0, 0)" /></svg>'}},items:{},spacing:1},actions:fe(),locale:{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:t=>{const e=["th","st","nd","rd"],n=t%100;return`[${t}${e[(n-20)%10]||e[n]||e[0]}]`}},utcMode:!1,merge:(t,e)=>Et.mergeDeep({},t,e),useLast:!0,Promise:Promise,mute:[],version:"3.3.2"}}(),i=function(t,e,n){const i=n({},e.actions),o=n({},t.actions);let s=[...Object.keys(i),...Object.keys(o)];s=s.filter(t=>s.includes(t));const r={};for(const t of s)r[t]=[],void 0!==i[t]&&Array.isArray(i[t])&&(r[t]=[...i[t]]),void 0!==o[t]&&Array.isArray(o[t])&&(r[t]=[...r[t],...o[t]]);return delete t.actions,delete e.actions,r}(t,n,e),o={config:e(n,t)};return o.config.actions=i,o}const Ne={name:Re,GSTCID:t=>"gstcid-"+t,isGSTCID:t=>t.startsWith("gstcid-"),sourceID(t){return this.isGSTCID(t)?t.substr(7):t},fromArray(t){const e=this.GSTCID,n={};for(const i of t)i.id=e(i.id),"rowId"in i&&(i.rowId=e(i.rowId)),"parentId"in i&&(i.parentId=e(i.parentId)),n[i.id]=i;return n},stateFromConfig:function(t){return this.state=new Ce(Le(t),{delimiter:".",useMute:true,maxSimultaneousJobs:1e3,Promise:t.Promise,debug:!!t.debug})},wasmStateFromConfig:function(t,e="./wildcard_matcher_bg.wasm"){return kt(this,void 0,void 0,(function*(){return this.state=new Ce(Le(t),{delimiter:".",useMute:true,maxSimultaneousJobs:1e3}),yield this.state.loadWasmMatcher(e),this.state}))},merge:Ee,lithtml:X,html:X,date:t=>t?me(t):me(),setPeriod(t){return this.state.update("config.chart.time.period",t),this.state.get("config.chart.time.zoom")},dayjs:me};class ze{constructor(t){this.name=Re,this.debug=!1,this.plugins={},this.pluginsPositions=new Set,this.iconsCache={},this.unsubscribes=[],this.mutedMethods=new Set,this.generateSlots=Oe,this.mergeDeep=Ee,this.getClass=Ae,this.getId=ke,this.GSTCID=Ne.GSTCID.bind(this),this.isGSTCID=Ne.isGSTCID.bind(this),this.sourceID=Ne.sourceID.bind(this),this.allActions=[],this.state=t,this.time=new ve(this.state,this),this.unsubscribes.push(this.state.subscribe("config.debug",t=>this.debug=t)),this.debug&&(window.state=t)}getListenerPosition(t){for(const e of this.state.getListeners().values())for(const n of e.listeners)if(n[1].fn===t)return n[0]}setVido(t){this.vido=t}log(...t){this.debug&&console.log.call(console,...t)}pluginInitialized(t){this.pluginsPositions.add(t)}pluginDestroyed(t){this.pluginsPositions.delete(t)}clearPluginsPositions(){this.pluginsPositions.clear()}isPluginInitialized(t){return this.pluginsPositions.has(t)}getPluginPosition(t){return[...this.pluginsPositions].indexOf(t)}getPluginsPositions(){const t={};let e=0;for(const n of this.pluginsPositions)t[n]=e++;return t}isPluginInitializedBefore(t,e){return this.getPluginPosition(t)<this.getPluginPosition(e)}getActions(t){this.allActions.includes(t)||this.allActions.push(t);let e=this.state.get("config.actions."+t);return void 0===e&&(e=[]),e.slice()}isItemInViewport(t,e,n){if(!e||!n){const t=this.state.get("config.chart.time");e=t.leftGlobal,n=t.rightGlobal}return t.time.start<=n&&t.time.end>=e}getChildrenLinkedItemsIds(t,e,n=[]){const i=e[t];if(i.linkedWith&&i.linkedWith.length){n.includes(t)||n.push(t);for(const t of i.linkedWith){if(n.includes(t))continue;n.push(t);const i=e[t];i.linkedWith&&i.linkedWith.length&&this.getChildrenLinkedItemsIds(t,e,n)}}return n}collectAllLinkedItems(t,e){for(const n in t){const i=t[n];e[i.id].linkedWith=i.linkedWith||[]}const n=[];for(const t in e){if(n.includes(t))continue;const i=this.getChildrenLinkedItemsIds(t,e),o=Array.from(new Set([...e[t].linkedWith,...i]));e[t].linkedWith=[...o.filter(e=>e!==t)],n.includes(t)||n.push(t);for(const t of o)e[t].linkedWith=[...o.filter(e=>e!==t)],n.includes(t)||n.push(t)}}getChildrenDependantItemsIds(t,e,n=[]){if(t.dependant&&t.dependant.length)for(const i of t.dependant){if(n.includes(i))continue;n.push(i);const o=e[i];if(!o)throw new Error(`Dependant item not found [id:'${i}'] found in item [id:'${t.id}']`);o.dependant&&o.dependant.length&&this.getChildrenDependantItemsIds(o,e,n)}return n}getRow(t){return this.state.get("config.list.rows."+t)}getRows(t){if(!t.length)return[];const e=this.getAllRows(),n=[];for(const i of t)e[i]&&n.push(e[i]);return n}getAllRows(){return this.state.get("config.list.rows")}getVisibleRowsId(){return this.state.get("$data.list.visibleRows")}getRowsData(){return this.state.get("$data.list.rows")}setRowsData(t){this.state.update("$data.list.rows",t)}getRowData(t){return this.state.get("$data.list.rows."+t)}setRowData(t,e){this.state.update("$data.list.rows."+t,e)}getItem(t){return this.state.get("config.chart.items."+t)}getItems(t=[]){const e=[],n=this.getAllItems();for(const i of t)n[i]&&e.push(n[i]);return e}getAllItems(){return this.state.get("config.chart.items")}getItemData(t){return this.state.get("$data.chart.items."+t)}getItemsData(){return this.state.get("$data.chart.items")}setItemData(t,e){this.state.update("$data.chart.items."+t,t=>{for(const n in e)t[n]=e[n];return t})}setItemsData(t){this.state.update("$data.chart.items",t)}prepareDependantItems(t,e){return this.getChildrenDependantItemsIds(t,e).filter(e=>e!==t.id)}prepareItems(t){const e=this.state.get("config.chart.item.height"),n=this.getItemsData();for(let i in t){const o=t[i];i=String(i),o.id=i,n[o.id]||(n[o.id]={actualHeight:0,outerHeight:0,time:null,position:{left:0,actualLeft:0,right:0,actualRight:0,top:o.top||0,actualTop:o.top||0,viewTop:0},width:-1,actualWidth:-1,detached:!1,linkedWith:[],dependant:this.getChildrenDependantItemsIds(o,t)}),o.time.start=+o.time.start,o.time.end=+o.time.end,o.id=String(o.id);const s=this.state.get("config.chart.item");"number"!=typeof o.height&&(o.height=e),n[o.id].time={startDate:this.time.date(o.time.start),endDate:this.time.date(o.time.end)},n[o.id].actualHeight=o.height,"number"!=typeof o.top&&(o.top=0),o.gap||(o.gap={}),"number"!=typeof o.gap.top&&(o.gap.top=s.gap.top),"number"!=typeof o.gap.bottom&&(o.gap.bottom=s.gap.bottom),"number"!=typeof o.minWidth&&(o.minWidth=s.minWidth),n[o.id].outerHeight=n[o.id].actualHeight+o.gap.top+o.gap.bottom,n[o.id].position.actualTop=n[o.id].position.top+o.gap.top}return this.collectAllLinkedItems(t,n),this.setItemsData(n),t}sortRows(t){const e=this.state.get("$data.list.rows");t.length&&t.sort((t,n)=>e[t.id].children.includes(n.id)?-1:0);const n={};for(const e of t)n[e.id]=e;return n}fillEmptyRowValues(t){const e=this.state.get("config.list.row.height"),n=this.getRowsData();let i=0;for(let o in t){const s=t[o];let r=n[o];o=String(o),s.id=o,n[o]||(r={id:s.id,parentId:s.parentId,parents:[],children:[],position:{top:0,topPercent:0,bottomPercent:0,viewTop:0},items:[],actualHeight:0,outerHeight:0}),"number"!=typeof s.height&&(s.height=e),r.actualHeight=s.height,"boolean"!=typeof s.expanded&&(s.expanded=!1),r.position.top=i,"object"!=typeof s.gap&&(s.gap={}),"number"!=typeof s.gap.top&&(s.gap.top=0),"number"!=typeof s.gap.bottom&&(s.gap.bottom=0),r.outerHeight=r.actualHeight+s.gap.top+s.gap.bottom,n[o]=r,i+=r.outerHeight}return this.setRowsData(n),t}itemsOnTheSameLevel(t,e){const n=this.getItemData(t.id),i=this.getItemData(e.id),o=n.position.top+n.outerHeight,s=i.position.top+i.outerHeight;return i.position.top<=n.position.top&&s>n.position.top||(i.position.top>=n.position.top&&i.position.top<o||i.position.top>=n.position.top&&s<o)}itemsOverlaps(t,e){return!!this.itemsOnTheSameLevel(t,e)&&(e.time.start>=t.time.start&&e.time.start<=t.time.end||(e.time.end>=t.time.start&&e.time.end<=t.time.end||(e.time.start>=t.time.start&&e.time.end<=t.time.end||e.time.start<=t.time.start&&e.time.end>=t.time.end)))}itemOverlapsWithOthers(t,e){for(let n=0,i=e.length;n<i;n++){const i=e[n],o=i.time.start&&t.time.start&&i.time.end&&t.time.end;if(t.id!==i.id&&this.itemsOverlaps(t,i)&&o)return i}return null}fixOverlappedItems(t){if(this.isMutedMethod("fixOverlapped"))return;if(0===t.length)return;let e=0;for(const n of t){const i=this.getItemData(n.id);i.position.top=n.top,i.position.actualTop=i.position.top+n.gap.top;let o=this.itemOverlapsWithOthers(n,t);if(e&&o){const e=this.getItemData(o.id);for(;o=this.itemOverlapsWithOthers(n,t);)i.position.top+=e.outerHeight,i.position.actualTop=i.position.top+n.gap.top}e++}}recalculateRowHeight(t,e){if(!e)return 0;let n=0;const i=this.getItemsData(),o=this.getItems(e.items);this.fixOverlappedItems(o);for(const t of o){const e=i[t.id];n=Math.max(n,e.position.top+e.outerHeight)}return n<t.height&&(n=t.height),e.actualHeight=n,e.outerHeight=e.actualHeight+t.gap.top+t.gap.bottom,e.outerHeight}recalculateRowsHeights(t){let e=0;const n=this.getAllRows(),i=this.getRowsData();for(const o of t){const t=n[o],s=i[o];this.recalculateRowHeight(t,s),s.position.top=e,e+=s.outerHeight}return this.state.update("$data.list.rows",i),e}recalculateRowsPercents(t,e){let n=0;const i=this.getRowsData();for(const o of t){const t=i[o];e<=0?(t.position.topPercent=0,t.position.bottomPercent=0):(t.position.topPercent=n?n/e:0,t.position.bottomPercent=(n+t.outerHeight)/e),n+=t.outerHeight}}calculateVisibleRowsHeights(){if(this.isMutedMethod("calculateVisibleRowsHeights"))return;const t=this.state.get("config.scroll.vertical.offset")||0,e=this.state.get("$data.list.visibleRows");let n=0;const i=this.getAllRows(),o=this.getRowsData();for(const t of e)n+=this.recalculateRowHeight(i[t],o[t]);this.debug&&console.log("Calculate visible rows height.",{height:n,rows:i,visibleRows:e}),this.state.update("$data.list.visibleRowsHeight",n+t)}generateParents(t,e="parentId"){const n={};for(const i in t){const o=t[i],s=void 0!==o[e]&&null!==o[e]?o[e]:"";void 0===n[s]&&(n[s]={}),n[s][o.id]=o}return n}fastTree(t,e,n=[]){const i=t[e.id];if(e.parents=n,void 0===i)return e.children=[],e;""!==e.id&&(n=[...n,e.id]),e.children=Object.values(i).map(t=>t.id);for(const e in i){const o=i[e];this.fastTree(t,o,n)}return e}makeTreeMap(t,e,n=!1){const i=this.generateParents(e,"rowId");for(const e in t){if(!t[e])return;if(t[e].items.length=0,void 0!==i[e])for(const n of Object.values(i[e]))t[e].items.push(n.id)}if(!n){const t=this.generateParents(this.getRowsData()),e={id:"",children:[],parents:[],items:[]};this.fastTree(t,e)}}getRowsWithParentsExpanded(t){const e=[],n=this.getRowsData();t:for(const i in t){if(!n[i]||!n[i].parents)return[];for(const e of n[i].parents){const n=t[e];if(!n||!n.expanded)continue t}e.push(i)}return e}getVisibleRows(t){if(this.debug&&console.log("getVisibleRows #1",{rowsWithParentsExpanded:t}),0===t.length)return[];const e=[],n=this.state.get("config.scroll.vertical");let i=n.data;this.debug&&console.log("getVisibleRows #2",{topRow:i}),i||(i=t[0]);let o=this.state.get("$data.innerHeight");if(this.debug&&console.log("getVisibleRows #3",{innerHeight:o}),!o)return[];const s=this.getAllRows(),r=this.getRowsData();o+=n.offset||0;const a=t.find(t=>t===i.id);let l=t.indexOf(a);if(this.debug&&console.log("getVisibleRows #4",{index:l}),void 0===l)return[];let c=0;for(let n=t.length;l<n;l++){const n=t[l],i=s[n],a=r[n];if(!i||!a)return this.debug&&console.log("getVisibleItems NO-ROW",{row:i,rowId:n,rows:s,index:l,rowsWithParentsExpanded:t}),[];if(c<=o&&(a.position.viewTop=c,e.push(i.id)),c+=a.outerHeight,c>=o)break}return this.debug&&console.log("getVisibleRows #5 final",{visibleRows:e,innerHeight:o,topRow:i,index:l}),e}getSortableValue(t,e){return"string"==typeof t?e[t]:"function"==typeof t?t({row:e,vido:this.vido}):""}sortRowsByColumn(t,e=!0){const n=this.state.get("config.list.sort.compare");this.state.update("config.list.rows",i=>{if(0===Object.keys(i).length)return i;const o=Object.values(i);return n?o.sort(n(t)):o.sort((n,i)=>{const o=this.getSortableValue(t.sortable,n),s=this.getSortableValue(t.sortable,i);return"number"==typeof o?e?o-s:s-o:"string"==typeof o?e?o.localeCompare(s):s.localeCompare(o):void 0}),this.sortRows(o)}),this.setScrollTop(0)}normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,i=t.deltaZ||0;const o=t.deltaMode,s=this.state.get("config.list.rowHeight");let r=1;switch(o){case 1:s&&(r=s);break;case 2:r=window.height}return e*=r,n*=r,i*=r,{x:e,y:n,z:i,event:t}}scrollToTime(t,e=!0,n=this.state.get("$data.chart.time")){if(!n.allDates)return 0;if(e){t-=this.state.get("$data.chart.dimensions.width")/2*n.timePerPixel}const i=this.time.findDateAtTime(t,n.allDates[n.level]),o=n.allDates[n.level].indexOf(i);return-1===o?0:this.setScrollLeft(o,n).posPx}setScrollLeft(t,e=this.state.get("$data.chart.time"),n,i="scroll"){void 0===t&&(t=0);let o=!0;void 0===n&&(o=!1,n=this.state.multi());const s=e.allDates[e.level];if(!s)return;const r=s[t];if(!r)return;let a;return n=n.update("config.scroll.horizontal",n=>{n.data=Object.assign({},r);const i=e.allDates[e.level].length-n.lastPageCount;t>i&&(t=i),n.dataIndex=t,n.posPx=this.time.calculateScrollPosPxFromTime(n.data.leftGlobal,e,n);const o=n.maxPosPx-n.innerSize;return n.posPx>o&&(n.posPx=o),a=n,n}),i&&(n=n.update("$data.chart.time.recalculateTimesLastReason",i)),o?n:(n.done(),a)}getScrollLeft(){return this.state.get("config.scroll.horizontal")}setScrollTop(t,e=0){void 0===t&&(t=0);const n=this.state.get("$data.list.rowsWithParentsExpanded"),i=this.getRows(n);if(i[t]||0===t||(t=0),!i[t])return;const o=i[t],s=this.getRowData(o.id);this.state.update("config.scroll.vertical",n=>{const o=i.length-n.lastPageCount;return t+n.lastPageCount>i.length&&(t=o),t===o&&(e=0),n.data=i[t],n.offset=e,n.posPx=s.position.topPercent*n.maxPosPx+Math.floor(n.scrollArea*(e/n.area)),n.dataIndex=t,n})}getScrollTop(){return this.state.get("config.scroll.vertical")}getGridCells(t){const e=this.state.get("$data.chart.grid.cells");if(!e)return[];if(void 0!==t){const n=[];for(const i of t)n.push(e[i]);return n}const n=[];for(const t in e){const i=e[t];n.push(i)}return n}getGridRows(t){const e=this.state.get("$data.chart.grid.rows");return void 0!==t?e?Object.values(e).filter(e=>t.includes(e.row.id)):[]:e?Object.values(e):[]}getGridCell(t){return this.state.get("$data.chart.grid.cells."+t)}getGridRow(t){return this.state.get("$data.chart.grid.rows."+t)}muteMethod(t){this.mutedMethods.add(t)}unmuteMethod(t){this.mutedMethods.delete(t)}isMutedMethod(t){return this.mutedMethods.has(t)}getSVGIconSrc(t){return"string"==typeof this.iconsCache[t]||(this.iconsCache[t]="data:image/svg+xml;base64,"+btoa(t)),this.iconsCache[t]}destroy(){for(const t of this.unsubscribes)t();this.unsubscribes=[],this.debug&&delete window.state}}function He(t){const e=t.state,n=new ze(e),i={treeMap:{id:"",children:[],parents:[],items:[]},list:{visibleRows:[],rowsIds:[],rows:{},visibleRowsHeight:0,rowsWithParentsExpanded:[],rowsHeight:0,width:0},dimensions:{width:0,height:0},chart:{items:{},grid:{cells:{},rows:{}},dimensions:{width:0,innerWidth:0,height:0},visibleItems:[],time:{zoom:0,format:{period:"day",periodIncrement:1,zoomTo:0,format:()=>""},level:0,levels:[],timePerPixel:0,totalViewDurationMs:0,totalViewDurationPx:0,leftGlobal:0,rightGlobal:0,leftPx:0,rightPx:0,leftInner:0,rightInner:0,period:"day",leftGlobalDate:void 0,rightGlobalDate:void 0,centerGlobal:0,centerGlobalDate:void 0,from:0,to:0,fromDate:void 0,toDate:void 0,additionalSpaceAdded:!1}},elements:{}};"boolean"==typeof t.debug&&t.debug&&(window.state=e),e.update("",t=>({config:t.config,$data:i}));const o=At(e,n);n.setVido(o);const s=e.get("config.components.Main"),r=o.createApp({component:s,props:{},element:t.element}),a=r.vidoInstance.api;const l={state:e,api:a,component:r,destroy:function(){r.destroy()},reload:function(){l.component.destroy();const n=e.get("config.components.Main");l.component=o.createApp({component:n,props:{},element:t.element}),l.api=r.vidoInstance.api,l.component.update()}};return l}return He.api=Ne,He}));
