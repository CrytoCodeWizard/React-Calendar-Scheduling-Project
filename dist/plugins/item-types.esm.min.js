const t="config.plugin.ItemTypes",e="config.templates.chart-timeline-items-row-item",i={task({className:t,labelClassName:e,detach:i,actions:s,styleMap:a,slots:l,cutterLeft:n,cutterRight:$,getContent:c,vido:o,props:p}){const{itemData:h,item:r}=p,g=h.position.left!==h.position.actualLeft,d=h.position.right!==h.position.actualRight,m=h.actualWidth,u=h.actualHeight,y=Math.min(8,u/2);let L=[`M ${y} ${u}`,`Q 0 ${u} 0 ${u-y}`,`L 0 ${y}`,`Q 0 0 ${y} 0`,`L ${m-y} 0`,`Q ${m} 0 ${m} ${y}`,`L ${m} ${u-y}`,`Q ${m} ${u} ${m-y} ${u}`,`L ${y} ${u}`].join(" ");g&&!d?L=["M 0 0",`L ${m-y} 0`,`Q ${m} 0 ${m} ${y}`,`L ${m} ${u-y}`,`Q ${m} ${u} ${m-y} ${u}`,`L 0 ${u}`].join(" "):g&&d?L=["M 0 0",`L ${m} 0`,`L ${m} ${u}`,`L 0 ${u}`].join(" "):!g&&d&&(L=[`M ${y} ${u}`,`Q 0 ${u} 0 ${u-y}`,`L 0 ${y}`,`Q 0 0 ${y} 0`,`L ${m} 0`,`L ${m} ${u}`,`L ${y} ${u}`].join(" "));const _=`gstc__clip-path-${r.id}`,f=`gstc__pattern-${r.id}`,w=void 0===r.progress?100:r.progress,v=h.width-h.width/100*w;let j=h.width-v;g&&(j+=h.position.left),j<0&&(j=0);const x=[`M ${j} 0`,`L ${m} 0`,`L ${m} ${u}`,`L ${j} ${u}`].join(" "),b=r.fill?r.fill:"#e74c3c",H=`gstc__item-type gstc__item-type--${r.type} `,M=m>=0?o.svg`<svg width=${m} height=${h.actualHeight} xmlns="http://www.w3.org/2000/svg">
          <defs>
            <clipPath id=${_}>
              <path d=${L}></path>
            </clipPath>
            <pattern
              id=${f}
              width="20"
              height="20"
              patternTransform="rotate(45 0 0)"
              patternUnits="userSpaceOnUse"
            >
              <line
                class="gstc__item-type-progress-line"
                x1="0"
                y1="0"
                x2="0"
                y2="20"
              />
            </pattern>
          </defs>
          <path class="gstc__item-type-item" d=${L} fill=${b} />
          <path
            class="gstc__item-type-progress"
            clip-path="url(#${_})"
            d=${x}
            style="fill: url('#${f}');" />
          <foreignObject clip-path="url(#${_})" x="0" y="0" width="100%" height="100%">
            <div class="gstc__item-type-content" xmlns="http://www.w3.org/1999/xhtml">
              ${l.html("inner",o.html`<div class=${H+e}>${l.html("content",c())}</div>`)}
            </div>
          </foreignObject>
        </svg>`:null;return l.html("outer",o.html`
        <div detach=${i} class=${H+t} data-actions=${s} style=${a}>
          ${M}
        </div>
      `)},milestone({className:t,labelClassName:e,detach:i,actions:s,styleMap:a,slots:l,cutterLeft:n,cutterRight:$,getContent:c,vido:o,props:p}){const{itemData:h,item:r}=p,g=16,d=h.actualWidth,m=h.actualHeight,u=h.position.left!==h.position.actualLeft,y=h.position.right!==h.position.actualRight;let L=["M 0 "+h.actualHeight/2,`L ${d>=32?g:d/2} 0`,`L ${d>=32?d-g:d/2} 0`,`L ${d} ${h.actualHeight/2}`,`L ${d>=32?d-g:d/2} ${h.actualHeight}`,`L ${d>=32?g:d/2} ${h.actualHeight}`,"L 0 "+h.actualHeight/2].join(" ");u&&!y?L=["M 0 0",`L ${d>=32?d-g:d/2} 0`,`L ${d} ${h.actualHeight/2}`,`L ${d>=32?d-g:d/2} ${h.actualHeight}`,`L 0 ${m}`].join(" "):u&&y?L=["M 0 0",`L ${d} 0`,`L ${d} ${m}`,`L 0 ${m}`].join(" "):!u&&y&&(L=["M 0 "+h.actualHeight/2,`L ${d>=32?g:d/2} 0`,`L ${d} 0`,`L ${d} ${m}`,`L ${d>=32?g:d/2} ${h.actualHeight}`,"L 0 "+h.actualHeight/2].join(" "));const _=`gstc__clip-path-${r.id}`,f=`gstc__pattern-${r.id}`,w=void 0===r.progress?100:r.progress,v=h.width-h.width/100*w;let j=h.width-v;u&&(j+=h.position.left),j<0&&(j=0);const x=[`M ${d} 0`,`L ${d} ${m}`,`L ${j} ${m}`,`L ${j} 0`].join(" "),b=r.fill?r.fill:"#e74c3c",H=`gstc__item-type gstc__item-type--${r.type} `,M=d>=0?o.svg`<svg width=${d} height=${h.actualHeight} xmlns="http://www.w3.org/2000/svg">
          <defs>
            <clipPath id=${_}>
              <path d=${L}></path>
            </clipPath>
            <pattern
              id=${f}
              width="20"
              height="20"
              patternTransform="rotate(45 0 0)"
              patternUnits="userSpaceOnUse"
            >
              <line
                class="gstc__item-type-progress-line"
                x1="0"
                y1="0"
                x2="0"
                y2="20"
              />
            </pattern>
          </defs>
          <path class="gstc__item-type-item" d=${L} stroke="none" fill=${b} />
          <path
            class="gstc__item-type-progress"
            clip-path="url(#${_})"
            d=${x}
            style="fill: url('#${f}');" />
          <foreignObject clip-path="url(#${_})" x="0" y="0" width="100%" height="100%">
            <div class="gstc__item-type-content" xmlns="http://www.w3.org/1999/xhtml">
              ${l.html("inner",o.html`<div class=${H+e}>${l.html("content",c())}</div>`)}
            </div>
          </foreignObject>
        </svg>`:null;return l.html("outer",o.html`
        <div detach=${i} class=${H+t} data-actions=${s} style=${a}>
          ${M}
        </div>
      `)},project({className:t,labelClassName:e,detach:i,actions:s,styleMap:a,slots:l,cutterLeft:n,cutterRight:$,getContent:c,vido:o,props:p}){const{itemData:h,item:r}=p,g=h.actualWidth,d=h.actualHeight,m=h.position.left!==h.position.actualLeft,u=["M 0 0",`L ${g} 0`,`L ${g} ${d}`,`L 0 ${d}`].join(" "),y=`gstc__clip-path-${r.id}`,L=`gstc__pattern-${r.id}`,_=void 0===r.progress?100:r.progress,f=h.width-h.width/100*_;let w=h.width-f;m&&(w+=h.position.left),w<0&&(w=0);const v=[`M ${g} 0`,`L ${g} ${d}`,`L ${w} ${d}`,`L ${w} 0`].join(" "),j=r.fill?r.fill:"#e74c3c",x=`gstc__item-type gstc__item-type--${r.type} `,b=g>=0?o.svg`<svg width=${g} height=${h.actualHeight} xmlns="http://www.w3.org/2000/svg">
          <defs>
            <clipPath id=${y}>
              <path d=${u}></path>
            </clipPath>
            <pattern
              id=${L}
              width="20"
              height="20"
              patternTransform="rotate(45 0 0)"
              patternUnits="userSpaceOnUse"
            >
              <line
                class="gstc__item-type-progress-line"
                x1="0"
                y1="0"
                x2="0"
                y2="20"
              />
            </pattern>
          </defs>
          <path class="gstc__item-type-item" d=${u} fill=${j} />
          <path
            class="gstc__item-type-progress"
            clip-path="url(#${y})"
            d=${v}
            style="fill: url('#${L}');" />
          <foreignObject clip-path="url(#${y})" x="0" y="0" width="100%" height="100%">
            <div class="gstc__item-type-content" xmlns="http://www.w3.org/1999/xhtml">
              ${l.html("inner",o.html`<div class=${x+e}>${l.html("content",c())}</div>`)}
            </div>
          </foreignObject>
        </svg>`:null;return l.html("outer",o.html`
        <div detach=${i} class=${x+t} data-actions=${s} style=${a}>
          ${b}
        </div>
      `)}};class s{constructor(s,a){this.unsub=[],this.options=function(t){return Object.assign(Object.assign({},i),t)}(s),this.vido=a,this.state=a.state,this.api=a.api,this.componentTemplate=this.componentTemplate.bind(this),this.destroy=this.destroy.bind(this),this.state.update(t,this.options),this.state.update(e,(()=>this.componentTemplate)),this.unsub.push(this.state.subscribe(t,(t=>this.options=t))),this.api.pluginInitialized("ItemTypes")}destroy(){this.unsub.forEach((t=>t())),this.state.update(e,null),this.vido.api.pluginDestroyed("ItemTypes")}componentTemplate(t){const e=t.props.item;if(!e)return null;const i=e.type;if(!i)throw new Error(`Item (${e.id}) must have a 'type' {string} property 'task', 'milestone' or 'project'.`);return this.options[i](t)}}function a(e={}){return function(i){const a=i.state.get(t);a&&(e=i.api.mergeDeep({},e,a));return new s(e,i).destroy}}export{a as Plugin,t as pluginPath,e as templatePath};
