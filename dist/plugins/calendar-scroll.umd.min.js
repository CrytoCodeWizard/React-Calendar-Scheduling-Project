!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CalendarScroll={})}(this,(function(e){"use strict";const t={enabled:!0,bodyClassName:"gstc-scrolling"};e.Plugin=function(e=t){let i,n,o,s=e.enabled;class r{constructor(e){this.moving=!1,this.initialDataIndex={x:0,y:0},this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=i.schedule(this.pointerMove.bind(this)),e.addEventListener("pointerdown",this.pointerDown),document.addEventListener("pointermove",this.pointerMove,{passive:!0}),document.addEventListener("pointerup",this.pointerUp),e.style.cursor="grab"}destroy(e){e.removeEventListener("pointerdown",this.pointerDown),document.removeEventListener("pointermove",this.pointerMove),document.removeEventListener("pointerup",this.pointerUp)}resetInitialPoint(e){this.initialPoint={x:e.screenX,y:e.screenY}}pointerDown(t){if(!s)return;document.body.classList.add(e.bodyClassName),this.moving=!0,this.resetInitialPoint(t);const i=o.get("config.scroll");this.initialDataIndex={x:i.horizontal.dataIndex||0,y:i.vertical.dataIndex||0}}pointerUp(){s&&(document.body.classList.remove(e.bodyClassName),this.moving&&(this.moving=!1))}handleHorizontalMovement(e,t){const i=o.get("$data.chart.time");if(e.x>0){if(0===this.initialDataIndex.x)return this.resetInitialPoint(t);const o=i.allDates[i.level];let s=this.initialDataIndex.x-1,r=0;for(;s>0;s--){if(r+=o[s].width,r>=e.x)break}n.setScrollLeft(s,i)}else if(e.x<0){let s=this.initialDataIndex.x;const r=o.get("config.scroll.horizontal"),a=i.allDates[i.level];if(s-1>=a.length-r.lastPageCount)return this.resetInitialPoint(t);let l=0;for(let t=a.length;s<t;s++){if(l+=a[s].width,-l<=e.x)break}if(s-1>=a.length-r.lastPageCount)return;n.setScrollLeft(s,i)}}pointerMove(e){if(!s||!this.moving)return;const t={x:e.screenX-this.initialPoint.x,y:e.screenY-this.initialPoint.y};this.handleHorizontalMovement(t,e)}}return function(t){i=t,n=i.api,o=i.state;const a="config.plugin.CalendarScroll",l=t.state.get(a);return l&&(e=n.mergeDeep({},e,l)),o.update(a,e),o.subscribe("config.plugin.CalendarScroll.enabled",e=>s=e),o.update("config.actions.chart-calendar",e=>(e.push(r),e)),n.pluginInitialized("CalendarScroll"),function(){o.update("config.actions.chart-calendar",e=>e.filter(e=>e!==r)),n.pluginDestroyed("CalendarScroll")}}},Object.defineProperty(e,"__esModule",{value:!0})}));
