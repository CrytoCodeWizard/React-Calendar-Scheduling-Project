!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ItemTypes={})}(this,(function(t){"use strict";const e="config.plugin.ItemTypes",i="config.templates.chart-timeline-items-row-item",s={task({className:t,labelClassName:e,detach:i,actions:s,styleMap:a,slots:n,cutterLeft:l,cutterRight:o,getContent:h,vido:c,props:p}){const{itemData:$,item:g}=p,r=$.position.left!==$.position.actualLeft,d=$.position.right!==$.position.actualRight,u=$.actualWidth,m=$.actualHeight,f=Math.min(8,m/2);let y=[`M ${f} ${m}`,`Q 0 ${m} 0 ${m-f}`,"L 0 "+f,`Q 0 0 ${f} 0`,`L ${u-f} 0`,`Q ${u} 0 ${u} ${f}`,`L ${u} ${m-f}`,`Q ${u} ${m} ${u-f} ${m}`,`L ${f} ${m}`].join(" ");r&&!d?y=["M 0 0",`L ${u-f} 0`,`Q ${u} 0 ${u} ${f}`,`L ${u} ${m-f}`,`Q ${u} ${m} ${u-f} ${m}`,"L 0 "+m].join(" "):r&&d?y=["M 0 0",`L ${u} 0`,`L ${u} ${m}`,"L 0 "+m].join(" "):!r&&d&&(y=[`M ${f} ${m}`,`Q 0 ${m} 0 ${m-f}`,"L 0 "+f,`Q 0 0 ${f} 0`,`L ${u} 0`,`L ${u} ${m}`,`L ${f} ${m}`].join(" "));const L="gstc__clip-path-"+g.id,_="gstc__pattern-"+g.id,w=void 0===g.progress?100:g.progress,v=$.width-$.width/100*w;let j=$.width-v;r&&(j+=$.position.left),j<0&&(j=0);const M=[`M ${j} 0`,`L ${u} 0`,`L ${u} ${m}`,`L ${j} ${m}`].join(" "),b=g.fill?g.fill:"#e74c3c",H=`gstc__item-type gstc__item-type--${g.type} `,x=u>=0?c.svg`<svg width=${u} height=${$.actualHeight} xmlns="http://www.w3.org/2000/svg">
          <defs>
            <clipPath id=${L}>
              <path d=${y}></path>
            </clipPath>
            <pattern
              id=${_}
              width="20"
              height="20"
              patternTransform="rotate(45 0 0)"
              patternUnits="userSpaceOnUse"
            >
              <line
                class="gstc__item-type-progress-line"
                x1="0"
                y1="0"
                x2="0"
                y2="20"
              />
            </pattern>
          </defs>
          <path class="gstc__item-type-item" d=${y} fill=${b} />
          <path
            class="gstc__item-type-progress"
            clip-path="url(#${L})"
            d=${M}
            style="fill: url('#${_}');" />
          <foreignObject x="0" y="0" width="100%" height="100%">
            <div class="gstc__item-type-content">
              <div class=${H+e}>${n.html("content",h())}</div>
            </div>
          </foreignObject>
        </svg>`:null;return n.html("outer",c.html`
        <div detach=${i} class=${H+t} data-actions=${s} style=${a}>
          ${n.html("inner",x)}
        </div>
      `)},milestone({className:t,labelClassName:e,detach:i,actions:s,styleMap:a,slots:n,cutterLeft:l,cutterRight:o,getContent:h,vido:c,props:p}){const{itemData:$,item:g}=p,r=16,d=$.actualWidth,u=$.actualHeight,m=$.position.left!==$.position.actualLeft,f=$.position.right!==$.position.actualRight;let y=["M 0 "+$.actualHeight/2,`L ${d>=32?r:d/2} 0`,`L ${d>=32?d-r:d/2} 0`,`L ${d} ${$.actualHeight/2}`,`L ${d>=32?d-r:d/2} ${$.actualHeight}`,`L ${d>=32?r:d/2} ${$.actualHeight}`,"L 0 "+$.actualHeight/2].join(" ");m&&!f?y=["M 0 0",`L ${d>=32?d-r:d/2} 0`,`L ${d} ${$.actualHeight/2}`,`L ${d>=32?d-r:d/2} ${$.actualHeight}`,"L 0 "+u].join(" "):m&&f?y=["M 0 0",`L ${d} 0`,`L ${d} ${u}`,"L 0 "+u].join(" "):!m&&f&&(y=["M 0 "+$.actualHeight/2,`L ${d>=32?r:d/2} 0`,`L ${d} 0`,`L ${d} ${u}`,`L ${d>=32?r:d/2} ${$.actualHeight}`,"L 0 "+$.actualHeight/2].join(" "));const L="gstc__clip-path-"+g.id,_="gstc__pattern-"+g.id,w=void 0===g.progress?100:g.progress,v=$.width-$.width/100*w;let j=$.width-v;m&&(j+=$.position.left),j<0&&(j=0);const M=[`M ${d} 0`,`L ${d} ${u}`,`L ${j} ${u}`,`L ${j} 0`].join(" "),b=g.fill?g.fill:"#e74c3c",H=`gstc__item-type gstc__item-type--${g.type} `,x=d>=0?c.svg`<svg width=${d} height=${$.actualHeight} xmlns="http://www.w3.org/2000/svg">
          <defs>
            <clipPath id=${L}>
              <path d=${y}></path>
            </clipPath>
            <pattern
              id=${_}
              width="20"
              height="20"
              patternTransform="rotate(45 0 0)"
              patternUnits="userSpaceOnUse"
            >
              <line
                class="gstc__item-type-progress-line"
                x1="0"
                y1="0"
                x2="0"
                y2="20"
              />
            </pattern>
          </defs>
          <path class="gstc__item-type-item" d=${y} stroke="none" fill=${b} />
          <path
            class="gstc__item-type-progress"
            clip-path="url(#${L})"
            d=${M}
            style="fill: url('#${_}');" />
          <foreignObject x="0" y="0" width="100%" height="100%">
            <div class="gstc__item-type-content" xmlns="http://www.w3.org/1999/xhtml">
              <div class=${H+e}>${n.html("content",h())}</div>
            </div>
          </foreignObject>
        </svg>`:null;return n.html("outer",c.html`
        <div detach=${i} class=${H+t} data-actions=${s} style=${a}>
          ${n.html("inner",x)}
        </div>
      `)},project({className:t,labelClassName:e,detach:i,actions:s,styleMap:a,slots:n,cutterLeft:l,cutterRight:o,getContent:h,vido:c,props:p}){const{itemData:$,item:g}=p,r=$.actualWidth,d=$.actualHeight,u=$.position.left!==$.position.actualLeft,m=["M 0 0",`L ${r} 0`,`L ${r} ${d}`,"L 0 "+d].join(" "),f="gstc__clip-path-"+g.id,y="gstc__pattern-"+g.id,L=void 0===g.progress?100:g.progress,_=$.width-$.width/100*L;let w=$.width-_;u&&(w+=$.position.left),w<0&&(w=0);const v=[`M ${r} 0`,`L ${r} ${d}`,`L ${w} ${d}`,`L ${w} 0`].join(" "),j=g.fill?g.fill:"#e74c3c",M=`gstc__item-type gstc__item-type--${g.type} `,b=r>=0?c.svg`<svg width=${r} height=${$.actualHeight} xmlns="http://www.w3.org/2000/svg">
          <defs>
            <clipPath id=${f}>
              <path d=${m}></path>
            </clipPath>
            <pattern
              id=${y}
              width="20"
              height="20"
              patternTransform="rotate(45 0 0)"
              patternUnits="userSpaceOnUse"
            >
              <line
                class="gstc__item-type-progress-line"
                x1="0"
                y1="0"
                x2="0"
                y2="20"
              />
            </pattern>
          </defs>
          <path class="gstc__item-type-item" d=${m} fill=${j} />
          <path
            class="gstc__item-type-progress"
            clip-path="url(#${f})"
            d=${v}
            style="fill: url('#${y}');" />
          <foreignObject x="0" y="0" width="100%" height="100%">
            <div class="gstc__item-type-content" xmlns="http://www.w3.org/1999/xhtml">
              <div class=${M+e}>${n.html("content",h())}</div>
            </div>
          </foreignObject>
        </svg>`:null;return n.html("outer",c.html`
        <div detach=${i} class=${M+t} data-actions=${s} style=${a}>
          ${n.html("inner",b)}
        </div>
      `)}};class a{constructor(t,a){this.unsub=[],this.options=function(t){return Object.assign(Object.assign({},s),t)}(t),this.vido=a,this.state=a.state,this.api=a.api,this.componentTemplate=this.componentTemplate.bind(this),this.state.update(e,this.options),this.state.update(i,()=>this.componentTemplate),this.itemResizing=this.state.get("config.plugin.ItemResizing"),this.itemResizing&&(this.itemResizingOutside=this.itemResizing.handle.outside,this.outsideHorizontalMargin=this.itemResizing.handle.outsideHorizontalMargin,this.state.update("config.plugin.ItemResizing",t=>(t.handle.outside=!0,t.handle.outsideHorizontalMargin=3,t))),this.unsub.push(this.state.subscribe(e,t=>this.options=t)),this.api.pluginInitialized("ItemTypes")}destroy(){this.unsub.forEach(t=>t()),this.state.update(i,null),this.itemResizing&&this.state.update("config.plugin.ItemResizing",t=>(t.handle.outside=this.itemResizingOutside,t.handle.outsideHorizontalMargin=this.outsideHorizontalMargin,t)),this.vido.api.pluginDestroyed("ItemTypes")}componentTemplate(t){return this.options[t.props.item.type](t)}}t.Plugin=function(t={}){return function(i){const s=i.state.get(e);s&&(t=i.api.mergeDeep({},t,s));return new a(t,i).destroy}},t.pluginPath=e,t.templatePath=i,Object.defineProperty(t,"__esModule",{value:!0})}));
