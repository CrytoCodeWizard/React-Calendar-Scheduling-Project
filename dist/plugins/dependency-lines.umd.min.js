!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).DependencyLines={})}(this,(function(t){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;!function(t,i){t.exports=function(){var t=1e3,i=6e4,e=36e5,n="millisecond",s="second",o="minute",r="hour",a="day",h="week",p="month",l="quarter",u="year",d="date",c="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,i,e){var n=String(t);return!n||n.length>=i?t:""+Array(i+1-n.length).join(e)+t},y={s:v,z:function(t){var i=-t.utcOffset(),e=Math.abs(i),n=Math.floor(e/60),s=e%60;return(i<=0?"+":"-")+v(n,2,"0")+":"+v(s,2,"0")},m:function t(i,e){if(i.date()<e.date())return-t(e,i);var n=12*(e.year()-i.year())+(e.month()-i.month()),s=i.clone().add(n,p),o=e-s<0,r=i.clone().add(n+(o?-1:1),p);return+(-(n+(e-s)/(o?s-r:r-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:p,y:u,w:h,d:a,D:d,h:r,m:o,s:s,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",w={};w[m]=g;var x=function(t){return t instanceof D},_=function(t,i,e){var n;if(!t)return m;if("string"==typeof t)w[t]&&(n=t),i&&(w[t]=i,n=t);else{var s=t.name;w[s]=t,n=s}return!e&&n&&(m=n),n||!e&&m},A=function(t,i){if(x(t))return t.clone();var e="object"==typeof i?i:{};return e.date=t,e.args=arguments,new D(e)},T=y;T.l=_,T.i=x,T.w=function(t,i){return A(t,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var D=function(){function g(t){this.$L=_(t.locale,null,!0),this.parse(t)}var v=g.prototype;return v.parse=function(t){this.$d=function(t){var i=t.date,e=t.utc;if(null===i)return new Date(NaN);if(T.u(i))return new Date;if(i instanceof Date)return new Date(i);if("string"==typeof i&&!/Z$/i.test(i)){var n=i.match(f);if(n){var s=n[2]-1||0,o=(n[7]||"0").substring(0,3);return e?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(i)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return T},v.isValid=function(){return!(this.$d.toString()===c)},v.isSame=function(t,i){var e=A(t);return this.startOf(i)<=e&&e<=this.endOf(i)},v.isAfter=function(t,i){return A(t)<this.startOf(i)},v.isBefore=function(t,i){return this.endOf(i)<A(t)},v.$g=function(t,i,e){return T.u(t)?this[i]:this.set(e,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,i){var e=this,n=!!T.u(i)||i,l=T.p(t),c=function(t,i){var s=T.w(e.$u?Date.UTC(e.$y,i,t):new Date(e.$y,i,t),e);return n?s:s.endOf(a)},f=function(t,i){return T.w(e.toDate()[t].apply(e.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(i)),e)},$=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case u:return n?c(1,0):c(31,11);case p:return n?c(1,g):c(0,g+1);case h:var m=this.$locale().weekStart||0,w=($<m?$+7:$)-m;return c(n?v-w:v+(6-w),g);case a:case d:return f(y+"Hours",0);case r:return f(y+"Minutes",1);case o:return f(y+"Seconds",2);case s:return f(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,i){var e,h=T.p(t),l="set"+(this.$u?"UTC":""),c=(e={},e[a]=l+"Date",e[d]=l+"Date",e[p]=l+"Month",e[u]=l+"FullYear",e[r]=l+"Hours",e[o]=l+"Minutes",e[s]=l+"Seconds",e[n]=l+"Milliseconds",e)[h],f=h===a?this.$D+(i-this.$W):i;if(h===p||h===u){var $=this.clone().set(d,1);$.$d[c](f),$.init(),this.$d=$.set(d,Math.min(this.$D,$.daysInMonth())).$d}else c&&this.$d[c](f);return this.init(),this},v.set=function(t,i){return this.clone().$set(t,i)},v.get=function(t){return this[T.p(t)]()},v.add=function(n,l){var d,c=this;n=Number(n);var f=T.p(l),$=function(t){var i=A(c);return T.w(i.date(i.date()+Math.round(t*n)),c)};if(f===p)return this.set(p,this.$M+n);if(f===u)return this.set(u,this.$y+n);if(f===a)return $(1);if(f===h)return $(7);var g=(d={},d[o]=i,d[r]=e,d[s]=t,d)[f]||1,v=this.$d.getTime()+n*g;return T.w(v,this)},v.subtract=function(t,i){return this.add(-1*t,i)},v.format=function(t){var i=this,e=this.$locale();if(!this.isValid())return e.invalidDate||c;var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=T.z(this),o=this.$H,r=this.$m,a=this.$M,h=e.weekdays,p=e.months,l=function(t,e,s,o){return t&&(t[e]||t(i,n))||s[e].substr(0,o)},u=function(t){return T.s(o%12||12,t,"0")},d=e.meridiem||function(t,i,e){var n=t<12?"AM":"PM";return e?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:T.s(a+1,2,"0"),MMM:l(e.monthsShort,a,p,3),MMMM:l(p,a),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:l(e.weekdaysMin,this.$W,h,2),ddd:l(e.weekdaysShort,this.$W,h,3),dddd:h[this.$W],H:String(o),HH:T.s(o,2,"0"),h:u(1),hh:u(2),a:d(o,r,!0),A:d(o,r,!1),m:String(r),mm:T.s(r,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:s};return n.replace($,(function(t,i){return i||f[t]||s.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,d,c){var f,$=T.p(d),g=A(n),v=(g.utcOffset()-this.utcOffset())*i,y=this-g,m=T.m(this,g);return m=(f={},f[u]=m/12,f[p]=m,f[l]=m/3,f[h]=(y-v)/6048e5,f[a]=(y-v)/864e5,f[r]=y/e,f[o]=y/i,f[s]=y/t,f)[$]||y,c?m:T.a(m)},v.daysInMonth=function(){return this.endOf(p).$D},v.$locale=function(){return w[this.$L]},v.locale=function(t,i){if(!t)return this.$L;var e=this.clone(),n=_(t,i,!0);return n&&(e.$L=n),e},v.clone=function(){return T.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),M=D.prototype;return A.prototype=M,[["$ms",n],["$s",s],["$m",o],["$H",r],["$W",a],["$M",p],["$y",u],["$D",d]].forEach((function(t){M[t[1]]=function(i){return this.$g(i,t[0],t[1])}})),A.extend=function(t,i){return t.$i||(t(i,D,A),t.$i=!0),A},A.locale=_,A.isDayjs=x,A.unix=function(t){return A(1e3*t)},A.en=w[m],A.Ls=w,A.p={},A}()}({exports:{}});var i;!function(t,i){t.exports=function(){var t="minute",i=/[+-]\d\d(?::?\d\d)?/g,e=/([+-]|\d\d)/g;return function(n,s,o){var r=s.prototype;o.utc=function(t){return new s({date:t,utc:!0,args:arguments})},r.utc=function(i){var e=o(this.toDate(),{locale:this.$L,utc:!0});return i?e.add(this.utcOffset(),t):e},r.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var a=r.parse;r.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),a.call(this,t)};var h=r.init;r.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else h.call(this)};var p=r.utcOffset;r.utcOffset=function(n,s){var o=this.$utils().u;if(o(n))return this.$u?0:o(this.$offset)?p.call(this):this.$offset;if("string"==typeof n&&null===(n=function(t){void 0===t&&(t="");var n=t.match(i);if(!n)return null;var s=(""+n[0]).match(e)||["-",0,0],o=s[0],r=60*+s[1]+ +s[2];return 0===r?0:"+"===o?r:-r}(n)))return this;var r=Math.abs(n)<=16?60*n:n,a=this;if(s)return a.$offset=r,a.$u=0===n,a;if(0!==n){var h=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(r+h,t)).$offset=r,a.$x.$localOffset=h}else a=this.utc();return a};var l=r.format;r.format=function(t){var i=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,i)},r.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var u=r.toDate;r.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var d=r.diff;r.diff=function(t,i,e){if(t&&this.$u===t.$u)return d.call(this,t,i,e);var n=this.local(),s=o(t).local();return d.call(n,s,i,e)}}}()}({exports:{}});new class{constructor(){this.GSTCID=this.GSTCID.bind(this),this.isGSTCID=this.isGSTCID.bind(this),this.sourceID=this.sourceID.bind(this)}GSTCID(t){return`gstcid-${t}`}isGSTCID(t){return t.startsWith("gstcid-")}sourceID(t){return this.isGSTCID(t)?t.substr(7):t}};const e=globalThis.trustedTypes,n=e?e.createPolicy("lit-html",{createHTML:t=>t}):void 0,s=`lit$${(Math.random()+"").slice(9)}$`,o="?"+s,r=`<${o}>`,a=document,h=(t="")=>a.createComment(t),p=t=>null===t||"object"!=typeof t&&"function"!=typeof t,l=Array.isArray,u=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,d=/-->/g,c=/>/g,f=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,$=/'/g,g=/"/g,v=/^(?:script|style|textarea)$/i,y=Symbol.for("lit-noChange"),m=Symbol.for("lit-nothing"),w=new WeakMap,x=a.createTreeWalker(a,129,null,!1);class _{constructor({strings:t,_$litType$:i},a){let p;this.parts=[];let l=0,y=0;const m=t.length-1,w=this.parts,[A,T]=((t,i)=>{const e=t.length-1,o=[];let a,h=2===i?"<svg>":"",p=u;for(let i=0;i<e;i++){const e=t[i];let n,l,y=-1,m=0;for(;m<e.length&&(p.lastIndex=m,l=p.exec(e),null!==l);)m=p.lastIndex,p===u?"!--"===l[1]?p=d:void 0!==l[1]?p=c:void 0!==l[2]?(v.test(l[2])&&(a=RegExp("</"+l[2],"g")),p=f):void 0!==l[3]&&(p=f):p===f?">"===l[0]?(p=null!=a?a:u,y=-1):void 0===l[1]?y=-2:(y=p.lastIndex-l[2].length,n=l[1],p=void 0===l[3]?f:'"'===l[3]?g:$):p===g||p===$?p=f:p===d||p===c?p=u:(p=f,a=void 0);const w=p===f&&t[i+1].startsWith("/>")?" ":"";h+=p===u?e+r:y>=0?(o.push(n),e.slice(0,y)+"$lit$"+e.slice(y)+s+w):e+s+(-2===y?(o.push(void 0),i):w)}const l=h+(t[e]||"<?>")+(2===i?"</svg>":"");return[void 0!==n?n.createHTML(l):l,o]})(t,i);if(this.el=_.createElement(A,a),x.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(p=x.nextNode())&&w.length<m;){if(1===p.nodeType){if(p.hasAttributes()){const t=[];for(const i of p.getAttributeNames())if(i.endsWith("$lit$")||i.startsWith(s)){const e=T[y++];if(t.push(i),void 0!==e){const t=p.getAttribute(e.toLowerCase()+"$lit$").split(s),i=/([.?@])?(.*)/.exec(e);w.push({type:1,index:l,name:i[2],strings:t,ctor:"."===i[1]?S:"?"===i[1]?b:"@"===i[1]?H:M})}else w.push({type:6,index:l})}for(const i of t)p.removeAttribute(i)}if(v.test(p.tagName)){const t=p.textContent.split(s),i=t.length-1;if(i>0){p.textContent=e?e.emptyScript:"";for(let e=0;e<i;e++)p.append(t[e],h()),x.nextNode(),w.push({type:2,index:++l});p.append(t[i],h())}}}else if(8===p.nodeType)if(p.data===o)w.push({type:2,index:l});else{let t=-1;for(;-1!==(t=p.data.indexOf(s,t+1));)w.push({type:7,index:l}),t+=s.length-1}l++}}static createElement(t,i){const e=a.createElement("template");return e.innerHTML=t,e}}function A(t,i,e=t,n){var s,o,r,a;if(i===y)return i;let h=void 0!==n?null===(s=e._$Cl)||void 0===s?void 0:s[n]:e._$Cu;const l=p(i)?void 0:i._$litDirective$;return(null==h?void 0:h.constructor)!==l&&(null===(o=null==h?void 0:h._$AO)||void 0===o||o.call(h,!1),void 0===l?h=void 0:(h=new l(t),h._$AT(t,e,n)),void 0!==n?(null!==(r=(a=e)._$Cl)&&void 0!==r?r:a._$Cl=[])[n]=h:e._$Cu=h),void 0!==h&&(i=A(t,h._$AS(t,i.values),h,n)),i}class T{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:e},parts:n}=this._$AD,s=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:a).importNode(e,!0);x.currentNode=s;let o=x.nextNode(),r=0,h=0,p=n[0];for(;void 0!==p;){if(r===p.index){let i;2===p.type?i=new D(o,o.nextSibling,this,t):1===p.type?i=new p.ctor(o,p.name,p.strings,this,t):6===p.type&&(i=new O(o,this,t)),this.v.push(i),p=n[++h]}r!==(null==p?void 0:p.index)&&(o=x.nextNode(),r++)}return s}m(t){let i=0;for(const e of this.v)void 0!==e&&(void 0!==e.strings?(e._$AI(t,e,i),i+=e.strings.length-2):e._$AI(t[i])),i++}}class D{constructor(t,i,e,n){var s;this.type=2,this._$AH=m,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=e,this.options=n,this._$Cg=null===(s=null==n?void 0:n.isConnected)||void 0===s||s}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=A(this,t,i),p(t)?t===m||null==t||""===t?(this._$AH!==m&&this._$AR(),this._$AH=m):t!==this._$AH&&t!==y&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):(t=>{var i;return l(t)||"function"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])})(t)?this.M(t):this.$(t)}A(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==m&&p(this._$AH)?this._$AA.nextSibling.data=t:this.S(a.createTextNode(t)),this._$AH=t}T(t){var i;const{values:e,_$litType$:n}=t,s="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=_.createElement(n.h,this.options)),n);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===s)this._$AH.m(e);else{const t=new T(s,this),i=t.p(this.options);t.m(e),this.S(i),this._$AH=t}}_$AC(t){let i=w.get(t.strings);return void 0===i&&w.set(t.strings,i=new _(t)),i}M(t){l(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let e,n=0;for(const s of t)n===i.length?i.push(e=new D(this.A(h()),this.A(h()),this,this.options)):e=i[n],e._$AI(s),n++;n<i.length&&(this._$AR(e&&e._$AB.nextSibling,n),i.length=n)}_$AR(t=this._$AA.nextSibling,i){var e;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class M{constructor(t,i,e,n,s){this.type=1,this._$AH=m,this._$AN=void 0,this.element=t,this.name=i,this._$AM=n,this.options=s,e.length>2||""!==e[0]||""!==e[1]?(this._$AH=Array(e.length-1).fill(new String),this.strings=e):this._$AH=m}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,e,n){const s=this.strings;let o=!1;if(void 0===s)t=A(this,t,i,0),o=!p(t)||t!==this._$AH&&t!==y,o&&(this._$AH=t);else{const n=t;let r,a;for(t=s[0],r=0;r<s.length-1;r++)a=A(this,n[e+r],i,r),a===y&&(a=this._$AH[r]),o||(o=!p(a)||a!==this._$AH[r]),a===m?t=m:t!==m&&(t+=(null!=a?a:"")+s[r+1]),this._$AH[r]=a}o&&!n&&this.k(t)}k(t){t===m?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class S extends M{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===m?void 0:t}}class b extends M{constructor(){super(...arguments),this.type=4}k(t){t&&t!==m?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class H extends M{constructor(t,i,e,n,s){super(t,i,e,n,s),this.type=5}_$AI(t,i=this){var e;if((t=null!==(e=A(this,t,i,0))&&void 0!==e?e:m)===y)return;const n=this._$AH,s=t===m&&n!==m||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,o=t!==m&&(n===m||s);s&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,e;"function"==typeof this._$AH?this._$AH.call(null!==(e=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==e?e:this.element,t):this._$AH.handleEvent(t)}}class O{constructor(t,i,e){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=e}get _$AU(){return this._$AM._$AU}_$AI(t){A(this,t)}}const P=window.litHtmlPolyfillSupport;null==P||P(_,D),(null!==(i=globalThis.litHtmlVersions)&&void 0!==i?i:globalThis.litHtmlVersions=[]).push("2.0.1");
/**
	 * @license
	 * Copyright 2017 Google LLC
	 * SPDX-License-Identifier: BSD-3-Clause
	 */
const I=2;
/**
	 * @license
	 * Copyright 2017 Google LLC
	 * SPDX-License-Identifier: BSD-3-Clause
	 */
class E extends class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,i,e){this._$Ct=t,this._$AM=i,this._$Ci=e}_$AS(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}}{constructor(t){if(super(t),this.it=m,t.type!==I)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===m||null==t)return this.vt=void 0,this.it=t;if(t===y)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this.vt;this.it=t;const i=[t];return i.raw=i,this.vt={_$litType$:this.constructor.resultType,strings:i,values:[]}}}E.directiveName="unsafeHTML",E.resultType=1;document.createTextNode("");const L="gstc";function C(t,i=""){let e=`gstc__${t}`;return t===L&&(e=L),i?`${e} ${e}--${i.replace(":","-")}`:e}const N="DependencyLines",R="config.plugin.DependencyLines",U="config.slots.chart-timeline-items.outer",Y=C("chart-timeline-dependency-lines-lines"),j=C("chart-timeline-dependency-lines-lines-line"),W=C("chart-timeline-dependency-lines-points"),k=C("chart-timeline-dependency-lines-points-point");class G{constructor(t,i){this.onDestroy=[],this.vido=t,this.api=this.vido.api,this.state=this.vido.state;const e=this.vido.html`<div class=${k+"--left"}></div>`,n=this.vido.html`<div class=${k+"--right"}></div>`;this.data=function(t){return Object.assign(Object.assign({},t),{lines:[]})}(function(t,i,e){const n=Object.assign(Object.assign({},function(t,i){return{type:"smooth",onLines:[],onLine:[],leftPoint:{content:t,width:10,height:10},rightPoint:{content:i,width:10,height:10}}}(i,e)),t);return t.leftPoint&&(n.leftPoint=Object.assign(Object.assign({},n.leftPoint),t.leftPoint)),t.rightPoint&&(n.rightPoint=Object.assign(Object.assign({},n.rightPoint),t.rightPoint)),n}(i,e,n)),this.slot=this.slot.bind(this),this.generateLines=this.generateLines.bind(this),this.destroy=this.destroy.bind(this),this.updateData(),this.onDestroy.push(this.state.subscribe(R,(t=>{this.data=t}))),this.state.update(U,(t=>(t.includes(this.slot)||t.push(this.slot),t))),this.onDestroy.push(this.state.subscribeAll(["$data.chart.items","$data.list.rowsHeight","$data.scroll"],this.generateLines,{group:!0}))}destroy(){this.state.update(U,(t=>t.filter((t=>t!==this.slot)))),this.onDestroy.forEach((t=>t())),this.api.pluginDestroyed(N)}updateData(){this.state.update(R,this.data),this.vido.update()}setStraightPoints(t){const{topOffset:i,leftOffset:e,fromItemData:n,toItemData:s,fromRowData:o,toRowData:r}=t;if(!this.api.parentsExpanded(o.id)||!this.api.parentsExpanded(r.id))return;const a=this.api.getRowViewTop(o.id),h=this.api.getRowViewTop(r.id);t.points.push({x:n.position.right+e,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:a,type:"M",content:this.data.leftPoint.content}),t.points.push({x:s.position.left-e,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:h,type:"L",content:this.data.rightPoint.content})}setSquareAltPoints(t){const{topOffset:i,leftOffset:e,fromItemData:n,toItemData:s,fromRowData:o,toRowData:r}=t;if(!this.api.parentsExpanded(o.id)&&!this.api.parentsExpanded(r.id))return;const a=(s.position.left-n.position.right)/2,h=n.position.right+a,p=(s.position.viewTop-n.position.viewTop)/2,l=n.position.viewTop+p,u=this.api.getRowViewTop(o.id),d=this.api.getRowViewTop(r.id);t.points.push({x:n.position.right+e,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:u,type:"M",content:this.data.leftPoint.content}),s.position.left<n.position.right?(t.points.push({x:n.position.right+e+10,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:u,type:"L",content:null}),t.points.push({x:n.position.right+e+10,y:this.api.parentsExpanded(o.id)?l+i:u,type:"L",content:null})):t.points.push({x:h,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:u,type:"L",content:null}),t.points.push({x:h,y:this.api.parentsExpanded(o.id)?l+i:u,type:"L",content:null}),this.api.parentsExpanded(r.id)?(s.position.left<n.position.right?(t.points.push({x:s.position.left-e-10,y:this.api.parentsExpanded(o.id)?l+i:u,type:"L",content:null}),t.points.push({x:s.position.left-e-10,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:u,type:"L",content:null})):t.points.push({x:h,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:u,type:"L",content:null}),t.points.push({x:s.position.left-e,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:d,type:"L",content:this.data.rightPoint.content})):t.points.push({x:h,y:d,type:"L",content:this.data.rightPoint.content})}setSquarePoints(t){const{topOffset:i,leftOffset:e,fromItemData:n,toItemData:s,fromRowData:o,toRowData:r}=t;if(!this.api.parentsExpanded(o.id)&&!this.api.parentsExpanded(r.id))return;const a=this.api.getRowViewTop(o.id),h=this.api.getRowViewTop(r.id);t.points.push({x:n.position.right+e,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:a,type:"M",content:this.data.leftPoint.content}),n.position.viewTop!==s.position.viewTop?s.position.left<n.position.right?(t.points.push({x:n.position.right+e+10,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:a,type:"L",content:null}),s.position.viewTop>n.position.viewTop?(t.points.push({x:n.position.right+e+10,y:this.api.parentsExpanded(o.id)?a+o.outerHeight:a,type:"L",content:null}),t.points.push({x:s.position.left+e+10,y:this.api.parentsExpanded(o.id)?a+o.outerHeight:a,type:"L",content:null}),t.points.push({x:s.position.left+e+10,y:this.api.parentsExpanded(r.id)?s.position.viewTop:h,type:"L",content:this.data.rightPoint.content})):(t.points.push({x:n.position.right+e+10,y:a,type:"L",content:null}),t.points.push({x:s.position.left+e+10,y:a,type:"L",content:null}),t.points.push({x:s.position.left+e+10,y:this.api.parentsExpanded(r.id)?s.position.viewTop+s.actualHeight:h,type:"L",content:this.data.rightPoint.content}))):(t.points.push({x:s.position.left+10,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:a,type:"L",content:null}),s.position.viewTop>n.position.viewTop?t.points.push({x:s.position.left+10,y:this.api.parentsExpanded(r.id)?s.position.viewTop:h,type:"L",content:this.data.rightPoint.content}):t.points.push({x:s.position.left+10,y:this.api.parentsExpanded(r.id)?s.position.viewTop+s.actualHeight:h,type:"L",content:this.data.rightPoint.content})):t.points.push({x:s.position.left-e,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:h,type:"L",content:this.data.rightPoint.content})}setSmoothPoints(t){const{topOffset:i,leftOffset:e,fromItemData:n,toItemData:s,fromRowData:o,toRowData:r}=t;if(!this.api.parentsExpanded(o.id)&&!this.api.parentsExpanded(r.id))return;const a=this.api.getRowViewTop(o.id),h=this.api.getRowViewTop(r.id);if(t.points.push({x:n.position.right+e,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:a,type:"M",content:this.data.leftPoint.content}),n.position.viewTop===s.position.viewTop)return void t.points.push({x:s.position.left-e,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:h,type:"L",content:this.data.rightPoint.content});const p=(s.position.left-n.position.right)/2,l=n.position.right+p;if(n.position.right<=s.position.left)t.points.push({x:l,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:a,type:"C",content:null}),t.points.push({x:l,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:h,type:"",content:null}),t.points.push({x:s.position.left-e,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:h,type:"",content:this.data.rightPoint.content});else{const p=(s.position.viewTop-n.position.viewTop)/2,u=n.position.viewTop+p+i;t.points.push({x:n.position.right+20,y:this.api.parentsExpanded(o.id)?n.position.viewTop+i:a,type:"C",content:null}),t.points.push({x:n.position.right+40,y:u,type:"",content:null}),t.points.push({x:l,y:u,type:"",content:null}),t.points.push({x:s.position.left+e-20,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:h,type:"S",content:null}),t.points.push({x:s.position.left+e,y:this.api.parentsExpanded(r.id)?s.position.viewTop+i:h,type:"",content:this.data.rightPoint.content})}}setPoints(t){const{fromItemData:i,toItemData:e,fromRowData:n,toRowData:s,toItem:o,fromItem:r}=t,a=this.state.get("$data.chart.time"),h=this.state.get("config.chart.spacing");switch(this.api.calculateItemPosition(i.id,i,n,a,h,r),this.api.calculateItemPosition(e.id,e,s,a,h,o),t.type){case"straight":this.setStraightPoints(t);break;case"square":this.setSquarePoints(t);break;case"smooth":this.setSmoothPoints(t);break;case"square-alt":this.setSquareAltPoints(t)}}generateLines(){const t=[],i=this.api.getAllItems(),e=this.api.getRowsData(),n=this.api.getItemsData(),s=this.state.get("$data.chart.time"),o=this.state.get("config.chart.spacing"),r=this.state.get("$data.chart.dimensions"),a=this.data.type;for(const h in i){const p=i[h];if(!p.dependant)continue;if(!p.dependant.length)continue;const l=e[p.rowId],u=n[h],d=p;if(u&&l)for(const c of p.dependant){const p=i[c],f=p,$=e[p.rowId],g=n[c];if(!g||!$)continue;if(s.calculatedZoomMode){if(d.time.end<s.leftGlobal&&f.time.start>s.rightGlobal)continue;if(f.time.end<s.leftGlobal&&d.time.start>s.rightGlobal)continue;if(d.time.start>s.rightGlobal&&f.time.start>s.rightGlobal)continue;if(d.time.end<s.leftGlobal&&f.time.end<s.leftGlobal)continue}this.api.calculateItemPosition(h,u,l,s,o),this.api.calculateItemPosition(c,g,$,s,o);const v=u.actualHeight/2,y=0;let m={x:0,y:0,width:r.width,height:r.height,topOffset:v,leftOffset:y,points:[],type:a,fromItemData:u,toItemData:g,fromItem:d,toItem:f,fromRowData:l,toRowData:$,className:j};for(const t of this.data.onLine)m=t(m);this.setPoints(m),t.push(m)}}this.data.lines=t;for(const t of this.data.onLines)this.data.lines=t(this.data.lines);this.updateData()}slot(t){const{html:i,svg:e}=t,n=t=>{if(!t.points.length)return"";const i=t.points.slice(),e=i.shift();return[`${e.type} ${e.x} ${e.y}`,[...i.map((t=>`${t.type} ${t.x} ${t.y}`))]].join(" ")},s=(t,e)=>{const n=`left:${t.x-(0===e?this.data.leftPoint.width/2:this.data.rightPoint.width/2)}px;top:${t.y-(0===e?this.data.leftPoint.height/2:this.data.rightPoint.height/2)}px;width:${0===e?this.data.leftPoint.width:this.data.rightPoint.width}px;height:${0===e?this.data.leftPoint.width:this.data.rightPoint.width}px`;return t.content?i`<div class=${k+" "+k+"--"+this.data.type} style=${n}>
            ${t.content}
          </div>`:null},o=t=>e`<svg width=${t.width} height=${t.height} xmlns="http://www.w3.org/2000/svg">
        <path d=${(t=>{switch(t.type){case"straight":return(t=>{const i=t.points;return[`${i[0].type} ${i[0].x} ${i[0].y}`,`${i[1].type} ${i[1].x} ${i[1].y}`].join(" ")})(t);case"square":case"square-alt":return n(t);case"smooth":return(t=>{if(!t.points.length)return"";const i=t.points.slice(),e=i.shift();return[`${e.type} ${e.x} ${e.y}`,[...i.map((t=>`${t.type} ${t.x} ${t.y}`))]].join(" ")})(t)}})(t)} />
      </svg>`;return t=>i`<div class="${Y}">${this.data.lines.map((t=>(t=>i`<div
      class=${t.className}
      style="left: ${t.x}px; top: ${t.y}px; width: ${t.width}px; height: ${t.height}px;"
    >
      ${o(t)}
    </div>`)(t)))}</div>
        ${t}
        <div class="${W}">${this.data.lines.map((t=>(t=>t.points.map(((t,i)=>s(t,i))))(t)))}</div>`}}t.Plugin=function(t={}){return function(i){const e=i.api,n=i.state.get(R);n&&(t=i.api.mergeDeep({},t,n));const s=new G(i,t);return e.pluginInitialized(N),s.destroy}},Object.defineProperty(t,"__esModule",{value:!0})}));
