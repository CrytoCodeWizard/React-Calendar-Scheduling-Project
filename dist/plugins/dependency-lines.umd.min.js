!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).DependencyLines={})}(this,(function(t){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;!function(t,i){t.exports=function(){var t=1e3,i=6e4,e=36e5,s="millisecond",n="second",o="minute",r="hour",h="day",a="week",l="month",p="quarter",u="year",c="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(t,i,e){var s=String(t);return!s||s.length>=i?t:""+Array(i+1-s.length).join(e)+t},y={s:g,z:function(t){var i=-t.utcOffset(),e=Math.abs(i),s=Math.floor(e/60),n=e%60;return(i<=0?"+":"-")+g(s,2,"0")+":"+g(n,2,"0")},m:function t(i,e){if(i.date()<e.date())return-t(e,i);var s=12*(e.year()-i.year())+(e.month()-i.month()),n=i.clone().add(s,l),o=e-n<0,r=i.clone().add(s+(o?-1:1),l);return+(-(s+(e-n)/(o?n-r:r-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:u,w:a,d:h,D:c,h:r,m:o,s:n,ms:s,Q:p}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",w={};w[m]=v;var T=function(t){return t instanceof D},_=function(t,i,e){var s;if(!t)return m;if("string"==typeof t)w[t]&&(s=t),i&&(w[t]=i,s=t);else{var n=t.name;w[n]=t,s=n}return!e&&s&&(m=s),s||!e&&m},A=function(t,i){if(T(t))return t.clone();var e="object"==typeof i?i:{};return e.date=t,e.args=arguments,new D(e)},b=y;b.l=_,b.i=T,b.w=function(t,i){return A(t,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var D=function(){function v(t){this.$L=_(t.locale,null,!0),this.parse(t)}var g=v.prototype;return g.parse=function(t){this.$d=function(t){var i=t.date,e=t.utc;if(null===i)return new Date(NaN);if(b.u(i))return new Date;if(i instanceof Date)return new Date(i);if("string"==typeof i&&!/Z$/i.test(i)){var s=i.match(f);if(s){var n=s[2]-1||0,o=(s[7]||"0").substring(0,3);return e?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)}}return new Date(i)}(t),this.$x=t.x||{},this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return b},g.isValid=function(){return!(this.$d.toString()===d)},g.isSame=function(t,i){var e=A(t);return this.startOf(i)<=e&&e<=this.endOf(i)},g.isAfter=function(t,i){return A(t)<this.startOf(i)},g.isBefore=function(t,i){return this.endOf(i)<A(t)},g.$g=function(t,i,e){return b.u(t)?this[i]:this.set(e,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,i){var e=this,s=!!b.u(i)||i,p=b.p(t),d=function(t,i){var n=b.w(e.$u?Date.UTC(e.$y,i,t):new Date(e.$y,i,t),e);return s?n:n.endOf(h)},f=function(t,i){return b.w(e.toDate()[t].apply(e.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(i)),e)},$=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(p){case u:return s?d(1,0):d(31,11);case l:return s?d(1,v):d(0,v+1);case a:var m=this.$locale().weekStart||0,w=($<m?$+7:$)-m;return d(s?g-w:g+(6-w),v);case h:case c:return f(y+"Hours",0);case r:return f(y+"Minutes",1);case o:return f(y+"Seconds",2);case n:return f(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,i){var e,a=b.p(t),p="set"+(this.$u?"UTC":""),d=(e={},e[h]=p+"Date",e[c]=p+"Date",e[l]=p+"Month",e[u]=p+"FullYear",e[r]=p+"Hours",e[o]=p+"Minutes",e[n]=p+"Seconds",e[s]=p+"Milliseconds",e)[a],f=a===h?this.$D+(i-this.$W):i;if(a===l||a===u){var $=this.clone().set(c,1);$.$d[d](f),$.init(),this.$d=$.set(c,Math.min(this.$D,$.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},g.set=function(t,i){return this.clone().$set(t,i)},g.get=function(t){return this[b.p(t)]()},g.add=function(s,p){var c,d=this;s=Number(s);var f=b.p(p),$=function(t){var i=A(d);return b.w(i.date(i.date()+Math.round(t*s)),d)};if(f===l)return this.set(l,this.$M+s);if(f===u)return this.set(u,this.$y+s);if(f===h)return $(1);if(f===a)return $(7);var v=(c={},c[o]=i,c[r]=e,c[n]=t,c)[f]||1,g=this.$d.getTime()+s*v;return b.w(g,this)},g.subtract=function(t,i){return this.add(-1*t,i)},g.format=function(t){var i=this,e=this.$locale();if(!this.isValid())return e.invalidDate||d;var s=t||"YYYY-MM-DDTHH:mm:ssZ",n=b.z(this),o=this.$H,r=this.$m,h=this.$M,a=e.weekdays,l=e.months,p=function(t,e,n,o){return t&&(t[e]||t(i,s))||n[e].substr(0,o)},u=function(t){return b.s(o%12||12,t,"0")},c=e.meridiem||function(t,i,e){var s=t<12?"AM":"PM";return e?s.toLowerCase():s},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:h+1,MM:b.s(h+1,2,"0"),MMM:p(e.monthsShort,h,l,3),MMMM:p(l,h),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:p(e.weekdaysMin,this.$W,a,2),ddd:p(e.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(o),HH:b.s(o,2,"0"),h:u(1),hh:u(2),a:c(o,r,!0),A:c(o,r,!1),m:String(r),mm:b.s(r,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:n};return s.replace($,(function(t,i){return i||f[t]||n.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(s,c,d){var f,$=b.p(c),v=A(s),g=(v.utcOffset()-this.utcOffset())*i,y=this-v,m=b.m(this,v);return m=(f={},f[u]=m/12,f[l]=m,f[p]=m/3,f[a]=(y-g)/6048e5,f[h]=(y-g)/864e5,f[r]=y/e,f[o]=y/i,f[n]=y/t,f)[$]||y,d?m:b.a(m)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return w[this.$L]},g.locale=function(t,i){if(!t)return this.$L;var e=this.clone(),s=_(t,i,!0);return s&&(e.$L=s),e},g.clone=function(){return b.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),x=D.prototype;return A.prototype=x,[["$ms",s],["$s",n],["$m",o],["$H",r],["$W",h],["$M",l],["$y",u],["$D",c]].forEach((function(t){x[t[1]]=function(i){return this.$g(i,t[0],t[1])}})),A.extend=function(t,i){return t.$i||(t(i,D,A),t.$i=!0),A},A.locale=_,A.isDayjs=T,A.unix=function(t){return A(1e3*t)},A.en=w[m],A.Ls=w,A.p={},A}()}({exports:{}});var i;!function(t,i){t.exports=function(){var t="minute",i=/[+-]\d\d(?::?\d\d)?/g,e=/([+-]|\d\d)/g;return function(s,n,o){var r=n.prototype;o.utc=function(t){return new n({date:t,utc:!0,args:arguments})},r.utc=function(i){var e=o(this.toDate(),{locale:this.$L,utc:!0});return i?e.add(this.utcOffset(),t):e},r.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var h=r.parse;r.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),h.call(this,t)};var a=r.init;r.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else a.call(this)};var l=r.utcOffset;r.utcOffset=function(s,n){var o=this.$utils().u;if(o(s))return this.$u?0:o(this.$offset)?l.call(this):this.$offset;if("string"==typeof s&&null===(s=function(t){void 0===t&&(t="");var s=t.match(i);if(!s)return null;var n=(""+s[0]).match(e)||["-",0,0],o=n[0],r=60*+n[1]+ +n[2];return 0===r?0:"+"===o?r:-r}(s)))return this;var r=Math.abs(s)<=16?60*s:s,h=this;if(n)return h.$offset=r,h.$u=0===s,h;if(0!==s){var a=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(h=this.local().add(r+a,t)).$offset=r,h.$x.$localOffset=a}else h=this.utc();return h};var p=r.format;r.format=function(t){var i=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,i)},r.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var u=r.toDate;r.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var c=r.diff;r.diff=function(t,i,e){if(t&&this.$u===t.$u)return c.call(this,t,i,e);var s=this.local(),n=o(t).local();return c.call(s,n,i,e)}}}()}({exports:{}});new class{constructor(){this.GSTCID=this.GSTCID.bind(this),this.isGSTCID=this.isGSTCID.bind(this),this.sourceID=this.sourceID.bind(this)}GSTCID(t){return`gstcid-${t}`}isGSTCID(t){return t.startsWith("gstcid-")}sourceID(t){return this.isGSTCID(t)?t.substr(7):t}};const e=globalThis.trustedTypes,s=e?e.createPolicy("lit-html",{createHTML:t=>t}):void 0,n=`lit$${(Math.random()+"").slice(9)}$`,o="?"+n,r=`<${o}>`,h=document,a=(t="")=>h.createComment(t),l=t=>null===t||"object"!=typeof t&&"function"!=typeof t,p=Array.isArray,u=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,c=/-->/g,d=/>/g,f=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,$=/'/g,v=/"/g,g=/^(?:script|style|textarea)$/i,y=Symbol.for("lit-noChange"),m=Symbol.for("lit-nothing"),w=new WeakMap,T=h.createTreeWalker(h,129,null,!1);class _{constructor({strings:t,_$litType$:i},h){let l;this.parts=[];let p=0,y=0;const m=t.length-1,w=this.parts,[A,b]=((t,i)=>{const e=t.length-1,o=[];let h,a=2===i?"<svg>":"",l=u;for(let i=0;i<e;i++){const e=t[i];let s,p,y=-1,m=0;for(;m<e.length&&(l.lastIndex=m,p=l.exec(e),null!==p);)m=l.lastIndex,l===u?"!--"===p[1]?l=c:void 0!==p[1]?l=d:void 0!==p[2]?(g.test(p[2])&&(h=RegExp("</"+p[2],"g")),l=f):void 0!==p[3]&&(l=f):l===f?">"===p[0]?(l=null!=h?h:u,y=-1):void 0===p[1]?y=-2:(y=l.lastIndex-p[2].length,s=p[1],l=void 0===p[3]?f:'"'===p[3]?v:$):l===v||l===$?l=f:l===c||l===d?l=u:(l=f,h=void 0);const w=l===f&&t[i+1].startsWith("/>")?" ":"";a+=l===u?e+r:y>=0?(o.push(s),e.slice(0,y)+"$lit$"+e.slice(y)+n+w):e+n+(-2===y?(o.push(void 0),i):w)}const p=a+(t[e]||"<?>")+(2===i?"</svg>":"");return[void 0!==s?s.createHTML(p):p,o]})(t,i);if(this.el=_.createElement(A,h),T.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=T.nextNode())&&w.length<m;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith("$lit$")||i.startsWith(n)){const e=b[y++];if(t.push(i),void 0!==e){const t=l.getAttribute(e.toLowerCase()+"$lit$").split(n),i=/([.?@])?(.*)/.exec(e);w.push({type:1,index:p,name:i[2],strings:t,ctor:"."===i[1]?M:"?"===i[1]?S:"@"===i[1]?H:x})}else w.push({type:6,index:p})}for(const i of t)l.removeAttribute(i)}if(g.test(l.tagName)){const t=l.textContent.split(n),i=t.length-1;if(i>0){l.textContent=e?e.emptyScript:"";for(let e=0;e<i;e++)l.append(t[e],a()),T.nextNode(),w.push({type:2,index:++p});l.append(t[i],a())}}}else if(8===l.nodeType)if(l.data===o)w.push({type:2,index:p});else{let t=-1;for(;-1!==(t=l.data.indexOf(n,t+1));)w.push({type:7,index:p}),t+=n.length-1}p++}}static createElement(t,i){const e=h.createElement("template");return e.innerHTML=t,e}}function A(t,i,e=t,s){var n,o,r,h;if(i===y)return i;let a=void 0!==s?null===(n=e._$Cl)||void 0===n?void 0:n[s]:e._$Cu;const p=l(i)?void 0:i._$litDirective$;return(null==a?void 0:a.constructor)!==p&&(null===(o=null==a?void 0:a._$AO)||void 0===o||o.call(a,!1),void 0===p?a=void 0:(a=new p(t),a._$AT(t,e,s)),void 0!==s?(null!==(r=(h=e)._$Cl)&&void 0!==r?r:h._$Cl=[])[s]=a:e._$Cu=a),void 0!==a&&(i=A(t,a._$AS(t,i.values),a,s)),i}class b{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:e},parts:s}=this._$AD,n=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:h).importNode(e,!0);T.currentNode=n;let o=T.nextNode(),r=0,a=0,l=s[0];for(;void 0!==l;){if(r===l.index){let i;2===l.type?i=new D(o,o.nextSibling,this,t):1===l.type?i=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(i=new O(o,this,t)),this.v.push(i),l=s[++a]}r!==(null==l?void 0:l.index)&&(o=T.nextNode(),r++)}return n}m(t){let i=0;for(const e of this.v)void 0!==e&&(void 0!==e.strings?(e._$AI(t,e,i),i+=e.strings.length-2):e._$AI(t[i])),i++}}class D{constructor(t,i,e,s){var n;this.type=2,this._$AH=m,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=e,this.options=s,this._$Cg=null===(n=null==s?void 0:s.isConnected)||void 0===n||n}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=A(this,t,i),l(t)?t===m||null==t||""===t?(this._$AH!==m&&this._$AR(),this._$AH=m):t!==this._$AH&&t!==y&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):(t=>{var i;return p(t)||"function"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])})(t)?this.M(t):this.$(t)}A(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==m&&l(this._$AH)?this._$AA.nextSibling.data=t:this.S(h.createTextNode(t)),this._$AH=t}T(t){var i;const{values:e,_$litType$:s}=t,n="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=_.createElement(s.h,this.options)),s);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===n)this._$AH.m(e);else{const t=new b(n,this),i=t.p(this.options);t.m(e),this.S(i),this._$AH=t}}_$AC(t){let i=w.get(t.strings);return void 0===i&&w.set(t.strings,i=new _(t)),i}M(t){p(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let e,s=0;for(const n of t)s===i.length?i.push(e=new D(this.A(a()),this.A(a()),this,this.options)):e=i[s],e._$AI(n),s++;s<i.length&&(this._$AR(e&&e._$AB.nextSibling,s),i.length=s)}_$AR(t=this._$AA.nextSibling,i){var e;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class x{constructor(t,i,e,s,n){this.type=1,this._$AH=m,this._$AN=void 0,this.element=t,this.name=i,this._$AM=s,this.options=n,e.length>2||""!==e[0]||""!==e[1]?(this._$AH=Array(e.length-1).fill(new String),this.strings=e):this._$AH=m}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,e,s){const n=this.strings;let o=!1;if(void 0===n)t=A(this,t,i,0),o=!l(t)||t!==this._$AH&&t!==y,o&&(this._$AH=t);else{const s=t;let r,h;for(t=n[0],r=0;r<n.length-1;r++)h=A(this,s[e+r],i,r),h===y&&(h=this._$AH[r]),o||(o=!l(h)||h!==this._$AH[r]),h===m?t=m:t!==m&&(t+=(null!=h?h:"")+n[r+1]),this._$AH[r]=h}o&&!s&&this.k(t)}k(t){t===m?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class M extends x{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===m?void 0:t}}class S extends x{constructor(){super(...arguments),this.type=4}k(t){t&&t!==m?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class H extends x{constructor(t,i,e,s,n){super(t,i,e,s,n),this.type=5}_$AI(t,i=this){var e;if((t=null!==(e=A(this,t,i,0))&&void 0!==e?e:m)===y)return;const s=this._$AH,n=t===m&&s!==m||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==m&&(s===m||n);n&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,e;"function"==typeof this._$AH?this._$AH.call(null!==(e=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==e?e:this.element,t):this._$AH.handleEvent(t)}}class O{constructor(t,i,e){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=e}get _$AU(){return this._$AM._$AU}_$AI(t){A(this,t)}}const P=window.litHtmlPolyfillSupport;null==P||P(_,D),(null!==(i=globalThis.litHtmlVersions)&&void 0!==i?i:globalThis.litHtmlVersions=[]).push("2.0.1");
/**
	 * @license
	 * Copyright 2017 Google LLC
	 * SPDX-License-Identifier: BSD-3-Clause
	 */
const L=2;
/**
	 * @license
	 * Copyright 2017 Google LLC
	 * SPDX-License-Identifier: BSD-3-Clause
	 */
class I extends class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,i,e){this._$Ct=t,this._$AM=i,this._$Ci=e}_$AS(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}}{constructor(t){if(super(t),this.it=m,t.type!==L)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===m||null==t)return this.vt=void 0,this.it=t;if(t===y)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this.vt;this.it=t;const i=[t];return i.raw=i,this.vt={_$litType$:this.constructor.resultType,strings:i,values:[]}}}I.directiveName="unsafeHTML",I.resultType=1;document.createTextNode("");const C="gstc";function N(t,i=""){let e=`gstc__${t}`;return t===C&&(e=C),i?`${e} ${e}--${i.replace(":","-")}`:e}const U="DependencyLines",Y="config.plugin.DependencyLines",j="config.slots.chart-timeline-items.outer",R=N("chart-timeline-dependency-lines-lines"),W=N("chart-timeline-dependency-lines-lines-line"),k=N("chart-timeline-dependency-lines-points"),G=N("chart-timeline-dependency-lines-points-point");class E{constructor(t,i){this.onDestroy=[],this.vido=t,this.api=this.vido.api,this.state=this.vido.state;const e=this.vido.html`<div class=${G+"--left"}></div>`,s=this.vido.html`<div class=${G+"--right"}></div>`;this.data=function(t){return Object.assign(Object.assign({},t),{lines:[]})}(function(t,i,e){const s=Object.assign(Object.assign({},function(t,i){return{type:"smooth",onLines:[],onLine:[],leftPoint:{content:t,width:10,height:10},rightPoint:{content:i,width:10,height:10}}}(i,e)),t);return t.leftPoint&&(s.leftPoint=Object.assign(Object.assign({},s.leftPoint),t.leftPoint)),t.rightPoint&&(s.rightPoint=Object.assign(Object.assign({},s.rightPoint),t.rightPoint)),s}(i,e,s)),this.slot=this.slot.bind(this),this.generateLines=this.generateLines.bind(this),this.destroy=this.destroy.bind(this),this.updateData(),this.onDestroy.push(this.state.subscribe(Y,(t=>{this.data=t}))),this.state.update(j,(t=>(t.includes(this.slot)||t.push(this.slot),t))),this.onDestroy.push(this.state.subscribeAll(["$data.chart.items","$data.list.rowsHeight","$data.scroll"],this.generateLines,{group:!0}))}destroy(){this.state.update(j,(t=>t.filter((t=>t!==this.slot)))),this.onDestroy.forEach((t=>t())),this.api.pluginDestroyed(U)}updateData(){this.state.update(Y,this.data),this.vido.update()}setStraightPoints(t){const{topOffset:i,leftOffset:e,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;o.visible&&r.visible&&(t.points.push({x:s.position.right+e,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),t.points.push({x:n.position.left-e,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"L",content:this.data.rightPoint.content}))}setSquareAltPoints(t){const{topOffset:i,leftOffset:e,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;if(!o.visible&&!r.visible)return;const h=(n.position.left-s.position.right)/2,a=s.position.right+h,l=(n.position.viewTop-s.position.viewTop)/2,p=s.position.viewTop+l;t.points.push({x:s.position.right+e,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),n.position.left<s.position.right?(t.points.push({x:s.position.right+e+10,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"L",content:null}),t.points.push({x:s.position.right+e+10,y:o.visible?p+i:o.position.viewTop,type:"L",content:null})):t.points.push({x:a,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"L",content:null}),t.points.push({x:a,y:o.visible?p+i:o.position.viewTop,type:"L",content:null}),r.visible?(n.position.left<s.position.right?(t.points.push({x:n.position.left-e-10,y:o.visible?p+i:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left-e-10,y:r.visible?n.position.viewTop+i:o.position.viewTop,type:"L",content:null})):t.points.push({x:a,y:r.visible?n.position.viewTop+i:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left-e,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"L",content:this.data.rightPoint.content})):t.points.push({x:a,y:r.position.viewTop,type:"L",content:this.data.rightPoint.content})}setSquarePoints(t){const{topOffset:i,leftOffset:e,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;(o.visible||r.visible)&&(t.points.push({x:s.position.right+e,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),s.position.viewTop!==n.position.viewTop?n.position.left<s.position.right?(t.points.push({x:s.position.right+e+10,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"L",content:null}),n.position.viewTop>s.position.viewTop?(t.points.push({x:s.position.right+e+10,y:o.visible?o.position.viewTop+o.outerHeight:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+e+10,y:o.visible?o.position.viewTop+o.outerHeight:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+e+10,y:r.visible?n.position.viewTop:r.position.viewTop,type:"L",content:this.data.rightPoint.content})):(t.points.push({x:s.position.right+e+10,y:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+e+10,y:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+e+10,y:r.visible?n.position.viewTop+n.actualHeight:r.position.viewTop,type:"L",content:this.data.rightPoint.content}))):(t.points.push({x:n.position.left+10,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"L",content:null}),n.position.viewTop>s.position.viewTop?t.points.push({x:n.position.left+10,y:r.visible?n.position.viewTop:r.position.viewTop,type:"L",content:this.data.rightPoint.content}):t.points.push({x:n.position.left+10,y:r.visible?n.position.viewTop+n.actualHeight:r.position.viewTop,type:"L",content:this.data.rightPoint.content})):t.points.push({x:n.position.left-e,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"L",content:this.data.rightPoint.content}))}setSmoothPoints(t){const{topOffset:i,leftOffset:e,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;if(!o.visible&&!r.visible)return;if(t.points.push({x:s.position.right+e,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),s.position.viewTop===n.position.viewTop)return void t.points.push({x:n.position.left-e,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"L",content:this.data.rightPoint.content});const h=(n.position.left-s.position.right)/2,a=s.position.right+h;if(s.position.right<=n.position.left)t.points.push({x:a,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"C",content:null}),t.points.push({x:a,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"",content:null}),t.points.push({x:n.position.left-e,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"",content:this.data.rightPoint.content});else{const h=(n.position.viewTop-s.position.viewTop)/2,l=s.position.viewTop+h+i;t.points.push({x:s.position.right+20,y:o.visible?s.position.viewTop+i:o.position.viewTop,type:"C",content:null}),t.points.push({x:s.position.right+40,y:l,type:"",content:null}),t.points.push({x:a,y:l,type:"",content:null}),t.points.push({x:n.position.left+e-20,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"S",content:null}),t.points.push({x:n.position.left+e,y:r.visible?n.position.viewTop+i:r.position.viewTop,type:"",content:this.data.rightPoint.content})}}setPoints(t){switch(t.type){case"straight":this.setStraightPoints(t);break;case"square":this.setSquarePoints(t);break;case"smooth":this.setSmoothPoints(t);break;case"square-alt":this.setSquareAltPoints(t)}}generateLines(){const t=[],i=this.api.getAllItems(),e=this.api.getRowsData(),s=this.api.getItemsData(),n=this.state.get("$data.chart.time"),o=this.state.get("config.chart.spacing"),r=this.state.get("$data.chart.dimensions"),h=this.data.type;for(const a in i){const l=i[a];if(!l.dependant)continue;if(!l.dependant.length)continue;const p=e[l.rowId],u=s[a],c=l;if(u&&p)for(const d of l.dependant){const l=i[d],f=l,$=e[l.rowId],v=s[d];if(!v||!$)continue;if(n.calculatedZoomMode){if(c.time.end<n.leftGlobal&&f.time.start>n.rightGlobal)continue;if(f.time.end<n.leftGlobal&&c.time.start>n.rightGlobal)continue;if(c.time.start>n.rightGlobal&&f.time.start>n.rightGlobal)continue;if(c.time.end<n.leftGlobal&&f.time.end<n.leftGlobal)continue}this.api.calculateItemPosition(a,u,p,n,o),this.api.calculateItemPosition(d,v,$,n,o);const g=u.actualHeight/2,y=0;let m={x:0,y:0,width:r.width,height:r.height,topOffset:g,leftOffset:y,points:[],type:h,fromItemData:u,toItemData:v,fromItem:c,toItem:f,fromRowData:p,toRowData:$,className:W};for(const t of this.data.onLine)m=t(m);this.setPoints(m),t.push(m)}}this.data.lines=t;for(const t of this.data.onLines)this.data.lines=t(this.data.lines);this.updateData()}slot(t){const{html:i,svg:e}=t,s=t=>{if(!t.points.length)return"";const i=t.points.slice(),e=i.shift();return[`${e.type} ${e.x} ${e.y}`,[...i.map((t=>`${t.type} ${t.x} ${t.y}`))]].join(" ")},n=(t,e)=>{const s=`left:${t.x-(0===e?this.data.leftPoint.width/2:this.data.rightPoint.width/2)}px;top:${t.y-(0===e?this.data.leftPoint.height/2:this.data.rightPoint.height/2)}px;width:${0===e?this.data.leftPoint.width:this.data.rightPoint.width}px;height:${0===e?this.data.leftPoint.width:this.data.rightPoint.width}px`;return t.content?i`<div class=${G+" "+G+"--"+this.data.type} style=${s}>
            ${t.content}
          </div>`:null},o=t=>e`<svg width=${t.width} height=${t.height} xmlns="http://www.w3.org/2000/svg">
        <path d=${(t=>{switch(t.type){case"straight":return(t=>{const i=t.points;return[`${i[0].type} ${i[0].x} ${i[0].y}`,`${i[1].type} ${i[1].x} ${i[1].y}`].join(" ")})(t);case"square":case"square-alt":return s(t);case"smooth":return(t=>{if(!t.points.length)return"";const i=t.points.slice(),e=i.shift();return[`${e.type} ${e.x} ${e.y}`,[...i.map((t=>`${t.type} ${t.x} ${t.y}`))]].join(" ")})(t)}})(t)} />
      </svg>`;return t=>i`<div class="${R}">${this.data.lines.map((t=>(t=>i`<div
      class=${t.className}
      style="left: ${t.x}px; top: ${t.y}px; width: ${t.width}px; height: ${t.height}px;"
    >
      ${o(t)}
    </div>`)(t)))}</div>
        ${t}
        <div class="${k}">${this.data.lines.map((t=>(t=>t.points.map(((t,i)=>n(t,i))))(t)))}</div>`}}t.Plugin=function(t={}){return function(i){const e=i.api,s=i.state.get(Y);s&&(t=i.api.mergeDeep({},t,s));const n=new E(i,t);return e.pluginInitialized(U),n.destroy}},Object.defineProperty(t,"__esModule",{value:!0})}));
